/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _f=dojo.isIE?"onreadystatechange":"load",_10=/complete|loaded/;dojo.io.script={get:function(_11){var dfd=this._makeScriptDeferred(_11);var _12=dfd.ioArgs;dojo._ioAddQueryToUrl(_12);dojo._ioNotifyStart(dfd);if(this._canAttach(_12)){var _13=this.attach(_12.id,_12.url,_11.frameDoc);if(!_12.jsonp&&!_12.args.checkString){var _14=dojo.connect(_13,_f,function(evt){if(evt.type=="load"||_10.test(_13.readyState)){dojo.disconnect(_14);_12.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_15){var doc=(_15||dojo.doc);var _16=doc.createElement("script");_16.type="text/javascript";_16.src=url;_16.id=id;_16.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_16);},remove:function(id,_17){dojo.destroy(dojo.byId(id,_17));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_18){var dfd=dojo._ioSetArgs(_18,this._deferredCancel,this._deferredOk,this._deferredError);var _19=dfd.ioArgs;_19.id=dojo._scopeName+"IoScript"+(this._counter++);_19.canDelete=false;_19.jsonp=_18.callbackParamName||_18.jsonp;if(_19.jsonp){_19.query=_19.query||"";if(_19.query.length>0){_19.query+="&";}_19.query+=_19.jsonp+"="+(_18.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_19.id+"._jsonpCallback";_19.frameDoc=_18.frameDoc;_19.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_19.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _1a=dfd.ioArgs;if(_1a.canDelete){dojo.io.script._addDeadScript(_1a);}return _1a.json||_1a.scriptLoaded||_1a;},_deferredError:function(_1b,dfd){if(dfd.ioArgs.canDelete){if(_1b.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}console.log("dojo.io.script error",_1b);return _1b;},_deadScripts:[],_counter:1,_addDeadScript:function(_1c){dojo.io.script._deadScripts.push({id:_1c.id,frameDoc:_1c.frameDoc});_1c.frameDoc=null;},_validCheck:function(dfd){var _1d=dojo.io.script;var _1e=_1d._deadScripts;if(_1e&&_1e.length>0){for(var i=0;i<_1e.length;i++){_1d.remove(_1e[i].id,_1e[i].frameDoc);_1e[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1f=dfd.ioArgs;if(_1f.json||(_1f.scriptLoaded&&!_1f.args.checkString)){return true;}var _20=_1f.args.checkString;if(_20&&eval("typeof("+_20+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_21){return true;},_jsonpCallback:function(_22){this.ioArgs.json=_22;}};})();}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(_23){var _24=this;dojo.mixin(_24,_23);_24.node=_23.node;_24._showArgs=dojo.mixin({},_23);_24._showArgs.node=_24.node;_24._showArgs.duration=_24.showDuration;_24.showAnim=_24.showFunc(_24._showArgs);_24._hideArgs=dojo.mixin({},_23);_24._hideArgs.node=_24.node;_24._hideArgs.duration=_24.hideDuration;_24.hideAnim=_24.hideFunc(_24._hideArgs);dojo.connect(_24.showAnim,"beforeBegin",dojo.hitch(_24.hideAnim,"stop",true));dojo.connect(_24.hideAnim,"beforeBegin",dojo.hitch(_24.showAnim,"stop",true));},show:function(_25){return this.showAnim.play(_25||0);},hide:function(_26){return this.hideAnim.play(_26||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_27={_fire:function(evt,_28){if(this[evt]){this[evt].apply(this,_28||[]);}return this;}};var _29=function(_2a){this._index=-1;this._animations=_2a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_29,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_2b,_2c){if(!this._current){this._current=this._animations[this._index=0];}if(!_2c&&this._current.status()=="playing"){return this;}var _2d=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_2e=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_2f=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_2d);d.disconnect(_2e);d.disconnect(_2f);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_30,_31){this.pause();var _32=this.duration*_30;this._current=null;d.some(this._animations,function(a){if(a.duration<=_32){this._current=a;return true;}_32-=a.duration;return false;});if(this._current){this._current.gotoPercent(_32/this._current.duration,_31);}return this;},stop:function(_33){if(this._current){if(_33){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_29,_27);dojo.fx.chain=function(_34){return new _29(_34);};var _35=function(_36){this._animations=_36||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_36,function(a){var _37=a.duration;if(a.delay){_37+=a.delay;}if(this.duration<_37){this.duration=_37;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var _38=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){_38._connects.push(d.connect(_38._pseudoAnimation,evt,function(){_38._fire(evt,arguments);}));});};d.extend(_35,{_doAction:function(_39,_3a){d.forEach(this._animations,function(a){a[_39].apply(a,_3a);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_3b,_3c){var t=this._pseudoAnimation;t[_3b].apply(t,_3c);},play:function(_3d,_3e){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_3f,_40){var ms=this.duration*_3f;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_40);});this._call("gotoPercent",arguments);return this;},stop:function(_41){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_35,_27);dojo.fx.combine=function(_42){return new _35(_42);};dojo.fx.wipeIn=function(_43){var _44=_43.node=d.byId(_43.node),s=_44.style,o;var _45=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _46=d.style(_44,"height");return Math.max(_46,1);}},end:function(){return _44.scrollHeight;}}}},_43));d.connect(_45,"onEnd",function(){s.height="auto";s.overflow=o;});return _45;};dojo.fx.wipeOut=function(_47){var _48=_47.node=d.byId(_47.node),s=_48.style,o;var _49=d.animateProperty(d.mixin({properties:{height:{end:1}}},_47));d.connect(_49,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(_49,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return _49;};dojo.fx.slideTo=function(_4a){var _4b=_4a.node=d.byId(_4a.node),top=null,_4c=null;var _4d=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);_4c=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;_4c=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=_4c+"px";}};})(_4b);_4d();var _4e=d.animateProperty(d.mixin({properties:{top:_4a.top||0,left:_4a.left||0}},_4a));d.connect(_4e,"beforeBegin",_4e,_4d);return _4e;};})();}if(!dojo._hasResource["dojox.fx._base"]){dojo._hasResource["dojox.fx._base"]=true;dojo.provide("dojox.fx._base");dojo.mixin(dojox.fx,{anim:dojo.anim,animateProperty:dojo.animateProperty,fadeTo:dojo._fade,fadeIn:dojo.fadeIn,fadeOut:dojo.fadeOut,combine:dojo.fx.combine,chain:dojo.fx.chain,slideTo:dojo.fx.slideTo,wipeIn:dojo.fx.wipeIn,wipeOut:dojo.fx.wipeOut});dojox.fx.sizeTo=function(_4f){var _50=_4f.node=dojo.byId(_4f.node),abs="absolute";var _51=_4f.method||"chain";if(!_4f.duration){_4f.duration=500;}if(_51=="chain"){_4f.duration=Math.floor(_4f.duration/2);}var top,_52,_53,_54,_55,_56=null;var _57=(function(n){return function(){var cs=dojo.getComputedStyle(n),pos=cs.position,w=cs.width,h=cs.height;top=(pos==abs?n.offsetTop:parseInt(cs.top)||0);_53=(pos==abs?n.offsetLeft:parseInt(cs.left)||0);_55=(w=="auto"?0:parseInt(w));_56=(h=="auto"?0:parseInt(h));_54=_53-Math.floor((_4f.width-_55)/2);_52=top-Math.floor((_4f.height-_56)/2);if(pos!=abs&&pos!="relative"){var ret=dojo.coords(n,true);top=ret.y;_53=ret.x;n.style.position=abs;n.style.top=top+"px";n.style.left=_53+"px";}};})(_50);var _58=dojo.animateProperty(dojo.mixin({properties:{height:function(){_57();return {end:_4f.height||0,start:_56};},top:function(){return {start:top,end:_52};}}},_4f));var _59=dojo.animateProperty(dojo.mixin({properties:{width:function(){return {start:_55,end:_4f.width||0};},left:function(){return {start:_53,end:_54};}}},_4f));var _5a=dojo.fx[(_4f.method=="combine"?"combine":"chain")]([_58,_59]);return _5a;};dojox.fx.slideBy=function(_5b){var _5c=_5b.node=dojo.byId(_5b.node),top,_5d;var _5e=(function(n){return function(){var cs=dojo.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);_5d=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=dojo.coords(n,true);top=ret.y;_5d=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=_5d+"px";}};})(_5c);_5e();var _5f=dojo.animateProperty(dojo.mixin({properties:{top:top+(_5b.top||0),left:_5d+(_5b.left||0)}},_5b));dojo.connect(_5f,"beforeBegin",_5f,_5e);return _5f;};dojox.fx.crossFade=function(_60){var _61=_60.nodes[0]=dojo.byId(_60.nodes[0]),op1=dojo.style(_61,"opacity"),_62=_60.nodes[1]=dojo.byId(_60.nodes[1]),op2=dojo.style(_62,"opacity");var _63=dojo.fx.combine([dojo[(op1==0?"fadeIn":"fadeOut")](dojo.mixin({node:_61},_60)),dojo[(op1==0?"fadeOut":"fadeIn")](dojo.mixin({node:_62},_60))]);return _63;};dojox.fx.highlight=function(_64){var _65=_64.node=dojo.byId(_64.node);_64.duration=_64.duration||400;var _66=_64.color||"#ffff99",_67=dojo.style(_65,"backgroundColor");if(_67=="rgba(0, 0, 0, 0)"){_67="transparent";}var _68=dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:_66,end:_67}}},_64));if(_67=="transparent"){dojo.connect(_68,"onEnd",_68,function(){_65.style.backgroundColor=_67;});}return _68;};dojox.fx.wipeTo=function(_69){_69.node=dojo.byId(_69.node);var _6a=_69.node,s=_6a.style;var dir=(_69.width?"width":"height"),_6b=_69[dir],_6c={};_6c[dir]={start:function(){s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s[dir]="1px";s.display="";s.visibility="";return 1;}else{var now=dojo.style(_6a,dir);return Math.max(now,1);}},end:_6b};var _6d=dojo.animateProperty(dojo.mixin({properties:_6c},_69));return _6d;};}if(!dojo._hasResource["dojox.fx"]){dojo._hasResource["dojox.fx"]=true;dojo.provide("dojox.fx");}if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;var _6e={};m._degToRad=function(_6f){return _6e[_6f]||(_6e[_6f]=(Math.PI*_6f/180));};m._radToDeg=function(_70){return _70/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _71=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_71,r=dojox.gfx.matrix.normalize(arg[i]);_71=new m.Matrix2D();_71.xx=l.xx*r.xx+l.xy*r.yx;_71.xy=l.xx*r.xy+l.xy*r.yy;_71.yx=l.yx*r.xx+l.yy*r.yx;_71.yy=l.yx*r.xy+l.yy*r.yy;_71.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_71.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_71);}}else{dojo.mixin(this,arg);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_72){var c=Math.cos(_72);var s=Math.sin(_72);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_73){return m.rotate(m._degToRad(_73));},skewX:function(_74){return new m.Matrix2D({xy:Math.tan(_74)});},skewXg:function(_75){return m.skewX(m._degToRad(_75));},skewY:function(_76){return new m.Matrix2D({yx:Math.tan(_76)});},skewYg:function(_77){return m.skewY(m._degToRad(_77));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_78){return (_78 instanceof m.Matrix2D)?_78:new m.Matrix2D(_78);},clone:function(_79){var obj=new m.Matrix2D();for(var i in _79){if(typeof (_79[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_79[i]){obj[i]=_79[i];}}return obj;},invert:function(_7a){var M=m.normalize(_7a),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_7b,x,y){return {x:_7b.xx*x+_7b.xy*y+_7b.dx,y:_7b.yx*x+_7b.yy*y+_7b.dy};},multiplyPoint:function(_7c,a,b){var M=m.normalize(_7c);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_7d){var M=m.normalize(_7d);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_7e,x,y){return m.multiply(m.translate(x,y),_7e,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_7f,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_7f),a,b);}return m._sandwich(m.rotate(_7f),a.x,a.y);},rotategAt:function(_80,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_80),a,b);}return m._sandwich(m.rotateg(_80),a.x,a.y);},skewXAt:function(_81,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_81),a,b);}return m._sandwich(m.skewX(_81),a.x,a.y);},skewXgAt:function(_82,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_82),a,b);}return m._sandwich(m.skewXg(_82),a.x,a.y);},skewYAt:function(_83,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_83),a,b);}return m._sandwich(m.skewY(_83),a.x,a.y);},skewYgAt:function(_84,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_84),a,b);}return m._sandwich(m.skewYg(_84),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx.fx"]){dojo._hasResource["dojox.gfx.fx"]=true;dojo.provide("dojox.gfx.fx");(function(){var d=dojo,g=dojox.gfx,m=g.matrix;var _85=function(_86,end){this.start=_86,this.end=end;};d.extend(_85,{getValue:function(r){return (this.end-this.start)*r+this.start;}});var _87=function(_88,end,_89){this.start=_88,this.end=end;this.units=_89;};d.extend(_87,{getValue:function(r){return (this.end-this.start)*r+this.start+this.units;}});var _8a=function(_8b,end){this.start=_8b,this.end=end;this.temp=new dojo.Color();};d.extend(_8a,{getValue:function(r){return d.blendColors(this.start,this.end,r,this.temp);}});var _8c=function(_8d){this.values=_8d;this.length=_8d.length;};d.extend(_8c,{getValue:function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];}});var _8e=function(_8f,def){this.values=_8f;this.def=def?def:{};};d.extend(_8e,{getValue:function(r){var ret=dojo.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;}});var _90=function(_91,_92){this.stack=_91;this.original=_92;};d.extend(_90,{getValue:function(r){var ret=[];dojo.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=dojo.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_93=f.apply(m,val);if(_93 instanceof m.Matrix2D){ret.push(_93);}},this);return ret;}});var _94=new d.Color(0,0,0,0);var _95=function(_96,obj,_97,def){if(_96.values){return new _8c(_96.values);}var _98,_99,end;if(_96.start){_99=g.normalizeColor(_96.start);}else{_99=_98=obj?(_97?obj[_97]:obj):def;}if(_96.end){end=g.normalizeColor(_96.end);}else{if(!_98){_98=obj?(_97?obj[_97]:obj):def;}end=_98;}return new _8a(_99,end);};var _9a=function(_9b,obj,_9c,def){if(_9b.values){return new _8c(_9b.values);}var _9d,_9e,end;if(_9b.start){_9e=_9b.start;}else{_9e=_9d=obj?obj[_9c]:def;}if(_9b.end){end=_9b.end;}else{if(typeof _9d!="number"){_9d=obj?obj[_9c]:def;}end=_9d;}return new _85(_9e,end);};g.fx.animateStroke=function(_9f){if(!_9f.easing){_9f.easing=d._defaultEasing;}var _a0=new d.Animation(_9f),_a1=_9f.shape,_a2;d.connect(_a0,"beforeBegin",_a0,function(){_a2=_a1.getStroke();var _a3=_9f.color,_a4={},_a5,_a6,end;if(_a3){_a4.color=_95(_a3,_a2,"color",_94);}_a3=_9f.style;if(_a3&&_a3.values){_a4.style=new _8c(_a3.values);}_a3=_9f.width;if(_a3){_a4.width=_9a(_a3,_a2,"width",1);}_a3=_9f.cap;if(_a3&&_a3.values){_a4.cap=new _8c(_a3.values);}_a3=_9f.join;if(_a3){if(_a3.values){_a4.join=new _8c(_a3.values);}else{_a6=_a3.start?_a3.start:(_a2&&_a2.join||0);end=_a3.end?_a3.end:(_a2&&_a2.join||0);if(typeof _a6=="number"&&typeof end=="number"){_a4.join=new _85(_a6,end);}}}this.curve=new _8e(_a4,_a2);});d.connect(_a0,"onAnimate",_a1,"setStroke");return _a0;};g.fx.animateFill=function(_a7){if(!_a7.easing){_a7.easing=d._defaultEasing;}var _a8=new d.Animation(_a7),_a9=_a7.shape,_aa;d.connect(_a8,"beforeBegin",_a8,function(){_aa=_a9.getFill();var _ab=_a7.color,_ac={};if(_ab){this.curve=_95(_ab,_aa,"",_94);}});d.connect(_a8,"onAnimate",_a9,"setFill");return _a8;};g.fx.animateFont=function(_ad){if(!_ad.easing){_ad.easing=d._defaultEasing;}var _ae=new d.Animation(_ad),_af=_ad.shape,_b0;d.connect(_ae,"beforeBegin",_ae,function(){_b0=_af.getFont();var _b1=_ad.style,_b2={},_b3,_b4,end;if(_b1&&_b1.values){_b2.style=new _8c(_b1.values);}_b1=_ad.variant;if(_b1&&_b1.values){_b2.variant=new _8c(_b1.values);}_b1=_ad.weight;if(_b1&&_b1.values){_b2.weight=new _8c(_b1.values);}_b1=_ad.family;if(_b1&&_b1.values){_b2.family=new _8c(_b1.values);}_b1=_ad.size;if(_b1&&_b1.units){_b4=parseFloat(_b1.start?_b1.start:(_af.font&&_af.font.size||"0"));end=parseFloat(_b1.end?_b1.end:(_af.font&&_af.font.size||"0"));_b2.size=new _87(_b4,end,_b1.units);}this.curve=new _8e(_b2,_b0);});d.connect(_ae,"onAnimate",_af,"setFont");return _ae;};g.fx.animateTransform=function(_b5){if(!_b5.easing){_b5.easing=d._defaultEasing;}var _b6=new d.Animation(_b5),_b7=_b5.shape,_b8;d.connect(_b6,"beforeBegin",_b6,function(){_b8=_b7.getTransform();this.curve=new _90(_b5.transform,_b8);});d.connect(_b6,"onAnimate",_b7,"setTransform");return _b6;};})();}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(_b9,_ba){var cls=_b9.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_ba+" ")>=0;};g._addClass=function(_bb,_bc){var cls=_bb.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_bc+" ")<0){_bb.setAttribute("className",cls+(cls?" ":"")+_bc);}};g._removeClass=function(_bd,_be){var cls=_bd.getAttribute("className");if(cls){_bd.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_be+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _bf={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var s=div.style;s.position="absolute";s.left="-100px";s.top="0px";s.width="30px";s.height="1000em";s.border="0px";s.margin="0px";s.padding="0px";s.outline="none";s.lineHeight="1";s.overflow="hidden";dojo.body().appendChild(div);for(var p in _bf){div.style.fontSize=p;_bf[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _bf;};var _c0=null;b._getCachedFontMeasurements=function(_c1){if(_c1||!_c0){_c0=b._getFontMeasurements();}return _c0;};var _c2=null,_c3={};b._getTextBox=function(_c4,_c5,_c6){var m,s,al=arguments.length;if(!_c2){m=_c2=dojo.doc.createElement("div");s=m.style;s.position="absolute";s.left="-10000px";s.top="0";dojo.body().appendChild(m);}else{m=_c2;s=m.style;}m.className="";s.border="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_c5){for(var i in _c5){if(i in _c3){continue;}s[i]=_c5[i];}}if(al>2&&_c6){m.className=_c6;}m.innerHTML=_c4;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return dojo.marginBox(m);}};var _c7=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_c7);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _c8={};return function(_c9){var t=_c8[_c9];if(t){return new t();}t=_c8[_c9]=new Function;t.prototype=dojox.gfx["default"+_c9];return new t();};})(),normalizeColor:function(_ca){return (_ca instanceof dojo.Color)?_ca:new dojo.Color(_ca);},normalizeParameters:function(_cb,_cc){if(_cc){var _cd={};for(var x in _cb){if(x in _cc&&!(x in _cd)){_cb[x]=_cc[x];}}}return _cb;},makeParameters:function(_ce,_cf){if(!_cf){return dojo.delegate(_ce);}var _d0={};for(var i in _ce){if(!(i in _d0)){_d0[i]=dojo.clone((i in _cf)?_cf[i]:_ce[i]);}}return _d0;},formatNumber:function(x,_d1){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _d2=val.indexOf(".");if(_d2>=0&&val.length-_d2>5){val=x.toFixed(4);}}if(x<0){return val;}return _d1?" "+val:val;},makeFontString:function(_d3){return _d3.style+" "+_d3.variant+" "+_d3.weight+" "+_d3.size+" "+_d3.family;},splitFontString:function(str){var _d4=dojox.gfx.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}_d4.style=t[0];_d4.variant=t[1];_d4.weight=t[2];var i=t[3].indexOf("/");_d4.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){_d4.family=t.slice(j).join(" ");}}while(false);return _d4;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _d5=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_d5;case "in":return val*72*_d5;case "pc":return val*12*_d5;case "mm":return val*dojox.gfx.mm_in_pt*_d5;case "cm":return val*dojox.gfx.cm_in_pt*_d5;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;}});}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=dojox.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_d6){this.shape=dojox.gfx.makeParameters(this.shape,_d6);this.bbox=null;return this;},setFill:function(_d7){if(!_d7){this.fillStyle=null;return this;}var f=null;if(typeof (_d7)=="object"&&"type" in _d7){switch(_d7.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,_d7);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,_d7);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,_d7);break;}}else{f=dojox.gfx.normalizeColor(_d7);}this.fillStyle=f;return this;},setStroke:function(_d8){if(!_d8){this.strokeStyle=null;return this;}if(typeof _d8=="string"||dojo.isArray(_d8)||_d8 instanceof dojo.Color){_d8={color:_d8};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_d8);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_d9){this.matrix=dojox.gfx.matrix.clone(_d9?dojox.gfx.matrix.normalize(_d9):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_da){return _da?this.setTransform([this.matrix,_da]):this;},applyLeftTransform:function(_db){return _db?this.setTransform([_db,this.matrix]):this;},applyTransform:function(_dc){return _dc?this.setTransform([this.matrix,_dc]):this;},removeShape:function(_dd){if(this.parent){this.parent.remove(this,_dd);}return this;},_setParent:function(_de,_df){this.parent=_de;return this._updateParentMatrix(_df);},_updateParentMatrix:function(_e0){this.parentMatrix=_e0?dojox.gfx.matrix.clone(_e0):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(_e1,_e2,_e3){return arguments.length>2?dojo.connect(this.getEventSource(),_e1,_e2,_e3):dojo.connect(this.getEventSource(),_e1,_e2);},disconnect:function(_e4){dojo.disconnect(_e4);}};dojo.extend(dojox.gfx.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},add:function(_e5){var _e6=_e5.getParent();if(_e6){_e6.remove(_e5,true);}this.children.push(_e5);return _e5._setParent(this,this._getRealMatrix());},remove:function(_e7,_e8){for(var i=0;i<this.children.length;++i){if(this.children[i]==_e7){if(_e8){}else{_e7.parent=null;_e7.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_e9){for(var i=0;i<this.children.length;++i){if(this.children[i]==_e9){this.children.splice(i,1);this.children.push(_e9);break;}}return this;},_moveChildToBack:function(_ea){for(var i=0;i<this.children.length;++i){if(this.children[i]==_ea){this.children.splice(i,1);this.children.unshift(_ea);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo.destroy);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_eb){},whenLoaded:function(_ec,_ed){var f=dojo.hitch(_ec,_ed);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_ee){dojo.disconnect(h);f(_ee);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.Shape,{constructor:function(_ef){this.shape=dojox.gfx.getDefault("Rect");this.rawNode=_ef;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.Shape,{constructor:function(_f0){this.shape=dojox.gfx.getDefault("Ellipse");this.rawNode=_f0;},getBoundingBox:function(){if(!this.bbox){var _f1=this.shape;this.bbox={x:_f1.cx-_f1.rx,y:_f1.cy-_f1.ry,width:2*_f1.rx,height:2*_f1.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.Shape,{constructor:function(_f2){this.shape=dojox.gfx.getDefault("Circle");this.rawNode=_f2;},getBoundingBox:function(){if(!this.bbox){var _f3=this.shape;this.bbox={x:_f3.cx-_f3.r,y:_f3.cy-_f3.r,width:2*_f3.r,height:2*_f3.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.Shape,{constructor:function(_f4){this.shape=dojox.gfx.getDefault("Line");this.rawNode=_f4;},getBoundingBox:function(){if(!this.bbox){var _f5=this.shape;this.bbox={x:Math.min(_f5.x1,_f5.x2),y:Math.min(_f5.y1,_f5.y2),width:Math.abs(_f5.x2-_f5.x1),height:Math.abs(_f5.y2-_f5.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.Shape,{constructor:function(_f6){this.shape=dojox.gfx.getDefault("Polyline");this.rawNode=_f6;},setShape:function(_f7,_f8){if(_f7&&_f7 instanceof Array){dojox.gfx.Shape.prototype.setShape.call(this,{points:_f7});if(_f8&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{dojox.gfx.Shape.prototype.setShape.call(this,_f7);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _f9=[];for(var i=0;i<l;i+=2){_f9.push({x:p[i],y:p[i+1]});}this.shape.points=_f9;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _fa={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_fa.l>t.x){_fa.l=t.x;}if(_fa.r<t.x){_fa.r=t.x;}if(_fa.t>t.y){_fa.t=t.y;}if(_fa.b<t.y){_fa.b=t.y;}}this.bbox={x:_fa.l,y:_fa.t,width:_fa.r-_fa.l,height:_fa.b-_fa.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.Shape,{constructor:function(_fb){this.shape=dojox.gfx.getDefault("Image");this.rawNode=_fb;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.Shape,{constructor:function(_fc){this.fontStyle=null;this.shape=dojox.gfx.getDefault("Text");this.rawNode=_fc;},getFont:function(){return this.fontStyle;},setFont:function(_fd){this.fontStyle=typeof _fd=="string"?dojox.gfx.splitFontString(_fd):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_fd);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_fe){var gfx=dojox.gfx;switch(_fe.type){case gfx.defaultPath.type:return this.createPath(_fe);case gfx.defaultRect.type:return this.createRect(_fe);case gfx.defaultCircle.type:return this.createCircle(_fe);case gfx.defaultEllipse.type:return this.createEllipse(_fe);case gfx.defaultLine.type:return this.createLine(_fe);case gfx.defaultPolyline.type:return this.createPolyline(_fe);case gfx.defaultImage.type:return this.createImage(_fe);case gfx.defaultText.type:return this.createText(_fe);case gfx.defaultTextPath.type:return this.createTextPath(_fe);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(_ff){return this.createObject(dojox.gfx.Rect,_ff);},createEllipse:function(_100){return this.createObject(dojox.gfx.Ellipse,_100);},createCircle:function(_101){return this.createObject(dojox.gfx.Circle,_101);},createLine:function(line){return this.createObject(dojox.gfx.Line,line);},createPolyline:function(_102){return this.createObject(dojox.gfx.Polyline,_102);},createImage:function(_103){return this.createObject(dojox.gfx.Image,_103);},createText:function(text){return this.createObject(dojox.gfx.Text,text);},createPath:function(path){return this.createObject(dojox.gfx.Path,path);},createTextPath:function(text){return this.createObject(dojox.gfx.TextPath,{}).setText(text);},createObject:function(_104,_105){return null;}};}if(!dojo._hasResource["dojox.gfx.path"]){dojo._hasResource["dojox.gfx.path"]=true;dojo.provide("dojox.gfx.path");dojo.declare("dojox.gfx.path.Path",dojox.gfx.Shape,{constructor:function(_106){this.shape=dojo.clone(dojox.gfx.defaultPath);this.segments=[];this.absolute=true;this.last={};this.rawNode=_106;},setAbsoluteMode:function(mode){this.absolute=typeof mode=="string"?(mode=="absolute"):mode;return this;},getAbsoluteMode:function(){return this.absolute;},getBoundingBox:function(){return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},getLastPosition:function(){return "x" in this.last?this.last:null;},_updateBBox:function(x,y){if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_107){var n=_107.args,l=n.length;switch(_107.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(var i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(var i=0;i<l;++i){this._updateBBox(n[i],this.last.y);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(var i=0;i<l;++i){this._updateBBox(this.last.x,n[i]);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _108=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1]);_108=2;}for(var i=_108;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "l":case "t":for(var i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "h":for(var i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y);}this.absolute=false;break;case "v":for(var i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i]);}this.absolute=false;break;case "c":for(var i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3]);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5]);}this.absolute=false;break;case "s":case "q":for(var i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3]);}this.absolute=false;break;case "A":for(var i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(var i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6]);}this.absolute=false;break;}var path=[_107.action];for(var i=0;i<l;++i){path.push(dojox.gfx.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=path.join("");}else{Array.prototype.push.apply(this.shape.path,path);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_109,args){var _10a=this._validSegments[_109.toLowerCase()];if(typeof _10a=="number"){if(_10a){if(args.length>=_10a){var _10b={action:_109,args:args.slice(0,args.length-args.length%_10a)};this.segments.push(_10b);this._updateWithSegment(_10b);}}else{var _10b={action:_109,args:[]};this.segments.push(_10b);this._updateWithSegment(_10b);}}},_collectArgs:function(_10c,args){for(var i=0;i<args.length;++i){var t=args[i];if(typeof t=="boolean"){_10c.push(t?1:0);}else{if(typeof t=="number"){_10c.push(t);}else{if(t instanceof Array){this._collectArgs(_10c,t);}else{if("x" in t&&"y" in t){_10c.push(t.x,t.y);}}}}}},moveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"M":"m",args);return this;},lineTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"L":"l",args);return this;},hLineTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"H":"h",args);return this;},vLineTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"V":"v",args);return this;},curveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"C":"c",args);return this;},smoothCurveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"S":"s",args);return this;},qCurveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"Q":"q",args);return this;},qSmoothCurveTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"T":"t",args);return this;},arcTo:function(){var args=[];this._collectArgs(args,arguments);this._pushSegment(this.absolute?"A":"a",args);return this;},closePath:function(){this._pushSegment("Z",[]);return this;},_setPath:function(path){var p=dojo.isArray(path)?path:path.match(dojox.gfx.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _10d="",args=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_10d){this._pushSegment(_10d,args);}args=[];_10d=t;}else{args.push(x);}}this._pushSegment(_10d,args);},setShape:function(_10e){dojox.gfx.Shape.prototype.setShape.call(this,typeof _10e=="string"?{path:_10e}:_10e);var path=this.shape.path;this.shape.path=[];this._setPath(path);this.shape.path=this.shape.path.join("");return this;},_2PI:Math.PI*2});dojo.declare("dojox.gfx.path.TextPath",dojox.gfx.path.Path,{constructor:function(_10f){if(!("text" in this)){this.text=dojo.clone(dojox.gfx.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=dojo.clone(dojox.gfx.defaultFont);}},getText:function(){return this.text;},setText:function(_110){this.text=dojox.gfx.makeParameters(this.text,typeof _110=="string"?{text:_110}:_110);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_111){this.fontStyle=typeof _111=="string"?dojox.gfx.splitFontString(_111):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_111);this._setFont();return this;}});}if(!dojo._hasResource["dojox.gfx.svg"]){dojo._hasResource["dojox.gfx.svg"]=true;dojo.provide("dojox.gfx.svg");(function(){var d=dojo,g=dojox.gfx,gs=g.shape,svg=g.svg;var _112=function(ns,_113){if(document.createElementNS){return document.createElementNS(ns,_113);}else{return document.createElement(_113);}};svg.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};svg.getRef=function(name){if(!name||name=="none"){return null;}if(name.match(/^url\(#.+\)$/)){return d.byId(name.slice(5,-1));}if(name.match(/^#dojoUnique\d+$/)){return d.byId(name.slice(1));}return null;};svg.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};d.extend(g.Shape,{setFill:function(fill){if(!fill){this.fillStyle=null;this.rawNode.setAttribute("fill","none");this.rawNode.setAttribute("fill-opacity",0);return this;}var f;var _114=function(x){this.setAttribute(x,f[x].toFixed(8));};if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);var _115=this._setFillObject(f,"linearGradient");d.forEach(["x1","y1","x2","y2"],_114,_115);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);var _115=this._setFillObject(f,"radialGradient");d.forEach(["cx","cy","r"],_114,_115);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);var _116=this._setFillObject(f,"pattern");d.forEach(["x","y","width","height"],_114,_116);break;}this.fillStyle=f;return this;}var f=g.normalizeColor(fill);this.fillStyle=f;this.rawNode.setAttribute("fill",f.toCss());this.rawNode.setAttribute("fill-opacity",f.a);this.rawNode.setAttribute("fill-rule","evenodd");return this;},setStroke:function(_117){var rn=this.rawNode;if(!_117){this.strokeStyle=null;rn.setAttribute("stroke","none");rn.setAttribute("stroke-opacity",0);return this;}if(typeof _117=="string"||d.isArray(_117)||_117 instanceof d.Color){_117={color:_117};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_117);s.color=g.normalizeColor(s.color);if(s){rn.setAttribute("stroke",s.color.toCss());rn.setAttribute("stroke-opacity",s.color.a);rn.setAttribute("stroke-width",s.width);rn.setAttribute("stroke-linecap",s.cap);if(typeof s.join=="number"){rn.setAttribute("stroke-linejoin","miter");rn.setAttribute("stroke-miterlimit",s.join);}else{rn.setAttribute("stroke-linejoin",s.join);}var da=s.style.toLowerCase();if(da in svg.dasharray){da=svg.dasharray[da];}if(da instanceof Array){da=d._toArray(da);for(var i=0;i<da.length;++i){da[i]*=s.width;}if(s.cap!="butt"){for(var i=0;i<da.length;i+=2){da[i]-=s.width;if(da[i]<1){da[i]=1;}}for(var i=1;i<da.length;i+=2){da[i]+=s.width;}}da=da.join(",");}rn.setAttribute("stroke-dasharray",da);rn.setAttribute("dojoGfxStrokeStyle",s.style);}return this;},_getParentSurface:function(){var _118=this.parent;for(;_118&&!(_118 instanceof g.Surface);_118=_118.parent){}return _118;},_setFillObject:function(f,_119){var _11a=svg.xmlns.svg;this.fillStyle=f;var _11b=this._getParentSurface(),defs=_11b.defNode,fill=this.rawNode.getAttribute("fill"),ref=svg.getRef(fill);if(ref){fill=ref;if(fill.tagName.toLowerCase()!=_119.toLowerCase()){var id=fill.id;fill.parentNode.removeChild(fill);fill=_112(_11a,_119);fill.setAttribute("id",id);defs.appendChild(fill);}else{while(fill.childNodes.length){fill.removeChild(fill.lastChild);}}}else{fill=_112(_11a,_119);fill.setAttribute("id",g._base._getUniqueId());defs.appendChild(fill);}if(_119=="pattern"){fill.setAttribute("patternUnits","userSpaceOnUse");var img=_112(_11a,"image");img.setAttribute("x",0);img.setAttribute("y",0);img.setAttribute("width",f.width.toFixed(8));img.setAttribute("height",f.height.toFixed(8));img.setAttributeNS(svg.xmlns.xlink,"href",f.src);fill.appendChild(img);}else{fill.setAttribute("gradientUnits","userSpaceOnUse");for(var i=0;i<f.colors.length;++i){var c=f.colors[i],t=_112(_11a,"stop"),cc=c.color=g.normalizeColor(c.color);t.setAttribute("offset",c.offset.toFixed(8));t.setAttribute("stop-color",cc.toCss());t.setAttribute("stop-opacity",cc.a);fill.appendChild(t);}}this.rawNode.setAttribute("fill","url(#"+fill.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return fill;},_applyTransform:function(){var _11c=this.matrix;if(_11c){var tm=this.matrix;this.rawNode.setAttribute("transform","matrix("+tm.xx.toFixed(8)+","+tm.yx.toFixed(8)+","+tm.xy.toFixed(8)+","+tm.yy.toFixed(8)+","+tm.dx.toFixed(8)+","+tm.dy.toFixed(8)+")");}else{this.rawNode.removeAttribute("transform");}return this;},setRawNode:function(_11d){var r=this.rawNode=_11d;if(this.shape.type!="image"){r.setAttribute("fill","none");}r.setAttribute("fill-opacity",0);r.setAttribute("stroke","none");r.setAttribute("stroke-opacity",0);r.setAttribute("stroke-width",1);r.setAttribute("stroke-linecap","butt");r.setAttribute("stroke-linejoin","miter");r.setAttribute("stroke-miterlimit",4);},setShape:function(_11e){this.shape=g.makeParameters(this.shape,_11e);for(var i in this.shape){if(i!="type"){this.rawNode.setAttribute(i,this.shape[i]);}}this.bbox=null;return this;},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this;},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this;}});dojo.declare("dojox.gfx.Group",g.Shape,{constructor:function(){svg.Container._init.call(this);},setRawNode:function(_11f){this.rawNode=_11f;}});g.Group.nodeType="g";dojo.declare("dojox.gfx.Rect",gs.Rect,{setShape:function(_120){this.shape=g.makeParameters(this.shape,_120);this.bbox=null;for(var i in this.shape){if(i!="type"&&i!="r"){this.rawNode.setAttribute(i,this.shape[i]);}}if(this.shape.r){this.rawNode.setAttribute("ry",this.shape.r);this.rawNode.setAttribute("rx",this.shape.r);}return this;}});g.Rect.nodeType="rect";g.Ellipse=gs.Ellipse;g.Ellipse.nodeType="ellipse";g.Circle=gs.Circle;g.Circle.nodeType="circle";g.Line=gs.Line;g.Line.nodeType="line";dojo.declare("dojox.gfx.Polyline",gs.Polyline,{setShape:function(_121,_122){if(_121&&_121 instanceof Array){this.shape=g.makeParameters(this.shape,{points:_121});if(_122&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.shape=g.makeParameters(this.shape,_121);}this.bbox=null;this._normalizePoints();var attr=[],p=this.shape.points;for(var i=0;i<p.length;++i){attr.push(p[i].x.toFixed(8),p[i].y.toFixed(8));}this.rawNode.setAttribute("points",attr.join(" "));return this;}});g.Polyline.nodeType="polyline";dojo.declare("dojox.gfx.Image",gs.Image,{setShape:function(_123){this.shape=g.makeParameters(this.shape,_123);this.bbox=null;var _124=this.rawNode;for(var i in this.shape){if(i!="type"&&i!="src"){_124.setAttribute(i,this.shape[i]);}}_124.setAttribute("preserveAspectRatio","none");_124.setAttributeNS(svg.xmlns.xlink,"href",this.shape.src);return this;}});g.Image.nodeType="image";dojo.declare("dojox.gfx.Text",gs.Text,{setShape:function(_125){this.shape=g.makeParameters(this.shape,_125);this.bbox=null;var r=this.rawNode,s=this.shape;r.setAttribute("x",s.x);r.setAttribute("y",s.y);r.setAttribute("text-anchor",s.align);r.setAttribute("text-decoration",s.decoration);r.setAttribute("rotate",s.rotated?90:0);r.setAttribute("kerning",s.kerning?"auto":0);r.setAttribute("text-rendering","optimizeLegibility");if(!dojo.isIE){r.textContent=s.text;}else{r.appendChild(document.createTextNode(s.text));}return this;},getTextWidth:function(){var _126=this.rawNode,_127=_126.parentNode,_128=_126.cloneNode(true);_128.style.visibility="hidden";var _129=0,_12a=_128.firstChild.nodeValue;_127.appendChild(_128);if(_12a!=""){while(!_129){_129=parseInt(_128.getBBox().width);}}_127.removeChild(_128);return _129;}});g.Text.nodeType="text";dojo.declare("dojox.gfx.Path",g.path.Path,{_updateWithSegment:function(_12b){g.Path.superclass._updateWithSegment.apply(this,arguments);if(typeof (this.shape.path)=="string"){this.rawNode.setAttribute("d",this.shape.path);}},setShape:function(_12c){g.Path.superclass.setShape.apply(this,arguments);this.rawNode.setAttribute("d",this.shape.path);return this;}});g.Path.nodeType="path";dojo.declare("dojox.gfx.TextPath",g.path.TextPath,{_updateWithSegment:function(_12d){g.Path.superclass._updateWithSegment.apply(this,arguments);this._setTextPath();},setShape:function(_12e){g.Path.superclass.setShape.apply(this,arguments);this._setTextPath();return this;},_setTextPath:function(){if(typeof this.shape.path!="string"){return;}var r=this.rawNode;if(!r.firstChild){var tp=_112(svg.xmlns.svg,"textPath"),tx=document.createTextNode("");tp.appendChild(tx);r.appendChild(tp);}var ref=r.firstChild.getAttributeNS(svg.xmlns.xlink,"href"),path=ref&&svg.getRef(ref);if(!path){var _12f=this._getParentSurface();if(_12f){var defs=_12f.defNode;path=_112(svg.xmlns.svg,"path");var id=g._base._getUniqueId();path.setAttribute("id",id);defs.appendChild(path);r.firstChild.setAttributeNS(svg.xmlns.xlink,"href","#"+id);}}if(path){path.setAttribute("d",this.shape.path);}},_setText:function(){var r=this.rawNode;if(!r.firstChild){var tp=_112(svg.xmlns.svg,"textPath"),tx=document.createTextNode("");tp.appendChild(tx);r.appendChild(tp);}r=r.firstChild;var t=this.text;r.setAttribute("alignment-baseline","middle");switch(t.align){case "middle":r.setAttribute("text-anchor","middle");r.setAttribute("startOffset","50%");break;case "end":r.setAttribute("text-anchor","end");r.setAttribute("startOffset","100%");break;default:r.setAttribute("text-anchor","start");r.setAttribute("startOffset","0%");break;}r.setAttribute("baseline-shift","0.5ex");r.setAttribute("text-decoration",t.decoration);r.setAttribute("rotate",t.rotated?90:0);r.setAttribute("kerning",t.kerning?"auto":0);r.firstChild.data=t.text;}});g.TextPath.nodeType="text";dojo.declare("dojox.gfx.Surface",gs.Surface,{constructor:function(){svg.Container._init.call(this);},destroy:function(){this.defNode=null;this.inherited(arguments);},setDimensions:function(_130,_131){if(!this.rawNode){return this;}this.rawNode.setAttribute("width",_130);this.rawNode.setAttribute("height",_131);return this;},getDimensions:function(){var t=this.rawNode?{width:g.normalizedLength(this.rawNode.getAttribute("width")),height:g.normalizedLength(this.rawNode.getAttribute("height"))}:null;return t;}});g.createSurface=function(_132,_133,_134){var s=new g.Surface();s.rawNode=_112(svg.xmlns.svg,"svg");if(_133){s.rawNode.setAttribute("width",_133);}if(_134){s.rawNode.setAttribute("height",_134);}var _135=_112(svg.xmlns.svg,"defs");s.rawNode.appendChild(_135);s.defNode=_135;s._parent=d.byId(_132);s._parent.appendChild(s.rawNode);return s;};svg.Font={_setFont:function(){var f=this.fontStyle;this.rawNode.setAttribute("font-style",f.style);this.rawNode.setAttribute("font-variant",f.variant);this.rawNode.setAttribute("font-weight",f.weight);this.rawNode.setAttribute("font-size",f.size);this.rawNode.setAttribute("font-family",f.family);}};svg.Container={_init:function(){gs.Container._init.call(this);},add:function(_136){if(this!=_136.getParent()){this.rawNode.appendChild(_136.rawNode);gs.Container.add.apply(this,arguments);}return this;},remove:function(_137,_138){if(this==_137.getParent()){if(this.rawNode==_137.rawNode.parentNode){this.rawNode.removeChild(_137.rawNode);}gs.Container.remove.apply(this,arguments);}return this;},clear:function(){var r=this.rawNode;while(r.lastChild){r.removeChild(r.lastChild);}var _139=this.defNode;if(_139){while(_139.lastChild){_139.removeChild(_139.lastChild);}r.appendChild(_139);}return gs.Container.clear.apply(this,arguments);},_moveChildToFront:gs.Container._moveChildToFront,_moveChildToBack:gs.Container._moveChildToBack};d.mixin(gs.Creator,{createObject:function(_13a,_13b){if(!this.rawNode){return null;}var _13c=new _13a(),node=_112(svg.xmlns.svg,_13a.nodeType);_13c.setRawNode(node);this.rawNode.appendChild(node);_13c.setShape(_13b);this.add(_13c);return _13c;}});d.extend(g.Text,svg.Font);d.extend(g.TextPath,svg.Font);d.extend(g.Group,svg.Container);d.extend(g.Group,gs.Creator);d.extend(g.Surface,svg.Container);d.extend(g.Surface,gs.Creator);})();}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,flag,_13d;if(!gfx.renderer){if(dojo.config.forceGfxRenderer){dojox.gfx.renderer=dojo.config.forceGfxRenderer;return;}var _13e=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,silverlight,canvas").split(",");var ua=navigator.userAgent,_13f=0,_140=0;if(dojo.isSafari>=3){if(ua.indexOf("iPhone")>=0||ua.indexOf("iPod")>=0){_13d=ua.match(/Version\/(\d(\.\d)?(\.\d)?)\sMobile\/([^\s]*)\s?/);if(_13d){_13f=parseInt(_13d[4].substr(0,3),16);}}}if(dojo.isWebKit){if(!_13f){_13d=ua.match(/Android\s+(\d+\.\d+)/);if(_13d){_140=parseFloat(_13d[1]);}}}for(var i=0;i<_13e.length;++i){switch(_13e[i]){case "svg":if(!dojo.isIE&&(!_13f||_13f>=1521)&&!_140&&!dojo.isAIR){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){flag=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){flag=true;}}}catch(e){flag=false;}finally{sl=null;}if(flag){dojox.gfx.renderer="silverlight";}break;case "canvas":if(!dojo.isIE){dojox.gfx.renderer="canvas";}break;}if(dojox.gfx.renderer){break;}}if(dojo.config.isDebug){console.log("gfx renderer = "+dojox.gfx.renderer);}}});dojo.requireIf(dojox.gfx.renderer=="vml","dojox.gfx.vml");dojo.requireIf(dojox.gfx.renderer=="silverlight","dojox.gfx.silverlight");dojo.requireIf(dojox.gfx.renderer=="canvas","dojox.gfx.canvas");}if(!dojo._hasResource["dojox.lang.functional.lambda"]){dojo._hasResource["dojox.lang.functional.lambda"]=true;dojo.provide("dojox.lang.functional.lambda");(function(){var df=dojox.lang.functional,_141={};var _142="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _143=function(s){var args=[],_144=_142.call(s,/\s*->\s*/m);if(_144.length>1){while(_144.length){s=_144.pop();args=_144.pop().split(/\s*,\s*|\s+/m);if(_144.length){_144.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};dojo.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _145=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};dojo.mixin(df,{rawLambda:function(s){return _143(s);},buildLambda:function(s){s=_143(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _145(s);}if(s in _141){return _141[s];}s=_143(s);return _141[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_141={};}});})();}if(!dojo._hasResource["dojox.lang.functional.array"]){dojo._hasResource["dojox.lang.functional.array"]=true;dojo.provide("dojox.lang.functional.array");(function(){var d=dojo,df=dojox.lang.functional,_146={};d.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _146)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _146)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _146)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _146)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _146)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});})();}if(!dojo._hasResource["dojox.lang.functional.object"]){dojo._hasResource["dojox.lang.functional.object"]=true;dojo.provide("dojox.lang.functional.object");(function(){var d=dojo,df=dojox.lang.functional,_147={};d.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _147)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _147)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _147)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);for(var i in obj){if(!(i in _147)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||d.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _147)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});})();}if(!dojo._hasResource["dojox.lang.functional"]){dojo._hasResource["dojox.lang.functional"]=true;dojo.provide("dojox.lang.functional");}if(!dojo._hasResource["dojox.lang.functional.fold"]){dojo._hasResource["dojox.lang.functional.fold"]=true;dojo.provide("dojox.lang.functional.fold");(function(){var d=dojo,df=dojox.lang.functional,_148={};d.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var i,n;if(d.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _148)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var z,i,n;if(d.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _149=true;for(i in a){if(!(i in _148)){if(_149){z=a[i];_149=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||d.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.lang.functional.reversed"]){dojo._hasResource["dojox.lang.functional.reversed"]=true;dojo.provide("dojox.lang.functional.reversed");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});})();}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");(function(){var _14a=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(_14b,obj){var m=_14b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_14a(m1,m2,H+1/3)*256,_14a(m1,m2,H)*256,_14a(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _14c=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_14c(t.r,0,255));t.g=Math.round(_14c(t.g,0,255));t.b=Math.round(_14c(t.b,0,255));t.a=_14c(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dojox.color._base"]){dojo._hasResource["dojox.color._base"]=true;dojo.provide("dojox.color._base");dojox.color.Color=dojo.Color;dojox.color.blend=dojo.blendColors;dojox.color.fromRgb=dojo.colorFromRgb;dojox.color.fromHex=dojo.colorFromHex;dojox.color.fromArray=dojo.colorFromArray;dojox.color.fromString=dojo.colorFromString;dojox.color.greyscale=dojo.colors.makeGrey;dojo.mixin(dojox.color,{fromCmy:function(cyan,_14d,_14e){if(dojo.isArray(cyan)){_14d=cyan[1],_14e=cyan[2],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_14d=cyan.m,_14e=cyan.y,cyan=cyan.c;}}cyan/=100,_14d/=100,_14e/=100;var r=1-cyan,g=1-_14d,b=1-_14e;return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_14f,_150,_151){if(dojo.isArray(cyan)){_14f=cyan[1],_150=cyan[2],_151=cyan[3],cyan=cyan[0];}else{if(dojo.isObject(cyan)){_14f=cyan.m,_150=cyan.y,_151=cyan.b,cyan=cyan.c;}}cyan/=100,_14f/=100,_150/=100,_151/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_151)+_151);g=1-Math.min(1,_14f*(1-_151)+_151);b=1-Math.min(1,_150*(1-_151)+_151);return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_152,_153){if(dojo.isArray(hue)){_152=hue[1],_153=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_152=hue.s,_153=hue.l,hue=hue.h;}}_152/=100;_153/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_152*Math.min(r,1)+(1-_152);g=2*_152*Math.min(g,1)+(1-_152);b=2*_152*Math.min(b,1)+(1-_152);if(_153<0.5){r*=_153,g*=_153,b*=_153;}else{r=(1-_153)*r+2*_153-1;g=(1-_153)*g+2*_153-1;b=(1-_153)*b+2*_153-1;}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsv:function(hue,_154,_155){if(dojo.isArray(hue)){_154=hue[1],_155=hue[2],hue=hue[0];}else{if(dojo.isObject(hue)){_154=hue.s,_155=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_154/=100;_155/=100;var r,g,b;if(_154==0){r=_155,b=_155,g=_155;}else{var _156=hue/60,i=Math.floor(_156),f=_156-i;var p=_155*(1-_154);var q=_155*(1-(_154*f));var t=_155*(1-(_154*(1-f)));switch(i){case 0:r=_155,g=t,b=p;break;case 1:r=q,g=_155,b=p;break;case 2:r=p,g=_155,b=t;break;case 3:r=p,g=q,b=_155;break;case 4:r=t,g=p,b=_155;break;case 5:r=_155,g=p,b=q;break;}}return new dojox.color.Color({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});dojo.extend(dojox.color.Color,{toCmy:function(){var cyan=1-(this.r/255),_157=1-(this.g/255),_158=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_157*100),y:Math.round(_158*100)};},toCmyk:function(){var cyan,_159,_15a,_15b;var r=this.r/255,g=this.g/255,b=this.b/255;_15b=Math.min(1-r,1-g,1-b);cyan=(1-r-_15b)/(1-_15b);_159=(1-g-_15b)/(1-_15b);_15a=(1-b-_15b)/(1-_15b);return {c:Math.round(cyan*100),m:Math.round(_159*100),y:Math.round(_15a*100),b:Math.round(_15b*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _15c=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_15c/((l<0.5)?(2*l):(2-2*l));}if(_15c>0){if(max==r&&max!=g){h+=(g-b)/_15c;}if(max==g&&max!=b){h+=(2+(b-r)/_15c);}if(max==b&&max!=r){h+=(4+(r-g)/_15c);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _15d=max-min;var h=null,s=(max==0)?0:(_15d/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_15d;}else{if(g==max){h=120+60*(b-r)/_15d;}else{h=240+60*(r-g)/_15d;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});}if(!dojo._hasResource["dojox.color"]){dojo._hasResource["dojox.color"]=true;dojo.provide("dojox.color");}if(!dojo._hasResource["dojox.color.Palette"]){dojo._hasResource["dojox.color.Palette"]=true;dojo.provide("dojox.color.Palette");(function(){var dxc=dojox.color;dxc.Palette=function(base){this.colors=[];if(base instanceof dojox.color.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dojox.color.Color){this.colors=[null,null,base,null,null];}else{if(dojo.isArray(base)){this.colors=dojo.map(base.slice(0),function(item){if(dojo.isString(item)){return new dojox.color.Color(item);}return item;});}else{if(dojo.isString(base)){this.colors=[null,null,new dojox.color.Color(base),null,null];}}}}};function _15e(p,_15f,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var r=(_15f=="dr")?item.r+val:item.r,g=(_15f=="dg")?item.g+val:item.g,b=(_15f=="db")?item.b+val:item.b,a=(_15f=="da")?item.a+val:item.a;ret.colors.push(new dojox.color.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});console.log("The return colors are ",ret.colors," from the original colors ",p.colors);return ret;};function tCMY(p,_160,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmy(),c=(_160=="dc")?o.c+val:o.c,m=(_160=="dm")?o.m+val:o.m,y=(_160=="dy")?o.y+val:o.y;ret.colors.push(dojox.color.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _161(p,_162,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_162=="dc")?o.c+val:o.c,m=(_162=="dm")?o.m+val:o.m,y=(_162=="dy")?o.y+val:o.y,k=(_162=="dk")?o.b+val:o.b;ret.colors.push(dojox.color.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_163,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsl(),h=(_163=="dh")?o.h+val:o.h,s=(_163=="ds")?o.s+val:o.s,l=(_163=="dl")?o.l+val:o.l;ret.colors.push(dojox.color.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_164,val){var ret=new dojox.color.Palette();ret.colors=[];dojo.forEach(p.colors,function(item){var o=item.toHsv(),h=(_164=="dh")?o.h+val:o.h,s=(_164=="ds")?o.s+val:o.s,v=(_164=="dv")?o.v+val:o.v;ret.colors.push(dojox.color.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _165(val,low,high){return high-((high-val)*((high-low)/high));};dojo.extend(dxc.Palette,{transform:function(_166){var fn=_15e;if(_166.use){var use=_166.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_161;}else{fn=tCMY;}}}}else{if("dc" in _166||"dm" in _166||"dy" in _166){if("dk" in _166){fn=_161;}else{fn=tCMY;}}else{if("dh" in _166||"ds" in _166){if("dv" in _166){fn=tHSV;}else{fn=tHSL;}}}}var _167=this;for(var p in _166){if(p=="use"){continue;}_167=fn(_167,p,_166[p]);}return _167;},clone:function(){return new dxc.Palette(this);}});dojo.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(dojo.map(h,function(hue,i){return dojox.color.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_165(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v3),base,dojox.color.fromHsv(hsv.h,s1,v3),dojox.color.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,hsv.v),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h2,s2,v1),dojox.color.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_165(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(hsv.h,s1,v1),dojox.color.fromHsv(hsv.h,s2,v2),base,dojox.color.fromHsv(h1,s3,v2),dojox.color.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,_168=args.da||30,hsv=base.toHsv();var _169=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_169-_168+360)%360,h2=(_169+_168)%360,s1=Math.max(hsv.s-10,0),s2=_165(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v2),dojox.color.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dojox.color.fromHsv(h1,s1,v1),dojox.color.fromHsv(h1,s2,v2),base,dojox.color.fromHsv(h2,s3,v3),dojox.color.fromHsv(h3,s2,v2)]);},shades:function(args){var base=dojo.isString(args.base)?new dojox.color.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dojox.color.fromHsv(hsv.h,s,v1),new dojox.color.fromHsv(hsv.h,s,v2),base,new dojox.color.fromHsv(hsv.h,s,v3),new dojox.color.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(dojo.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});})();}if(!dojo._hasResource["dojox.charting.Theme"]){dojo._hasResource["dojox.charting.Theme"]=true;dojo.provide("dojox.charting.Theme");(function(){var dxc=dojox.charting;dxc.Theme=function(_16a){_16a=_16a||{};var def=dxc.Theme._def;dojo.forEach(["chart","plotarea","axis","series","marker"],function(n){this[n]=dojo.delegate(def[n],_16a[n]||{});},this);this.markers=dojo.delegate(dxc.Theme.Markers,_16a.markers||{});this.colors=[];this.antiAlias=("antiAlias" in _16a)?_16a.antiAlias:true;this.assignColors=("assignColors" in _16a)?_16a.assignColors:true;this.assignMarkers=("assignMarkers" in _16a)?_16a.assignMarkers:true;_16a.colors=_16a.colors||def.colors;dojo.forEach(_16a.colors,function(item){this.colors.push(item);},this);this._current={color:0,marker:0};this._markers=[];this._buildMarkerArray();};dxc.Theme.Markers={CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"};dxc.Theme._def={chart:{stroke:null,fill:"white"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},majorTick:{color:"#666",width:1,length:6,position:"center"},minorTick:{color:"#666",width:0.8,length:3,position:"center"},microTick:{color:"#666",width:0.5,length:1,position:"center"},font:"normal normal normal 7pt Tahoma",fontColor:"#333"},series:{outline:{width:0.1,color:"#ccc"},stroke:{width:1.5,color:"#333"},fill:"#ccc",font:"normal normal normal 7pt Tahoma",fontColor:"#000"},marker:{stroke:{width:1},fill:"#333",font:"normal normal normal 7pt Tahoma",fontColor:"#000"},colors:["#54544c","#858e94","#6e767a","#948585","#474747"]};dojo.extend(dxc.Theme,{defineColors:function(obj){var _16b=obj||{};var c=[],n=_16b.num||5;if(_16b.colors){var l=_16b.colors.length;for(var i=0;i<n;i++){c.push(_16b.colors[i%l]);}this.colors=c;}else{if(_16b.hue){var s=_16b.saturation||100;var st=_16b.low||30;var end=_16b.high||90;var l=(end+st)/2;this.colors=dojox.color.Palette.generate(dojox.color.fromHsv(_16b.hue,s,l),"monochromatic").colors;}else{if(_16b.generator){this.colors=dojox.color.Palette.generate(_16b.base,_16b.generator).colors;}}}},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}this._current.marker=0;},_clone:function(){return new dxc.Theme({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,antiAlias:this.antiAlias,assignColors:this.assignColors,assignMarkers:this.assigneMarkers,colors:dojo.delegate(this.colors)});},addMarker:function(name,_16c){this.markers[name]=_16c;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},next:function(type){if(type=="marker"){return this._markers[this._current.marker++%this._markers.length];}else{return this.colors[this._current.color++%this.colors.length];}},clear:function(){this._current={color:0,marker:0};}});})();}if(!dojo._hasResource["dojox.charting.Element"]){dojo._hasResource["dojox.charting.Element"]=true;dojo.provide("dojox.charting.Element");dojo.declare("dojox.charting.Element",null,{constructor:function(_16d){this.chart=_16d;this.group=null;this.htmlElements=[];this.dirty=true;},createGroup:function(_16e){if(!_16e){_16e=this.chart.surface;}if(!this.group){this.group=_16e.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;return this;},cleanGroup:function(_16f){this.destroyHtmlElements();if(!_16f){_16f=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_16f.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){dojo.forEach(this.htmlElements,dojo.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();}});}if(!dojo._hasResource["dojox.charting.Series"]){dojo._hasResource["dojox.charting.Series"]=true;dojo.provide("dojox.charting.Series");dojo.declare("dojox.charting.Series",dojox.charting.Element,{constructor:function(_170,data,_171){dojo.mixin(this,_171);if(typeof this.plot!="string"){this.plot="default";}this.data=data;this.dirty=true;this.clear();},clear:function(){this.dyn={};}});}if(!dojo._hasResource["dojox.charting.scaler.common"]){dojo._hasResource["dojox.charting.scaler.common"]=true;dojo.provide("dojox.charting.scaler.common");(function(){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};dojo.mixin(dojox.charting.scaler.common,{findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_172,_173,_174){var def=_174.fixed?_172.toFixed(_173<0?-_173:0):_172.toString();if(_174.labelFunc){var r=_174.labelFunc(def,_172,_173);if(r){return r;}}if(_174.labels){var l=_174.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_172){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_172)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_172)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_172)){return l[lo].text;}}return def;}});})();}if(!dojo._hasResource["dojox.charting.scaler.linear"]){dojo._hasResource["dojox.charting.scaler.linear"]=true;dojo.provide("dojox.charting.scaler.linear");(function(){var _175=3,dc=dojox.charting,dcs=dc.scaler,dcsc=dcs.common,_176=dcsc.findString,_177=dcsc.getNumericLabel;var _178=function(min,max,_179,_17a,_17b,_17c,span){_179=dojo.delegate(_179);if(!_17a){if(_179.fixUpper=="major"){_179.fixUpper="minor";}if(_179.fixLower=="major"){_179.fixLower="minor";}}if(!_17b){if(_179.fixUpper=="minor"){_179.fixUpper="micro";}if(_179.fixLower=="minor"){_179.fixLower="micro";}}if(!_17c){if(_179.fixUpper=="micro"){_179.fixUpper="none";}if(_179.fixLower=="micro"){_179.fixLower="none";}}var _17d=_176(_179.fixLower,["major"])?Math.floor(_179.min/_17a)*_17a:_176(_179.fixLower,["minor"])?Math.floor(_179.min/_17b)*_17b:_176(_179.fixLower,["micro"])?Math.floor(_179.min/_17c)*_17c:_179.min,_17e=_176(_179.fixUpper,["major"])?Math.ceil(_179.max/_17a)*_17a:_176(_179.fixUpper,["minor"])?Math.ceil(_179.max/_17b)*_17b:_176(_179.fixUpper,["micro"])?Math.ceil(_179.max/_17c)*_17c:_179.max;if(_179.useMin){min=_17d;}if(_179.useMax){max=_17e;}var _17f=(!_17a||_179.useMin&&_176(_179.fixLower,["major"]))?min:Math.ceil(min/_17a)*_17a,_180=(!_17b||_179.useMin&&_176(_179.fixLower,["major","minor"]))?min:Math.ceil(min/_17b)*_17b,_181=(!_17c||_179.useMin&&_176(_179.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_17c)*_17c,_182=!_17a?0:(_179.useMax&&_176(_179.fixUpper,["major"])?Math.round((max-_17f)/_17a):Math.floor((max-_17f)/_17a))+1,_183=!_17b?0:(_179.useMax&&_176(_179.fixUpper,["major","minor"])?Math.round((max-_180)/_17b):Math.floor((max-_180)/_17b))+1,_184=!_17c?0:(_179.useMax&&_176(_179.fixUpper,["major","minor","micro"])?Math.round((max-_181)/_17c):Math.floor((max-_181)/_17c))+1,_185=_17b?Math.round(_17a/_17b):0,_186=_17c?Math.round(_17b/_17c):0,_187=_17a?Math.floor(Math.log(_17a)/Math.LN10):0,_188=_17b?Math.floor(Math.log(_17b)/Math.LN10):0,_189=span/(max-min);if(!isFinite(_189)){_189=1;}return {bounds:{lower:_17d,upper:_17e,from:min,to:max,scale:_189,span:span},major:{tick:_17a,start:_17f,count:_182,prec:_187},minor:{tick:_17b,start:_180,count:_183,prec:_188},micro:{tick:_17c,start:_181,count:_184,prec:0},minorPerMajor:_185,microPerMinor:_186,scaler:dcs.linear};};dojo.mixin(dojox.charting.scaler.linear,{buildScaler:function(min,max,span,_18a){var h={fixUpper:"none",fixLower:"none",natural:false};if(_18a){if("fixUpper" in _18a){h.fixUpper=String(_18a.fixUpper);}if("fixLower" in _18a){h.fixLower=String(_18a.fixLower);}if("natural" in _18a){h.natural=Boolean(_18a.natural);}}if("min" in _18a){min=_18a.min;}if("max" in _18a){max=_18a.max;}if(_18a.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _18a){min=_18a.from;h.useMin=false;}if("to" in _18a){max=_18a.to;h.useMax=false;}if(max<=min){return _178(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_18b=_18a&&("majorTickStep" in _18a)?_18a.majorTickStep:Math.pow(10,mag),_18c=0,_18d=0,_18e;if(_18a&&("minorTickStep" in _18a)){_18c=_18a.minorTickStep;}else{do{_18c=_18b/10;if(!h.natural||_18c>0.9){_18e=_178(min,max,h,_18b,_18c,0,span);if(_18e.bounds.scale*_18e.minor.tick>_175){break;}}_18c=_18b/5;if(!h.natural||_18c>0.9){_18e=_178(min,max,h,_18b,_18c,0,span);if(_18e.bounds.scale*_18e.minor.tick>_175){break;}}_18c=_18b/2;if(!h.natural||_18c>0.9){_18e=_178(min,max,h,_18b,_18c,0,span);if(_18e.bounds.scale*_18e.minor.tick>_175){break;}}return _178(min,max,h,_18b,0,0,span);}while(false);}if(_18a&&("microTickStep" in _18a)){_18d=_18a.microTickStep;_18e=_178(min,max,h,_18b,_18c,_18d,span);}else{do{_18d=_18c/10;if(!h.natural||_18d>0.9){_18e=_178(min,max,h,_18b,_18c,_18d,span);if(_18e.bounds.scale*_18e.micro.tick>_175){break;}}_18d=_18c/5;if(!h.natural||_18d>0.9){_18e=_178(min,max,h,_18b,_18c,_18d,span);if(_18e.bounds.scale*_18e.micro.tick>_175){break;}}_18d=_18c/2;if(!h.natural||_18d>0.9){_18e=_178(min,max,h,_18b,_18c,_18d,span);if(_18e.bounds.scale*_18e.micro.tick>_175){break;}}_18d=0;}while(false);}return _18d?_18e:_178(min,max,h,_18b,_18c,0,span);},buildTicks:function(_18f,_190){var step,next,tick,_191=_18f.major.start,_192=_18f.minor.start,_193=_18f.micro.start;if(_190.microTicks&&_18f.micro.tick){step=_18f.micro.tick,next=_193;}else{if(_190.minorTicks&&_18f.minor.tick){step=_18f.minor.tick,next=_192;}else{if(_18f.major.tick){step=_18f.major.tick,next=_191;}else{return null;}}}var _194=1/_18f.bounds.scale;if(_18f.bounds.to<=_18f.bounds.from||isNaN(_194)||!isFinite(_194)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _195=[],_196=[],_197=[];while(next<=_18f.bounds.to+_194){if(Math.abs(_191-next)<step/2){tick={value:_191};if(_190.majorLabels){tick.label=_177(_191,_18f.major.prec,_190);}_195.push(tick);_191+=_18f.major.tick;_192+=_18f.minor.tick;_193+=_18f.micro.tick;}else{if(Math.abs(_192-next)<step/2){if(_190.minorTicks){tick={value:_192};if(_190.minorLabels&&(_18f.minMinorStep<=_18f.minor.tick*_18f.bounds.scale)){tick.label=_177(_192,_18f.minor.prec,_190);}_196.push(tick);}_192+=_18f.minor.tick;_193+=_18f.micro.tick;}else{if(_190.microTicks){_197.push({value:_193});}_193+=_18f.micro.tick;}}next+=step;}return {major:_195,minor:_196,micro:_197};},getTransformerFromModel:function(_198){var _199=_198.bounds.from,_19a=_198.bounds.scale;return function(x){return (x-_199)*_19a;};},getTransformerFromPlot:function(_19b){var _19c=_19b.bounds.from,_19d=_19b.bounds.scale;return function(x){return x/_19d+_19c;};}});})();}if(!dojo._hasResource["dojox.charting.axis2d.common"]){dojo._hasResource["dojox.charting.axis2d.common"]=true;dojo.provide("dojox.charting.axis2d.common");(function(){var g=dojox.gfx;var _19e=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _19f=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return dojo.marginBox(n).w;}};dojo.mixin(dojox.charting.axis2d.common,{createText:{gfx:function(_1a0,_1a1,x,y,_1a2,text,font,_1a3){return _1a1.createText({x:x,y:y,text:text,align:_1a2}).setFont(font).setFill(_1a3);},html:function(_1a4,_1a5,x,y,_1a6,text,font,_1a7,_1a8){var p=dojo.doc.createElement("div"),s=p.style,_1a9;_19e(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_1a7;s.position="absolute";s.left="-10000px";dojo.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_1a8){_1a9=_19f(p);}dojo.body().removeChild(p);s.position="relative";if(_1a8){s.width=_1a8+"px";switch(_1a6){case "middle":s.textAlign="center";s.left=(x-_1a8/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_1a8)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_1a6){case "middle":s.left=Math.floor(x-_1a9/2)+"px";break;case "end":s.left=Math.floor(x-_1a9)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";var wrap=dojo.doc.createElement("div"),w=wrap.style;_19e(w);w.width="0px";w.height="0px";wrap.appendChild(p);_1a4.node.insertBefore(wrap,_1a4.node.firstChild);return wrap;}}});})();}if(!dojo._hasResource["dojox.charting.axis2d.Base"]){dojo._hasResource["dojox.charting.axis2d.Base"]=true;dojo.provide("dojox.charting.axis2d.Base");dojo.declare("dojox.charting.axis2d.Base",dojox.charting.Element,{constructor:function(_1aa,_1ab){this.vertical=_1ab&&_1ab.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_1ac){return this;}});}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_1ad,map,_1ae,_1af){_1af=_1af||dojo.global;_1ae=_1ae?dojo.hitch(_1af,_1ae):function(v){return v;};return _1ad.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_1b0,key,_1b1){var _1b2=dojo.getObject(key,false,map);if(_1b1){_1b2=dojo.getObject(_1b1,false,_1af).call(_1af,_1b2,key);}return _1ae(_1b2,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojox.lang.utils"]){dojo._hasResource["dojox.lang.utils"]=true;dojo.provide("dojox.lang.utils");(function(){var _1b3={},du=dojox.lang.utils;var _1b4=function(o){if(dojo.isArray(o)){return dojo._toArray(o);}if(!dojo.isObject(o)||dojo.isFunction(o)){return o;}return dojo.delegate(o);};dojo.mixin(du,{coerceType:function(_1b5,_1b6){switch(typeof _1b5){case "number":return Number(eval("("+_1b6+")"));case "string":return String(_1b6);case "boolean":return Boolean(eval("("+_1b6+")"));}return eval("("+_1b6+")");},updateWithObject:function(_1b7,_1b8,conv){if(!_1b8){return _1b7;}for(var x in _1b7){if(x in _1b8&&!(x in _1b3)){var t=_1b7[x];if(t&&typeof t=="object"){du.updateWithObject(t,_1b8[x],conv);}else{_1b7[x]=conv?du.coerceType(t,_1b8[x]):_1b4(_1b8[x]);}}}return _1b7;},updateWithPattern:function(_1b9,_1ba,_1bb,conv){if(!_1ba||!_1bb){return _1b9;}for(var x in _1bb){if(x in _1ba&&!(x in _1b3)){_1b9[x]=conv?du.coerceType(_1bb[x],_1ba[x]):_1b4(_1ba[x]);}}return _1b9;}});})();}if(!dojo._hasResource["dojox.charting.axis2d.Default"]){dojo._hasResource["dojox.charting.axis2d.Default"]=true;dojo.provide("dojox.charting.axis2d.Default");(function(){var dc=dojox.charting,df=dojox.lang.functional,du=dojox.lang.utils,g=dojox.gfx,lin=dc.scaler.linear,_1bc=4;dojo.declare("dojox.charting.axis2d.Default",dojox.charting.axis2d.Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,htmlLabels:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,stroke:{},majorTick:{},minorTick:{},microTick:{},font:"",fontColor:""},constructor:function(_1bd,_1be){this.opt=dojo.delegate(this.defaultParams,_1be);du.updateWithPattern(this.opt,_1be,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_1bf,_1c0){this.scale=_1bf;this.offset=_1c0;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_1c1,font){if(_1c1[0]["text"]){_1c1=df.map(_1c1,function(_1c2){return _1c2.text;});}var s=_1c1.join("<br>");return dojox.gfx._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_1c3){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_1c3;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var _1c4=0,ta=this.chart.theme.axis,_1c5="font" in o?o.font:ta.font,size=_1c5?g.normalizedLength(g.splitFontString(_1c5).size):0;if(this.vertical){if(size){_1c4=size+_1bc;}}else{if(size){var _1c6,i;if(o.labelFunc&&o.maxLabelSize){_1c6=o.maxLabelSize;}else{if(this.labels){_1c6=this._groupLabelWidth(this.labels,_1c5);}else{var _1c7=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(dojo.string.rep("9",_1c7));var _1c8=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_1c8>0){t.push(".");for(i=0;i<_1c8;++i){t.push("9");}}_1c6=dojox.gfx._base._getTextBox(t.join(""),{font:_1c5}).w;}}_1c4=_1c6+_1bc;}}this.scaler.minMinorStep=_1c4;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;},getOffsets:function(){var o=this.opt;var _1c9={l:0,r:0,t:0,b:0},_1ca,a,b,c,d,gl=dc.scaler.common.getNumericLabel,_1cb=0,ta=this.chart.theme.axis,_1cc="font" in o?o.font:ta.font,_1cd="majorTick" in o?o.majorTick:ta.majorTick,_1ce="minorTick" in o?o.minorTick:ta.minorTick,size=_1cc?g.normalizedLength(g.splitFontString(_1cc).size):0,s=this.scaler;if(!s){return _1c9;}var ma=s.major,mi=s.minor;if(this.vertical){if(size){if(o.labelFunc&&o.maxLabelSize){_1ca=o.maxLabelSize;}else{if(this.labels){_1ca=this._groupLabelWidth(this.labels,_1cc);}else{_1ca=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_1cc);}}_1cb=_1ca+_1bc;}_1cb+=_1bc+Math.max(_1cd.length,_1ce.length);_1c9[o.leftBottom?"l":"r"]=_1cb;_1c9.t=_1c9.b=size/2;}else{if(size){_1cb=size+_1bc;}_1cb+=_1bc+Math.max(_1cd.length,_1ce.length);_1c9[o.leftBottom?"b":"t"]=_1cb;if(size){if(o.labelFunc&&o.maxLabelSize){_1ca=o.maxLabelSize;}else{if(this.labels){_1ca=this._groupLabelWidth(this.labels,_1cc);}else{_1ca=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_1cc);}}_1c9.l=_1c9.r=_1ca/2;}}if(_1ca){this._cachedLabelWidth=_1ca;}return _1c9;},render:function(dim,_1cf){if(!this.dirty){return this;}var o=this.opt;var _1d0,stop,_1d1,_1d2,_1d3,_1d4,ta=this.chart.theme.axis,_1d5="stroke" in o?o.stroke:ta.stroke,_1d6="majorTick" in o?o.majorTick:ta.majorTick,_1d7="minorTick" in o?o.minorTick:ta.minorTick,_1d8="microTick" in o?o.microTick:ta.minorTick,_1d9="font" in o?o.font:ta.font,_1da="fontColor" in o?o.fontColor:ta.fontColor,_1db=Math.max(_1d6.length,_1d7.length),size=_1d9?g.normalizedLength(g.splitFontString(_1d9).size):0;if(this.vertical){_1d0={y:dim.height-_1cf.b};stop={y:_1cf.t};_1d1={x:0,y:-1};if(o.leftBottom){_1d0.x=stop.x=_1cf.l;_1d2={x:-1,y:0};_1d4="end";}else{_1d0.x=stop.x=dim.width-_1cf.r;_1d2={x:1,y:0};_1d4="start";}_1d3={x:_1d2.x*(_1db+_1bc),y:size*0.4};}else{_1d0={x:_1cf.l};stop={x:dim.width-_1cf.r};_1d1={x:1,y:0};_1d4="middle";if(o.leftBottom){_1d0.y=stop.y=dim.height-_1cf.b;_1d2={x:0,y:1};_1d3={y:_1db+_1bc+size};}else{_1d0.y=stop.y=_1cf.t;_1d2={x:0,y:-1};_1d3={y:-_1db-_1bc};}_1d3.x=0;}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_1dc,f=lin.getTransformerFromModel(this.scaler),_1dd=(dojox.gfx.renderer=="canvas"),_1de=_1dd||this.opt.htmlLabels&&!dojo.isIE&&!dojo.isOpera?"html":"gfx",dx=_1d2.x*_1d6.length,dy=_1d2.y*_1d6.length;s.createLine({x1:_1d0.x,y1:_1d0.y,x2:stop.x,y2:stop.y}).setStroke(_1d5);dojo.forEach(t.major,function(tick){var _1df=f(tick.value),elem,x=_1d0.x+_1d1.x*_1df,y=_1d0.y+_1d1.y*_1df;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_1d6);if(tick.label){elem=dc.axis2d.common.createText[_1de](this.chart,s,x+_1d3.x,y+_1d3.y,_1d4,tick.label,_1d9,_1da,this._cachedLabelWidth);if(_1de=="html"){this.htmlElements.push(elem);}}},this);dx=_1d2.x*_1d7.length;dy=_1d2.y*_1d7.length;_1dc=c.minMinorStep<=c.minor.tick*c.bounds.scale;dojo.forEach(t.minor,function(tick){var _1e0=f(tick.value),elem,x=_1d0.x+_1d1.x*_1e0,y=_1d0.y+_1d1.y*_1e0;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_1d7);if(_1dc&&tick.label){elem=dc.axis2d.common.createText[_1de](this.chart,s,x+_1d3.x,y+_1d3.y,_1d4,tick.label,_1d9,_1da,this._cachedLabelWidth);if(_1de=="html"){this.htmlElements.push(elem);}}},this);dx=_1d2.x*_1d8.length;dy=_1d2.y*_1d8.length;dojo.forEach(t.micro,function(tick){var _1e1=f(tick.value),elem,x=_1d0.x+_1d1.x*_1e1,y=_1d0.y+_1d1.y*_1e1;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_1d8);},this);}catch(e){}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.common"]){dojo._hasResource["dojox.charting.plot2d.common"]=true;dojo.provide("dojox.charting.plot2d.common");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common;dojo.mixin(dojox.charting.plot2d.common,{makeStroke:function(_1e2){if(!_1e2){return _1e2;}if(typeof _1e2=="string"||_1e2 instanceof dojo.Color){_1e2={color:_1e2};}return dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_1e2);},augmentColor:function(_1e3,_1e4){var t=new dojo.Color(_1e3),c=new dojo.Color(_1e4);c.a=t.a;return c;},augmentStroke:function(_1e5,_1e6){var s=dc.makeStroke(_1e5);if(s){s.color=dc.augmentColor(s.color,_1e6);}return s;},augmentFill:function(fill,_1e7){var fc,c=new dojo.Color(_1e7);if(typeof fill=="string"||fill instanceof dojo.Color){return dc.augmentColor(fill,_1e7);}return fill;},defaultStats:{hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY,vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_1e8){var _1e9=dojo.clone(dc.defaultStats);for(var i=0;i<_1e8.length;++i){var run=_1e8[i];if(!run.data.length){continue;}if(typeof run.data[0]=="number"){var _1ea=_1e9.vmin,_1eb=_1e9.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){var x=i+1,y=val;if(isNaN(y)){y=0;}_1e9.hmin=Math.min(_1e9.hmin,x);_1e9.hmax=Math.max(_1e9.hmax,x);_1e9.vmin=Math.min(_1e9.vmin,y);_1e9.vmax=Math.max(_1e9.vmax,y);});}if("ymin" in run){_1e9.vmin=Math.min(_1ea,run.ymin);}if("ymax" in run){_1e9.vmax=Math.max(_1eb,run.ymax);}}else{var _1ec=_1e9.hmin,_1ed=_1e9.hmax,_1ea=_1e9.vmin,_1eb=_1e9.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,i){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_1e9.hmin=Math.min(_1e9.hmin,x);_1e9.hmax=Math.max(_1e9.hmax,x);_1e9.vmin=Math.min(_1e9.vmin,y);_1e9.vmax=Math.max(_1e9.vmax,y);});}if("xmin" in run){_1e9.hmin=Math.min(_1ec,run.xmin);}if("xmax" in run){_1e9.hmax=Math.max(_1ed,run.xmax);}if("ymin" in run){_1e9.vmin=Math.min(_1ea,run.ymin);}if("ymax" in run){_1e9.vmax=Math.max(_1eb,run.ymax);}}}return _1e9;},calculateBarSize:function(_1ee,opt,_1ef){if(!_1ef){_1ef=1;}var gap=opt.gap,size=(_1ee-2*gap)/_1ef;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_1ee-size*_1ef)/2;return {size:size,gap:gap};},collectStackedStats:function(_1f0){var _1f1=dojo.clone(dc.defaultStats);if(_1f0.length){_1f1.hmin=Math.min(_1f1.hmin,1);_1f1.hmax=df.foldl(_1f0,"seed, run -> Math.max(seed, run.data.length)",_1f1.hmax);for(var i=0;i<_1f1.hmax;++i){var v=_1f0[0].data[i];if(isNaN(v)){v=0;}_1f1.vmin=Math.min(_1f1.vmin,v);for(var j=1;j<_1f0.length;++j){var t=_1f0[j].data[i];if(isNaN(t)){t=0;}v+=t;}_1f1.vmax=Math.max(_1f1.vmax,v);}}return _1f1;},curve:function(a,_1f2){var arr=a.slice(0);if(_1f2=="x"){arr[arr.length]=arr[0];}var p=dojo.map(arr,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_1f2)){var dx=item.x-arr[i-1].x,dy=arr[i-1].y;return "C"+(item.x-(_1f2-1)*(dx/_1f2))+","+dy+" "+(item.x-(dx/_1f2))+","+item.y+" "+item.x+","+item.y;}else{if(_1f2=="X"||_1f2=="x"||_1f2=="S"){var p0,p1=arr[i-1],p2=arr[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_1f2=="x"){p0=arr[arr.length-2];}else{p0=p1;}f=1/3;}else{p0=arr[i-2];}if(i==(arr.length-1)){if(_1f2=="x"){p3=arr[1];}else{p3=p2;}f=1/3;}else{p3=arr[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _1f3=p0p2*f;var _1f4=p1p3*f;if(_1f3>p1p2/2&&_1f4>p1p2/2){_1f3=p1p2/2;_1f4=p1p2/2;}else{if(_1f3>p1p2/2){_1f3=p1p2/2;_1f4=p1p2/2*p1p3/p0p2;}else{if(_1f4>p1p2/2){_1f4=p1p2/2;_1f3=p1p2/2*p0p2/p1p3;}}}if(_1f2=="S"){if(p0==p1){_1f3=0;}if(p2==p3){_1f4=0;}}bz1x=p1.x+_1f3*(p2.x-p0.x)/p0p2;bz1y=p1.y+_1f3*(p2.y-p0.y)/p0p2;bz2x=p2.x-_1f4*(p3.x-p1.x)/p1p3;bz2y=p2.y-_1f4*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");}});})();}if(!dojo._hasResource["dojox.charting.scaler.primitive"]){dojo._hasResource["dojox.charting.scaler.primitive"]=true;dojo.provide("dojox.charting.scaler.primitive");dojox.charting.scaler.primitive={buildScaler:function(min,max,span,_1f5){return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:dojox.charting.scaler.primitive};},buildTicks:function(_1f6,_1f7){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_1f8){var _1f9=_1f8.bounds.from,_1fa=_1f8.bounds.scale;return function(x){return (x-_1f9)*_1fa;};},getTransformerFromPlot:function(_1fb){var _1fc=_1fb.bounds.from,_1fd=_1fb.bounds.scale;return function(x){return x/_1fd+_1fc;};}};}if(!dojo._hasResource["dojox.charting.plot2d.Base"]){dojo._hasResource["dojox.charting.plot2d.Base"]=true;dojo.provide("dojox.charting.plot2d.Base");dojo.declare("dojox.charting.plot2d.Base",dojox.charting.Element,{destroy:function(){this.resetEvents();this.inherited(arguments);},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){this.series.push(run);return this;},calculateAxes:function(dim){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},render:function(dim,_1fe){return this;},getRequiredColors:function(){return this.series.length;},plotEvent:function(o){},connect:function(_1ff,_200){this.dirty=true;return dojo.connect(this,"plotEvent",_1ff,_200);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){this.plotEvent({type:"onplotreset",plot:this});},_calc:function(dim,_201){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_201.hmin,_201.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=dojox.charting.scaler.primitive.buildScaler(_201.hmin,_201.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_201.vmin,_201.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=dojox.charting.scaler.primitive.buildScaler(_201.vmin,_201.vmax,dim.height);}},_connectEvents:function(_202,o){_202.connect("onmouseover",this,function(e){o.type="onmouseover";o.event=e;this.plotEvent(o);});_202.connect("onmouseout",this,function(e){o.type="onmouseout";o.event=e;this.plotEvent(o);});_202.connect("onclick",this,function(e){o.type="onclick";o.event=e;this.plotEvent(o);});}});}if(!dojo._hasResource["dojox.charting.plot2d.Default"]){dojo._hasResource["dojox.charting.plot2d.Default"]=true;dojo.provide("dojox.charting.plot2d.Default");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_203=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Default",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,shadows:0,tension:0},optionalParams:{},constructor:function(_204,_205){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_205);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){this._calc(dim,dc.collectSimpleStats(this.series));return this;},render:function(dim,_206){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_203);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_207,_208,_209,_20a,_20b=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}var s=run.group,_20c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_20c=dojo.map(run.data,function(v,i){return {x:ht(i+1)+_206.l,y:dim.height-_206.b-vt(v)};},this);}else{_20c=dojo.map(run.data,function(v,i){return {x:ht(v.x)+_206.l,y:dim.height-_206.b-vt(v.y)};},this);}if(!run.fill||!run.stroke){_209=run.dyn.color=new dojo.Color(t.next("color"));}var _20d=this.opt.tension?dc.curve(_20c,this.opt.tension):"";if(this.opt.areas){var fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_209);var _20e=dojo.clone(_20c);if(this.opt.tension){var _20f="L"+_20e[_20e.length-1].x+","+(dim.height-_206.b)+" L"+_20e[0].x+","+(dim.height-_206.b)+" L"+_20e[0].x+","+_20e[0].y;run.dyn.fill=s.createPath(_20d+" "+_20f).setFill(fill).getFill();}else{_20e.push({x:_20c[_20c.length-1].x,y:dim.height-_206.b});_20e.push({x:_20c[0].x,y:dim.height-_206.b});_20e.push(_20c[0]);run.dyn.fill=s.createPolyline(_20e).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_207=run.dyn.stroke=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,_209);if(run.outline||t.series.outline){_208=run.dyn.outline=dc.makeStroke(run.outline?run.outline:t.series.outline);_208.width=2*_208.width+_207.width;}}if(this.opt.markers){_20a=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _210=null,_211=null,_212=null;if(this.opt.shadows&&_207){var sh=this.opt.shadows,_213=new dojo.Color([0,0,0,0.3]),_214=dojo.map(_20c,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_215=dojo.clone(_208?_208:_207);_215.color=_213;_215.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_214,this.opt.tension)).setStroke(_215).getStroke();}else{run.dyn.shadow=s.createPolyline(_214).setStroke(_215).getStroke();}}if(this.opt.markers){_212=dojo.map(_214,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_20a).setStroke(_215).setFill(_213);},this);}}if(this.opt.lines){if(_208){if(this.opt.tension){run.dyn.outline=s.createPath(_20d).setStroke(_208).getStroke();}else{run.dyn.outline=s.createPolyline(_20c).setStroke(_208).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_20d).setStroke(_207).getStroke();}else{run.dyn.stroke=s.createPolyline(_20c).setStroke(_207).getStroke();}}if(this.opt.markers){_210=new Array(_20c.length);_211=new Array(_20c.length);dojo.forEach(_20c,function(c,i){var path="M"+c.x+" "+c.y+" "+_20a;if(_208){_211[i]=s.createPath(path).setStroke(_208);}_210[i]=s.createPath(path).setStroke(_207).setFill(_207.color);},this);if(_20b){dojo.forEach(_210,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_211[i]||null,shadow:_212&&_212[i]||null,cx:_20c[i].x,cy:_20c[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(s,o);},this);}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Lines"]){dojo._hasResource["dojox.charting.plot2d.Lines"]=true;dojo.provide("dojox.charting.plot2d.Lines");dojo.declare("dojox.charting.plot2d.Lines",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Areas"]){dojo._hasResource["dojox.charting.plot2d.Areas"]=true;dojo.provide("dojox.charting.plot2d.Areas");dojo.declare("dojox.charting.plot2d.Areas",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Markers"]){dojo._hasResource["dojox.charting.plot2d.Markers"]=true;dojo.provide("dojox.charting.plot2d.Markers");dojo.declare("dojox.charting.plot2d.Markers",dojox.charting.plot2d.Default,{constructor:function(){this.opt.markers=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]){dojo._hasResource["dojox.charting.plot2d.MarkersOnly"]=true;dojo.provide("dojox.charting.plot2d.MarkersOnly");dojo.declare("dojox.charting.plot2d.MarkersOnly",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Scatter"]){dojo._hasResource["dojox.charting.plot2d.Scatter"]=true;dojo.provide("dojox.charting.plot2d.Scatter");dojo.declare("dojox.charting.plot2d.Scatter",dojox.charting.plot2d.Default,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});}if(!dojo._hasResource["dojox.lang.functional.sequence"]){dojo._hasResource["dojox.lang.functional.sequence"]=true;dojo.provide("dojox.lang.functional.sequence");(function(){var d=dojo,df=dojox.lang.functional;d.mixin(df,{repeat:function(n,f,z,o){o=o||d.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||d.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Stacked"]){dojo._hasResource["dojox.charting.plot2d.Stacked"]=true;dojo.provide("dojox.charting.plot2d.Stacked");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_216=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Stacked",dojox.charting.plot2d.Default,{calculateAxes:function(dim){var _217=dc.collectStackedStats(this.series);this._maxRunLength=_217.hmax;this._calc(dim,_217);return this;},render:function(dim,_218){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_216);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_219,_21a,_21b,_21c,_21d=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group,_21e=dojo.map(acc,function(v,i){return {x:ht(i+1)+_218.l,y:dim.height-_218.b-vt(v)};},this);if(!run.fill||!run.stroke){_21b=new dojo.Color(t.next("color"));}var _21f=this.opt.tension?dc.curve(_21e,this.opt.tension):"";if(this.opt.areas){var _220=dojo.clone(_21e);var fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_21b);if(this.opt.tension){var p=dc.curve(_220,this.opt.tension);p+=" L"+_21e[_21e.length-1].x+","+(dim.height-_218.b)+" L"+_21e[0].x+","+(dim.height-_218.b)+" L"+_21e[0].x+","+_21e[0].y;run.dyn.fill=s.createPath(p).setFill(fill).getFill();}else{_220.push({x:_21e[_21e.length-1].x,y:dim.height-_218.b});_220.push({x:_21e[0].x,y:dim.height-_218.b});_220.push(_21e[0]);run.dyn.fill=s.createPolyline(_220).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_219=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,_21b);if(run.outline||t.series.outline){_21a=dc.makeStroke(run.outline?run.outline:t.series.outline);_21a.width=2*_21a.width+_219.width;}}if(this.opt.markers){_21c=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _221,_222,_223;if(this.opt.shadows&&_219){var sh=this.opt.shadows,_224=new dojo.Color([0,0,0,0.3]),_225=dojo.map(_21e,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_226=dojo.clone(_21a?_21a:_219);_226.color=_224;_226.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_225,this.opt.tension)).setStroke(_226).getStroke();}else{run.dyn.shadow=s.createPolyline(_225).setStroke(_226).getStroke();}}if(this.opt.markers){_223=dojo.map(_225,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_21c).setStroke(_226).setFill(_224);},this);}}if(this.opt.lines){if(_21a){if(this.opt.tension){run.dyn.outline=s.createPath(_21f).setStroke(_21a).getStroke();}else{run.dyn.outline=s.createPolyline(_21e).setStroke(_21a).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_21f).setStroke(_219).getStroke();}else{run.dyn.stroke=s.createPolyline(_21e).setStroke(_219).getStroke();}}if(this.opt.markers){_221=new Array(_21e.length);_222=new Array(_21e.length);dojo.forEach(_21e,function(c,i){var path="M"+c.x+" "+c.y+" "+_21c;if(_21a){_222[i]=s.createPath(path).setStroke(_21a);}_221[i]=s.createPath(path).setStroke(_219).setFill(_219.color);},this);if(_21d){dojo.forEach(_221,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_222[i]||null,shadow:_223&&_223[i]||null,cx:_21e[i].x,cy:_21e[i].y,x:i+1,y:run.data[i]};this._connectEvents(s,o);},this);}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedLines"]){dojo._hasResource["dojox.charting.plot2d.StackedLines"]=true;dojo.provide("dojox.charting.plot2d.StackedLines");dojo.declare("dojox.charting.plot2d.StackedLines",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.StackedAreas"]){dojo._hasResource["dojox.charting.plot2d.StackedAreas"]=true;dojo.provide("dojox.charting.plot2d.StackedAreas");dojo.declare("dojox.charting.plot2d.StackedAreas",dojox.charting.plot2d.Stacked,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});}if(!dojo._hasResource["dojox.charting.plot2d.Columns"]){dojo._hasResource["dojox.charting.plot2d.Columns"]=true;dojo.provide("dojox.charting.plot2d.Columns");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_227=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Columns",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,shadows:null,animate:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(_228,_229){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_229);du.updateWithPattern(this.opt,_229,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},calculateAxes:function(dim){var _22a=dc.collectSimpleStats(this.series);_22a.hmin-=0.5;_22a.hmax+=0.5;this._calc(dim,_22a);return this;},render:function(dim,_22b){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_227);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_22c,_22d,fill,f,gap,_22e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_22f=Math.max(0,this._vScaler.bounds.lower),_230=vt(_22f),_231=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_22e=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_22c=run.dyn.color=new dojo.Color(t.next("color"));}_22d=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_22c);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_22c);for(var j=0;j<run.data.length;++j){var _232=run.data[j],v=typeof _232=="number"?_232:_232.y,vv=vt(v),_233=vv-_230,h=Math.abs(_233),_234=_22c,_235=fill,_236=_22d;if(typeof _232!="number"){if(_232.color){_234=new dojo.Color(_232.color);}if("fill" in _232){_235=_232.fill;}else{if(_232.color){_235=dc.augmentFill(t.series.fill,_234);}}if("stroke" in _232){_236=_232.stroke;}else{if(_232.color){_236=dc.augmentStroke(t.series.stroke,_234);}}}if(_22e>=1&&h>=1){var _237=s.createRect({x:_22b.l+ht(j+0.5)+gap,y:dim.height-_22b.b-(v>_22f?vv:_230),width:_22e,height:h}).setFill(_235).setStroke(_236);run.dyn.fill=_237.getFill();run.dyn.stroke=_237.getStroke();if(_231){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_237,x:j+0.5,y:v};this._connectEvents(_237,o);}if(this.animate){this._animateColumn(_237,dim.height-_22b.b-_230,h);}}}run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_238,_239,_23a){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_238,duration:1200,transform:[{name:"translate",start:[0,_239-(_239/_23a)],end:[0,0]},{name:"scale",start:[1,1/_23a],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedColumns"]){dojo._hasResource["dojox.charting.plot2d.StackedColumns"]=true;dojo.provide("dojox.charting.plot2d.StackedColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_23b=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedColumns",dojox.charting.plot2d.Columns,{calculateAxes:function(dim){var _23c=dc.collectStackedStats(this.series);this._maxRunLength=_23c.hmax;_23c.hmin-=0.5;_23c.hmax+=0.5;this._calc(dim,_23c);return this;},render:function(dim,_23d){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _23e=run.data[j],v=typeof _23e=="number"?_23e:_23e.y;if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_23b);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_23f,_240,fill,f,gap,_241,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_242=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_241=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_23f=run.dyn.color=new dojo.Color(t.next("color"));}_240=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_23f);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_23f);for(var j=0;j<acc.length;++j){var v=acc[j],_243=vt(v),_23e=run.data[j],_244=_23f,_245=fill,_246=_240;if(typeof _23e!="number"){if(_23e.color){_244=new dojo.Color(_23e.color);}if("fill" in _23e){_245=_23e.fill;}else{if(_23e.color){_245=dc.augmentFill(t.series.fill,_244);}}if("stroke" in _23e){_246=_23e.stroke;}else{if(_23e.color){_246=dc.augmentStroke(t.series.stroke,_244);}}}if(_241>=1&&_243>=1){var _247=s.createRect({x:_23d.l+ht(j+0.5)+gap,y:dim.height-_23d.b-vt(v),width:_241,height:_243}).setFill(_245).setStroke(_246);run.dyn.fill=_247.getFill();run.dyn.stroke=_247.getStroke();if(_242){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_247,x:j+0.5,y:v};this._connectEvents(_247,o);}if(this.animate){this._animateColumn(_247,dim.height-_23d.b,_243);}}}run.dirty=false;for(var j=0;j<run.data.length;++j){var _23e=run.data[j],v=typeof _23e=="number"?_23e:_23e.y;if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]){dojo._hasResource["dojox.charting.plot2d.ClusteredColumns"]=true;dojo.provide("dojox.charting.plot2d.ClusteredColumns");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_248=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredColumns",dojox.charting.plot2d.Columns,{render:function(dim,_249){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_248);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_24a,_24b,fill,f,gap,_24c,_24d,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_24e=Math.max(0,this._vScaler.bounds.lower),_24f=vt(_24e),_250=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_24c=_24d=f.size;this.resetEvents();for(var i=0;i<this.series.length;++i){var run=this.series[i],_251=_24d*i;if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_24a=run.dyn.color=new dojo.Color(t.next("color"));}_24b=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_24a);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_24a);for(var j=0;j<run.data.length;++j){var _252=run.data[j],v=typeof _252=="number"?_252:_252.y,vv=vt(v),_253=vv-_24f,h=Math.abs(_253),_254=_24a,_255=fill,_256=_24b;if(typeof _252!="number"){if(_252.color){_254=new dojo.Color(_252.color);}if("fill" in _252){_255=_252.fill;}else{if(_252.color){_255=dc.augmentFill(t.series.fill,_254);}}if("stroke" in _252){_256=_252.stroke;}else{if(_252.color){_256=dc.augmentStroke(t.series.stroke,_254);}}}if(_24c>=1&&h>=1){var _257=s.createRect({x:_249.l+ht(j+0.5)+gap+_251,y:dim.height-_249.b-(v>_24e?vv:_24f),width:_24c,height:h}).setFill(_255).setStroke(_256);run.dyn.fill=_257.getFill();run.dyn.stroke=_257.getStroke();if(_250){var o={element:"column",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_257,x:j+0.5,y:v};this._connectEvents(_257,o);}if(this.animate){this._animateColumn(_257,dim.height-_249.b-_24f,h);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bars"]){dojo._hasResource["dojox.charting.plot2d.Bars"]=true;dojo.provide("dojox.charting.plot2d.Bars");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_258=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bars",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,shadows:null,animate:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(_259,_25a){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_25a);du.updateWithPattern(this.opt,_25a,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},calculateAxes:function(dim){var _25b=dc.collectSimpleStats(this.series),t;_25b.hmin-=0.5;_25b.hmax+=0.5;t=_25b.hmin,_25b.hmin=_25b.vmin,_25b.vmin=t;t=_25b.hmax,_25b.hmax=_25b.vmax,_25b.vmax=t;this._calc(dim,_25b);return this;},render:function(dim,_25c){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_258);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_25d,_25e,fill,f,gap,_25f,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_260=Math.max(0,this._hScaler.bounds.lower),_261=ht(_260),_262=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_25f=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_25d=run.dyn.color=new dojo.Color(t.next("color"));}_25e=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_25d);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_25d);for(var j=0;j<run.data.length;++j){var _263=run.data[j],v=typeof _263=="number"?_263:_263.y,hv=ht(v),_264=hv-_261,w=Math.abs(_264),_265=_25d,_266=fill,_267=_25e;if(typeof _263!="number"){if(_263.color){_265=new dojo.Color(_263.color);}if("fill" in _263){_266=_263.fill;}else{if(_263.color){_266=dc.augmentFill(t.series.fill,_265);}}if("stroke" in _263){_267=_263.stroke;}else{if(_263.color){_267=dc.augmentStroke(t.series.stroke,_265);}}}if(w>=1&&_25f>=1){var _268=s.createRect({x:_25c.l+(v<_260?hv:_261),y:dim.height-_25c.b-vt(j+1.5)+gap,width:w,height:_25f}).setFill(_266).setStroke(_267);run.dyn.fill=_268.getFill();run.dyn.stroke=_268.getStroke();if(_262){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_268,x:v,y:j+1.5};this._connectEvents(_268,o);}if(this.animate){this._animateBar(_268,_25c.l+_261,-w);}}}run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_269,_26a,_26b){dojox.gfx.fx.animateTransform(dojo.delegate({shape:_269,duration:1200,transform:[{name:"translate",start:[_26a-(_26a/_26b),0],end:[0,0]},{name:"scale",start:[1/_26b,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.StackedBars"]){dojo._hasResource["dojox.charting.plot2d.StackedBars"]=true;dojo.provide("dojox.charting.plot2d.StackedBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_26c=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.StackedBars",dojox.charting.plot2d.Bars,{calculateAxes:function(dim){var _26d=dc.collectStackedStats(this.series),t;this._maxRunLength=_26d.hmax;_26d.hmin-=0.5;_26d.hmax+=0.5;t=_26d.hmin,_26d.hmin=_26d.vmin,_26d.vmin=t;t=_26d.hmax,_26d.hmax=_26d.vmax,_26d.vmax=t;this._calc(dim,_26d);return this;},render:function(dim,_26e){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _26f=run.data[j],v=typeof _26f=="number"?_26f:_26f.y;if(isNaN(v)){v=0;}acc[j]+=v;}}this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_26c);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_270,_271,fill,f,gap,_272,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_273=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_272=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_270=run.dyn.color=new dojo.Color(t.next("color"));}_271=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_270);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_270);for(var j=0;j<acc.length;++j){var v=acc[j],_274=ht(v),_26f=run.data[j],_275=_270,_276=fill,_277=_271;if(typeof _26f!="number"){if(_26f.color){_275=new dojo.Color(_26f.color);}if("fill" in _26f){_276=_26f.fill;}else{if(_26f.color){_276=dc.augmentFill(t.series.fill,_275);}}if("stroke" in _26f){_277=_26f.stroke;}else{if(_26f.color){_277=dc.augmentStroke(t.series.stroke,_275);}}}if(_274>=1&&_272>=1){var _278=s.createRect({x:_26e.l,y:dim.height-_26e.b-vt(j+1.5)+gap,width:_274,height:_272}).setFill(_276).setStroke(_277);run.dyn.fill=_278.getFill();run.dyn.stroke=_278.getStroke();if(_273){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_278,x:v,y:j+1.5};this._connectEvents(_278,o);}if(this.animate){this._animateBar(_278,_26e.l,-_274);}}}run.dirty=false;for(var j=0;j<run.data.length;++j){var _26f=run.data[j],v=typeof _26f=="number"?_26f:_26f.y;if(isNaN(v)){v=0;}acc[j]-=v;}}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]){dojo._hasResource["dojox.charting.plot2d.ClusteredBars"]=true;dojo.provide("dojox.charting.plot2d.ClusteredBars");(function(){var df=dojox.lang.functional,dc=dojox.charting.plot2d.common,_279=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.ClusteredBars",dojox.charting.plot2d.Bars,{render:function(dim,_27a){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_279);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_27b,_27c,fill,f,gap,_27d,_27e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_27f=Math.max(0,this._hScaler.bounds.lower),_280=ht(_27f),_281=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_27d=_27e=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_282=_27e*(this.series.length-i-1);if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_27b=run.dyn.color=new dojo.Color(t.next("color"));}_27c=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_27b);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_27b);for(var j=0;j<run.data.length;++j){var _283=run.data[j],v=typeof _283=="number"?_283:_283.y,hv=ht(v),_284=hv-_280,w=Math.abs(_284),_285=_27b,_286=fill,_287=_27c;if(typeof _283!="number"){if(_283.color){_285=new dojo.Color(_283.color);}if("fill" in _283){_286=_283.fill;}else{if(_283.color){_286=dc.augmentFill(t.series.fill,_285);}}if("stroke" in _283){_287=_283.stroke;}else{if(_283.color){_287=dc.augmentStroke(t.series.stroke,_285);}}}if(w>=1&&_27d>=1){var _288=s.createRect({x:_27a.l+(v<_27f?hv:_280),y:dim.height-_27a.b-vt(j+1.5)+gap+_282,width:w,height:_27d}).setFill(_286).setStroke(_287);run.dyn.fill=_288.getFill();run.dyn.stroke=_288.getStroke();if(_281){var o={element:"bar",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_288,x:v,y:j+1.5};this._connectEvents(_288,o);}if(this.animate){this._animateBar(_288,_27a.l+_280,-_284);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Grid"]){dojo._hasResource["dojox.charting.plot2d.Grid"]=true;dojo.provide("dojox.charting.plot2d.Grid");(function(){var du=dojox.lang.utils;dojo.declare("dojox.charting.plot2d.Grid",dojox.charting.Element,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none"},optionalParams:{},constructor:function(_289,_28a){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_28a);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},calculateAxes:function(dim){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},getRequiredColors:function(){return 0;},render:function(dim,_28b){this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _28c=this._vAxis.getScaler(),vt=_28c.scaler.getTransformerFromModel(_28c),_28d=this._vAxis.getTicks();if(this.opt.hMinorLines){dojo.forEach(_28d.minor,function(tick){var y=dim.height-_28b.b-vt(tick.value);s.createLine({x1:_28b.l,y1:y,x2:dim.width-_28b.r,y2:y}).setStroke(ta.minorTick);});}if(this.opt.hMajorLines){dojo.forEach(_28d.major,function(tick){var y=dim.height-_28b.b-vt(tick.value);s.createLine({x1:_28b.l,y1:y,x2:dim.width-_28b.r,y2:y}).setStroke(ta.majorTick);});}}catch(e){}try{var _28e=this._hAxis.getScaler(),ht=_28e.scaler.getTransformerFromModel(_28e),_28d=this._hAxis.getTicks();if(_28d&&this.opt.vMinorLines){dojo.forEach(_28d.minor,function(tick){var x=_28b.l+ht(tick.value);s.createLine({x1:x,y1:_28b.t,x2:x,y2:dim.height-_28b.b}).setStroke(ta.minorTick);});}if(_28d&&this.opt.vMajorLines){dojo.forEach(_28d.major,function(tick){var x=_28b.l+ht(tick.value);s.createLine({x1:x,y1:_28b.t,x2:x,y2:dim.height-_28b.b}).setStroke(ta.majorTick);});}}catch(e){}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Pie"]){dojo._hasResource["dojox.charting.plot2d.Pie"]=true;dojo.provide("dojox.charting.plot2d.Pie");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,da=dojox.charting.axis2d.common,g=dojox.gfx;dojo.declare("dojox.charting.plot2d.Pie",dojox.charting.Element,{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true},optionalParams:{font:"",fontColor:"",radius:0},constructor:function(_28f,_290){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_290);du.updateWithPattern(this.opt,_290,this.optionalParams);this.run=null;this.dyn=[];},destroy:function(){this.resetEvents();this.inherited(arguments);},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},calculateAxes:function(dim){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},plotEvent:function(o){},connect:function(_291,_292){this.dirty=true;return dojo.connect(this,"plotEvent",_291,_292);},events:function(){var ls=this.plotEvent._listeners;if(!ls||!ls.length){return false;}for(var i in ls){if(!(i in Array.prototype)){return true;}}return false;},resetEvents:function(){this.plotEvent({type:"onplotreset",plot:this});},_connectEvents:function(_293,o){_293.connect("onmouseover",this,function(e){o.type="onmouseover";o.event=e;this.plotEvent(o);});_293.connect("onmouseout",this,function(e){o.type="onmouseout";o.event=e;this.plotEvent(o);});_293.connect("onclick",this,function(e){o.type="onclick";o.event=e;this.plotEvent(o);});},render:function(dim,_294){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,_295,t=this.chart.theme;this.resetEvents();if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_294.l-_294.r)/2,ry=(dim.height-_294.t-_294.b)/2,r=Math.min(rx,ry),_296="font" in this.opt?this.opt.font:t.axis.font,size=_296?g.normalizedLength(g.splitFontString(_296).size):0,_297="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_298=0,step,_299,_29a,_29b,_29c,_29d,run=this.run.data,_29e=this.events();if(typeof run[0]=="number"){_299=df.map(run,"Math.max(x, 0)");if(df.every(_299,"<= 0")){return this;}_29a=df.map(_299,"/this",df.foldl(_299,"+",0));if(this.opt.labels){_29b=dojo.map(_29a,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_299=df.map(run,"Math.max(x.y, 0)");if(df.every(_299,"<= 0")){return this;}_29a=df.map(_299,"/this",df.foldl(_299,"+",0));if(this.opt.labels){_29b=dojo.map(_29a,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}if(this.opt.labels){_29c=df.foldl1(df.map(_29b,function(_29f){return dojox.gfx._base._getTextBox(_29f,{font:_296}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_29c,ry-size)+this.opt.labelOffset;}_29d=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_29d=r-this.opt.labelOffset;}var _2a0={cx:_294.l+rx,cy:_294.t+ry,r:r};this.dyn=[];dojo.some(_29a,function(_2a1,i){if(_2a1<=0){return false;}var v=run[i];if(_2a1>=1){var _2a2,fill,_2a3;if(typeof v=="object"){_2a2="color" in v?v.color:new dojo.Color(t.next("color"));fill="fill" in v?v.fill:dc.augmentFill(t.series.fill,_2a2);_2a3="stroke" in v?v.stroke:dc.augmentStroke(t.series.stroke,_2a2);}else{_2a2=new dojo.Color(t.next("color"));fill=dc.augmentFill(t.series.fill,_2a2);_2a3=dc.augmentStroke(t.series.stroke,_2a2);}var _2a4=s.createCircle(_2a0).setFill(fill).setStroke(_2a3);this.dyn.push({color:_2a2,fill:fill,stroke:_2a3});if(_29e){var o={element:"slice",index:i,run:this.run,plot:this,shape:_2a4,x:i,y:typeof v=="number"?v:v.y,cx:_2a0.cx,cy:_2a0.cy,cr:r};this._connectEvents(_2a4,o);}return true;}var end=_298+_2a1*2*Math.PI;if(i+1==_29a.length){end=2*Math.PI;}var step=end-_298,x1=_2a0.cx+r*Math.cos(_298),y1=_2a0.cy+r*Math.sin(_298),x2=_2a0.cx+r*Math.cos(end),y2=_2a0.cy+r*Math.sin(end);var _2a2,fill,_2a3;if(typeof v=="object"){_2a2="color" in v?v.color:new dojo.Color(t.next("color"));fill="fill" in v?v.fill:dc.augmentFill(t.series.fill,_2a2);_2a3="stroke" in v?v.stroke:dc.augmentStroke(t.series.stroke,_2a2);}else{_2a2=new dojo.Color(t.next("color"));fill=dc.augmentFill(t.series.fill,_2a2);_2a3=dc.augmentStroke(t.series.stroke,_2a2);}var _2a4=s.createPath({}).moveTo(_2a0.cx,_2a0.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_2a0.cx,_2a0.cy).closePath().setFill(fill).setStroke(_2a3);this.dyn.push({color:_2a2,fill:fill,stroke:_2a3});if(_29e){var o={element:"slice",index:i,run:this.run,plot:this,shape:_2a4,x:i,y:typeof v=="number"?v:v.y,cx:_2a0.cx,cy:_2a0.cy,cr:r};this._connectEvents(_2a4,o);}_298=end;return false;},this);if(this.opt.labels){_298=0;dojo.some(_29a,function(_2a5,i){if(_2a5<=0){return false;}if(_2a5>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,_2a0.cx,_2a0.cy+size/2,"middle",_29b[i],_296,(typeof v=="object"&&"fontColor" in v)?v.fontColor:_297);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_298+_2a5*2*Math.PI,v=run[i];if(i+1==_29a.length){end=2*Math.PI;}var _2a6=(_298+end)/2,x=_2a0.cx+_29d*Math.cos(_2a6),y=_2a0.cy+_29d*Math.sin(_2a6)+size/2;var elem=da.createText[this.opt.htmlLabels&&dojox.gfx.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_29b[i],_296,(typeof v=="object"&&"fontColor" in v)?v.fontColor:_297);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_298=end;return false;},this);}return this;},_getLabel:function(_2a7){return this.opt.fixed?_2a7.toFixed(this.opt.precision):_2a7.toString();}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Bubble"]){dojo._hasResource["dojox.charting.plot2d.Bubble"]=true;dojo.provide("dojox.charting.plot2d.Bubble");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_2a8=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Bubble",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y"},optionalParams:{},constructor:function(_2a9,_2aa){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_2aa);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(dim){this._calc(dim,dc.collectSimpleStats(this.series));return this;},render:function(dim,_2ab){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_2a8);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_2ac,_2ad,_2ae,_2af,_2b0,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_2b1=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var s=run.group,_2b2=dojo.map(run.data,function(v,i){return {x:ht(v.x)+_2ab.l,y:dim.height-_2ab.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)};},this);if(run.fill){_2ae=run.fill;}else{if(run.stroke){_2ae=run.stroke;}else{_2ae=run.dyn.color=new dojo.Color(t.next("color"));}}run.dyn.fill=_2ae;_2ac=run.dyn.stroke=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,_2ae);var _2b3=null,_2b4=null,_2b5=null;if(this.opt.shadows&&_2ac){var sh=this.opt.shadows,_2b0=new dojo.Color([0,0,0,0.2]),_2af=dojo.clone(_2ad?_2ad:_2ac);_2af.color=_2b0;_2af.width+=sh.dw?sh.dw:0;run.dyn.shadow=_2af;var _2b6=dojo.map(_2b2,function(item){var sh=this.opt.shadows;return s.createCircle({cx:item.x+sh.dx,cy:item.y+sh.dy,r:item.radius}).setStroke(_2af).setFill(_2b0);},this);}if(run.outline||t.series.outline){_2ad=dc.makeStroke(run.outline?run.outline:t.series.outline);_2ad.width=2*_2ad.width+_2ac.width;run.dyn.outline=_2ad;_2b4=dojo.map(_2b2,function(item){s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_2ad);},this);}_2b3=dojo.map(_2b2,function(item){return s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_2ac).setFill(_2ae);},this);if(_2b1){dojo.forEach(_2b3,function(s,i){var o={element:"circle",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_2b4&&_2b4[i]||null,shadow:_2b5&&_2b5[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_2b2[i].x,cy:_2b2[i].y,cr:_2b2[i].radius};this._connectEvents(s,o);},this);}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.Candlesticks"]){dojo._hasResource["dojox.charting.plot2d.Candlesticks"]=true;dojo.provide("dojox.charting.plot2d.Candlesticks");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_2b7=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.Candlesticks",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,shadows:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(_2b8,_2b9){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_2b9);du.updateWithPattern(this.opt,_2b9,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},collectStats:function(_2ba){var _2bb=dojo.clone(dc.defaultStats);for(var i=0;i<_2ba.length;i++){var run=_2ba[i];if(!run.data.length){continue;}var _2bc=_2bb.vmin,_2bd=_2bb.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,idx){var x=val.x||idx+1;_2bb.hmin=Math.min(_2bb.hmin,x);_2bb.hmax=Math.max(_2bb.hmax,x);_2bb.vmin=Math.min(_2bb.vmin,val.open,val.close,val.high,val.low);_2bb.vmax=Math.max(_2bb.vmax,val.open,val.close,val.high,val.low);});}if("ymin" in run){_2bb.vmin=Math.min(_2bc,run.ymin);}if("ymax" in run){_2bb.vmax=Math.max(_2bd,run.ymax);}}return _2bb;},calculateAxes:function(dim){var _2be=this.collectStats(this.series),t;_2be.hmin-=0.5;_2be.hmax+=0.5;this._calc(dim,_2be);return this;},render:function(dim,_2bf){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_2b7);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_2c0,_2c1,fill,f,gap,_2c2,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_2c3=Math.max(0,this._vScaler.bounds.lower),_2c4=vt(_2c3),_2c5=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_2c2=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_2c0=run.dyn.color=new dojo.Color(t.next("color"));}_2c1=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_2c0);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_2c0);for(var j=0;j<run.data.length;++j){var v=run.data[j];var x=ht(v.x||(j+0.5))+_2bf.l+gap,y=dim.height-_2bf.b,open=vt(v.open),_2c6=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_2c2>=1){var _2c7=open>_2c6;var line={x1:_2c2/2,x2:_2c2/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_2c6),width:_2c2,height:Math.max(_2c7?open-_2c6:_2c6-open,1)};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _2c8=shape.createGroup();_2c8.createLine(line).setStroke(_2c1);_2c8.createRect(rect).setStroke(_2c1).setFill(_2c7?fill:"white");if("mid" in v){_2c8.createLine({x1:(_2c1.width||1),x2:_2c2-(_2c1.width||1),y1:y-mid,y2:y-mid}).setStroke(_2c7?{color:"white"}:_2c1);}run.dyn.fill=fill;run.dyn.stroke=_2c1;if(_2c5){var o={element:"candlestick",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_2c8,x:x,y:y-Math.max(open,_2c6),cx:_2c2/2,cy:(y-Math.max(open,_2c6))+(Math.max(_2c7?open-_2c6:_2c6-open,1)/2),width:_2c2,height:Math.max(_2c7?open-_2c6:_2c6-open,1),data:v};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.plot2d.OHLC"]){dojo._hasResource["dojox.charting.plot2d.OHLC"]=true;dojo.provide("dojox.charting.plot2d.OHLC");(function(){var df=dojox.lang.functional,du=dojox.lang.utils,dc=dojox.charting.plot2d.common,_2c9=df.lambda("item.purgeGroup()");dojo.declare("dojox.charting.plot2d.OHLC",dojox.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,shadows:null},optionalParams:{minBarSize:1,maxBarSize:1},constructor:function(_2ca,_2cb){this.opt=dojo.clone(this.defaultParams);du.updateWithObject(this.opt,_2cb);du.updateWithPattern(this.opt,_2cb,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},collectStats:function(_2cc){var _2cd=dojo.clone(dc.defaultStats);for(var i=0;i<_2cc.length;i++){var run=_2cc[i];if(!run.data.length){continue;}var _2ce=_2cd.vmin,_2cf=_2cd.vmax;if(!("ymin" in run)||!("ymax" in run)){dojo.forEach(run.data,function(val,idx){var x=val.x||idx+1;_2cd.hmin=Math.min(_2cd.hmin,x);_2cd.hmax=Math.max(_2cd.hmax,x);_2cd.vmin=Math.min(_2cd.vmin,val.open,val.close,val.high,val.low);_2cd.vmax=Math.max(_2cd.vmax,val.open,val.close,val.high,val.low);});}if("ymin" in run){_2cd.vmin=Math.min(_2ce,run.ymin);}if("ymax" in run){_2cd.vmax=Math.max(_2cf,run.ymax);}}return _2cd;},calculateAxes:function(dim){var _2d0=this.collectStats(this.series),t;_2d0.hmin-=0.5;_2d0.hmax+=0.5;this._calc(dim,_2d0);return this;},render:function(dim,_2d1){this.dirty=this.isDirty();if(this.dirty){dojo.forEach(this.series,_2c9);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_2d2,_2d3,fill,f,gap,_2d4,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_2d5=Math.max(0,this._vScaler.bounds.lower),_2d6=vt(_2d5),_2d7=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_2d4=f.size;this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();var s=run.group;if(!run.fill||!run.stroke){_2d2=run.dyn.color=new dojo.Color(t.next("color"));}_2d3=run.stroke?run.stroke:dc.augmentStroke(t.series.stroke,_2d2);fill=run.fill?run.fill:dc.augmentFill(t.series.fill,_2d2);for(var j=0;j<run.data.length;++j){var v=run.data[j];var x=ht(v.x||(j+0.5))+_2d1.l+gap,y=dim.height-_2d1.b,open=vt(v.open),_2d8=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_2d4>=1){var hl={x1:_2d4/2,x2:_2d4/2,y1:y-high,y2:y-low},op={x1:0,x2:((_2d4/2)+((_2d3.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_2d4/2)-((_2d3.width||1)/2)),x2:_2d4,y1:y-_2d8,y2:y-_2d8};shape=s.createGroup();shape.setTransform({dx:x,dy:0});var _2d9=shape.createGroup();_2d9.createLine(hl).setStroke(_2d3);_2d9.createLine(op).setStroke(_2d3);_2d9.createLine(cl).setStroke(_2d3);run.dyn.fill=fill;run.dyn.stroke=_2d3;if(_2d7){var o={element:"candlestick",index:j,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:_2d9,x:x,y:y-Math.max(open,_2d8),cx:_2d4/2,cy:(y-Math.max(open,_2d8))+(Math.max(open>_2d8?open-_2d8:_2d8-open,1)/2),width:_2d4,height:Math.max(open>_2d8?open-_2d8:_2d8-open,1),data:v};this._connectEvents(shape,o);}}}run.dirty=false;}this.dirty=false;return this;}});})();}if(!dojo._hasResource["dojox.charting.Chart2D"]){dojo._hasResource["dojox.charting.Chart2D"]=true;dojo.provide("dojox.charting.Chart2D");(function(){var df=dojox.lang.functional,dc=dojox.charting,_2da=df.lambda("item.clear()"),_2db=df.lambda("item.purgeGroup()"),_2dc=df.lambda("item.destroy()"),_2dd=df.lambda("item.dirty = false"),_2de=df.lambda("item.dirty = true");dojo.declare("dojox.charting.Chart2D",null,{constructor:function(node,_2df){if(!_2df){_2df={};}this.margins=_2df.margins?_2df.margins:{l:10,t:10,r:10,b:10};this.stroke=_2df.stroke;this.fill=_2df.fill;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dojo.byId(node);var box=dojo.marginBox(node);this.surface=dojox.gfx.createSurface(this.node,box.w,box.h);},destroy:function(){dojo.forEach(this.series,_2dc);dojo.forEach(this.stack,_2dc);df.forIn(this.axes,_2dc);this.surface.destroy();},getCoords:function(){if(!this.coords){this.coords=dojo.coords(this.node,true);}return this.coords;},setTheme:function(_2e0){this.theme=_2e0._clone();this.dirty=true;return this;},addAxis:function(name,_2e1){var axis;if(!_2e1||!("type" in _2e1)){axis=new dc.axis2d.Default(this,_2e1);}else{axis=typeof _2e1.type=="string"?new dc.axis2d[_2e1.type](this,_2e1):new _2e1.type(this,_2e1);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_2e2){var plot;if(!_2e2||!("type" in _2e2)){plot=new dc.plot2d.Default(this,_2e2);}else{plot=typeof _2e2.type=="string"?new dc.plot2d[_2e2.type](this,_2e2):new _2e2.type(this,_2e2);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},removePlot:function(name){if(name in this.plots){var _2e3=this.plots[name];delete this.plots[name];this.stack[_2e3].destroy();this.stack.splice(_2e3,1);df.forIn(this.plots,function(idx,name,_2e4){if(idx>_2e3){_2e4[name]=idx-1;}});this.dirty=true;}return this;},addSeries:function(name,data,_2e5){var run=new dc.Series(this,data,_2e5);if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}run.name=name;this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},removeSeries:function(name){if(name in this.runs){var _2e6=this.runs[name],_2e7=this.series[_2e6].plot;delete this.runs[name];this.series[_2e6].destroy();this.series.splice(_2e6,1);df.forIn(this.runs,function(idx,name,runs){if(idx>_2e6){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.data=data;run.dirty=true;this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},resize:function(_2e8,_2e9){var box;switch(arguments.length){case 0:box=dojo.marginBox(this.node);break;case 1:box=_2e8;break;default:box={w:_2e8,h:_2e9};break;}dojo.marginBox(this.node,box);this.surface.setDimensions(box.w,box.h);this.dirty=true;this.coords=null;return this.render();},getGeometry:function(){var ret={};df.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_2ea,_2eb){var axis=this.axes[name];if(axis){axis.setWindow(_2ea,_2eb);}return this;},setWindow:function(sx,sy,dx,dy){if(!("plotArea" in this)){this.calculateGeometry();}df.forIn(this.axes,function(axis){var _2ec,_2ed,_2ee=axis.getScaler().bounds,s=_2ee.span/(_2ee.upper-_2ee.lower);if(axis.vertical){_2ec=sy;_2ed=dy/s/_2ec;}else{_2ec=sx;_2ed=dx/s/_2ec;}axis.setWindow(_2ec,_2ed);});return this;},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}dojo.forEach(this.stack,function(plot){if(plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty)){plot.calculateAxes(this.plotArea);}},this);return this;},fullGeometry:function(){this._makeDirty();dojo.forEach(this.stack,_2da);if(!this.theme){this.setTheme(new dojox.charting.Theme(dojox.charting._def));}dojo.forEach(this.series,function(run){if(!(run.plot in this.plots)){var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);dojo.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=dojox.gfx.normalizedLength(dim.width);dim.height=dojox.gfx.normalizedLength(dim.height);df.forIn(this.axes,_2da);dojo.forEach(this.stack,function(p){p.calculateAxes(dim);});var _2ef=this.offsets={l:0,r:0,t:0,b:0};df.forIn(this.axes,function(axis){df.forIn(axis.getOffsets(),function(o,i){_2ef[i]+=o;});});df.forIn(this.margins,function(o,i){_2ef[i]+=o;});this.plotArea={width:dim.width-_2ef.l-_2ef.r,height:dim.height-_2ef.t-_2ef.b};df.forIn(this.axes,_2da);dojo.forEach(this.stack,function(plot){plot.calculateAxes(this.plotArea);},this);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();df.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);df.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _2f0=this.offsets,dim=this.dim;var _2f1=df.foldl(this.stack,"z + plot.getRequiredColors()",0);this.theme.defineColors({num:_2f1,cache:false});dojo.forEach(this.series,_2db);df.forIn(this.axes,_2db);dojo.forEach(this.stack,_2db);this.surface.clear();var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_2f2=t.plotarea&&t.plotarea.stroke;if(fill){this.surface.createRect({x:_2f0.l,y:_2f0.t,width:dim.width-_2f0.l-_2f0.r,height:dim.height-_2f0.t-_2f0.b}).setFill(fill);}if(_2f2){this.surface.createRect({x:_2f0.l,y:_2f0.t,width:dim.width-_2f0.l-_2f0.r-1,height:dim.height-_2f0.t-_2f0.b-1}).setStroke(_2f2);}df.foldr(this.stack,function(z,plot){return plot.render(dim,_2f0),0;},0);fill=this.fill?this.fill:(t.chart&&t.chart.fill);_2f2=this.stroke?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new dojo.Color(dojo.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new dojo.Color(dojo.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){if(_2f0.l){this.surface.createRect({width:_2f0.l,height:dim.height+1}).setFill(fill);}if(_2f0.r){this.surface.createRect({x:dim.width-_2f0.r,width:_2f0.r+1,height:dim.height+1}).setFill(fill);}if(_2f0.t){this.surface.createRect({width:dim.width+1,height:_2f0.t}).setFill(fill);}if(_2f0.b){this.surface.createRect({y:dim.height-_2f0.b,width:dim.width+1,height:_2f0.b+2}).setFill(fill);}}if(_2f2){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_2f2);}df.forIn(this.axes,function(axis){axis.render(dim,_2f0);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},connectToPlot:function(name,_2f3,_2f4){return name in this.plots?this.stack[this.plots[name]].connect(_2f3,_2f4):null;},_makeClean:function(){dojo.forEach(this.axes,_2dd);dojo.forEach(this.stack,_2dd);dojo.forEach(this.series,_2dd);this.dirty=false;},_makeDirty:function(){dojo.forEach(this.axes,_2de);dojo.forEach(this.stack,_2de);dojo.forEach(this.series,_2de);this.dirty=true;},_invalidateDependentPlots:function(_2f5,_2f6){if(_2f5 in this.plots){var plot=this.stack[this.plots[_2f5]],axis,_2f7=_2f6?"vAxis":"hAxis";if(plot[_2f7]){axis=this.axes[plot[_2f7]];if(axis&&axis.dependOnData()){axis.dirty=true;dojo.forEach(this.stack,function(p){if(p[_2f7]&&p[_2f7]==plot[_2f7]){p.dirty=true;}});}}else{plot.dirty=true;}}}});})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["dojox.charting.action2d.Base"]){dojo._hasResource["dojox.charting.action2d.Base"]=true;dojo.provide("dojox.charting.action2d.Base");(function(){var _2f8=400,_2f9=dojo.fx.easing.backOut,df=dojox.lang.functional;dojo.declare("dojox.charting.action2d.Base",null,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_2fa,plot,_2fb){this.chart=_2fa;this.plot=plot?plot:"default";this.anim={};if(!_2fb){_2fb={};}this.duration=_2fb.duration?_2fb.duration:_2f8;this.easing=_2fb.easing?_2fb.easing:_2f9;},connect:function(){this.handle=this.chart.connectToPlot(this.plot,this,"process");},disconnect:function(){if(this.handle){dojo.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){if(this.handle){this.disconnect();}df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});})();}if(!dojo._hasResource["dojox.charting.action2d.Magnify"]){dojo._hasResource["dojox.charting.action2d.Magnify"]=true;dojo.provide("dojox.charting.action2d.Magnify");(function(){var _2fc=2,m=dojox.gfx.matrix,gf=dojox.gfx.fx;dojo.declare("dojox.charting.action2d.Magnify",dojox.charting.action2d.Base,{defaultParams:{duration:400,easing:dojo.fx.easing.backOut,scale:_2fc},optionalParams:{},constructor:function(_2fd,plot,_2fe){this.scale=_2fe&&typeof _2fe.scale=="number"?_2fe.scale:_2fc;this.connect();},process:function(o){if(!o.shape||!(o.type in this.overOutEvents)||!("cx" in o)||!("cy" in o)){return;}var _2ff=o.run.name,_300=o.index,_301=[],anim,init,_302;if(_2ff in this.anim){anim=this.anim[_2ff][_300];}else{this.anim[_2ff]={};}if(anim){anim.action.stop(true);}else{this.anim[_2ff][_300]=anim={};}if(o.type=="onmouseover"){init=m.identity;_302=this.scale;}else{init=m.scaleAt(this.scale,o.cx,o.cy);_302=1/this.scale;}var _303={shape:o.shape,duration:this.duration,easing:this.easing,transform:[{name:"scaleAt",start:[1,o.cx,o.cy],end:[_302,o.cx,o.cy]},init]};if(o.shape){_301.push(gf.animateTransform(_303));}if(o.oultine){_303.shape=o.outline;_301.push(gf.animateTransform(_303));}if(o.shadow){_303.shape=o.shadow;_301.push(gf.animateTransform(_303));}if(!_301.length){delete this.anim[_2ff][_300];return;}anim.action=dojo.fx.combine(_301);if(o.type=="onmouseout"){dojo.connect(anim.action,"onEnd",this,function(){if(this.anim[_2ff]){delete this.anim[_2ff][_300];}});}anim.action.play();}});})();}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_304){if(this._hash[_304.id]){throw new Error("Tried to register widget with id=="+_304.id+" but that id is already registered");}this._hash[_304.id]=_304;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_305){_305=_305||dojo.global;var i=0,id;for(id in this._hash){func.call(_305,this._hash[id],i++,this._hash);}return this;},filter:function(_306,_307){_307=_307||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_306.call(_307,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_308;for(id in this._hash){_308=this._hash[id];if(_308.declaredClass==cls){res.add(_308);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_309){return dojo.map(this.toArray(),func,_309);},every:function(func,_30a){_30a=_30a||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_30a,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_30b){_30b=_30b||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_30b,this._hash[i],x++,this._hash)){return true;}}return false;}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(_30c){var id;do{id=_30c+"_"+(_30c in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[_30c]:dijit._widgetTypeCtr[_30c]=0);}while(dijit.byId(id));return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(root){var _30d=[];function _30e(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _30f=node.getAttribute("widgetId");if(_30f){var _310=dijit.byId(_30f);_30d.push(_310);}else{_30e(node);}}}};_30e(root);return _30d;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_311){if(!_311._destroyed){if(_311.destroyRecursive){_311.destroyRecursive();}else{if(_311.destroy){_311.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byId=function(id){return typeof id=="string"?dijit.registry._hash[id]:id;};dijit.byNode=function(node){return dijit.registry.byId(node.getAttribute("widgetId"));};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return dijit.byId(id);}node=node.parentNode;}return null;};dijit._isElementShown=function(elem){var _312=dojo.style(elem);return (_312.visibility!="hidden")&&(_312.visibility!="collapsed")&&(_312.display!="none")&&(dojo.attr(elem,"type")!="hidden");};dijit.isTabNavigable=function(elem){if(dojo.attr(elem,"disabled")){return false;}else{if(dojo.hasAttr(elem,"tabIndex")){return dojo.attr(elem,"tabIndex")>=0;}else{switch(elem.nodeName.toLowerCase()){case "a":return dojo.hasAttr(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){return elem.contentDocument.designMode=="on";}else{if(dojo.isWebKit){var doc=elem.contentDocument,body=doc&&doc.body;return body&&body.contentEditable=="true";}else{try{doc=elem.contentWindow.document;body=doc&&doc.body;return body&&body.firstChild&&body.firstChild.contentEditable=="true";}catch(e){return false;}}}default:return elem.contentEditable=="true";}}}};dijit._getTabNavigable=function(root){var _313,last,_314,_315,_316,_317;var _318=function(_319){dojo.query("> *",_319).forEach(function(_31a){var _31b=dijit._isElementShown(_31a);if(_31b&&dijit.isTabNavigable(_31a)){var _31c=dojo.attr(_31a,"tabIndex");if(!dojo.hasAttr(_31a,"tabIndex")||_31c==0){if(!_313){_313=_31a;}last=_31a;}else{if(_31c>0){if(!_314||_31c<_315){_315=_31c;_314=_31a;}if(!_316||_31c>=_317){_317=_31c;_316=_31a;}}}}if(_31b&&_31a.nodeName.toUpperCase()!="SELECT"){_318(_31a);}});};if(dijit._isElementShown(root)){_318(root);}return {first:_313,last:last,lowest:_314,highest:_316};};dijit.getFirstInTabbingOrder=function(root){var _31d=dijit._getTabNavigable(dojo.byId(root));return _31d.lowest?_31d.lowest:_31d.first;};dijit.getLastInTabbingOrder=function(root){var _31e=dijit._getTabNavigable(dojo.byId(root));return _31e.last?_31e.last:_31e.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_31f){var _320=dojo.doc,mark=_31f.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_320.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_320.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_320.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_321){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_321||dojo.global,dijit.getBookmark),openedForWindow:_321};},focus:function(_322){if(!_322){return;}var node="node" in _322?_322.node:_322,_323=_322.bookmark,_324=_322.openedForWindow,_325=_323?_323.isCollapsed:false;if(node){var _326=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_326&&_326.focus){try{_326.focus();}catch(e){}}dijit._onFocusNode(node);}if(_323&&dojo.withGlobal(_324||dojo.global,dijit.isCollapsed)&&!_325){if(_324){_324.focus();}try{dojo.withGlobal(_324||dojo.global,dijit.moveToBookmark,null,[_323]);}catch(e2){}}},_activeStack:[],registerIframe:function(_327){return dijit.registerWin(_327.contentWindow,_327);},unregisterIframe:function(_328){dijit.unregisterWin(_328);},registerWin:function(_329,_32a){var _32b=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);dijit._onTouchNode(_32a||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_329.document.documentElement:_329.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_32b);var _32c=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_32a||evt.srcElement);}else{dijit._onTouchNode(_32a||evt.srcElement);}};doc.attachEvent("onactivate",_32c);var _32d=function(evt){dijit._onBlurNode(_32a||evt.srcElement);};doc.attachEvent("ondeactivate",_32d);return function(){doc.detachEvent("onmousedown",_32b);doc.detachEvent("onactivate",_32c);doc.detachEvent("ondeactivate",_32d);doc=null;};}else{doc.addEventListener("mousedown",_32b,true);var _32e=function(evt){dijit._onFocusNode(_32a||evt.target);};doc.addEventListener("focus",_32e,true);var _32f=function(evt){dijit._onBlurNode(_32a||evt.target);};doc.addEventListener("blur",_32f,true);return function(){doc.removeEventListener("mousedown",_32b,true);doc.removeEventListener("focus",_32e,true);doc.removeEventListener("blur",_32f,true);doc=null;};}}},unregisterWin:function(_330){_330&&_330();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _331=[];try{while(node){var _332=dojo.attr(node,"dijitPopupParent");if(_332){node=dijit.byId(_332).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dijit.getDocumentWindow(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId");if(id){_331.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_331,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_333,by){var _334=dijit._activeStack;dijit._activeStack=_333;for(var _335=0;_335<Math.min(_334.length,_333.length);_335++){if(_334[_335]!=_333[_335]){break;}}var _336;for(var i=_334.length-1;i>=_335;i--){_336=dijit.byId(_334[i]);if(_336){_336._focused=false;_336._hasBeenBlurred=true;if(_336._onBlur){_336._onBlur(by);}if(_336._setStateClass){_336._setStateClass();}dojo.publish("widgetBlur",[_336,by]);}}for(i=_335;i<_333.length;i++){_336=dijit.byId(_333[i]);if(_336){_336._focused=true;if(_336._onFocus){_336._onFocus(by);}if(_336._setStateClass){_336._setStateClass();}dojo.publish("widgetFocus",[_336,by]);}}}});dojo.addOnLoad(function(){var _337=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_337);_337=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_338){this.pairs=[];this.returnWrappers=_338||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_339,wrap,_33a,_33b){this.pairs[((_33b)?"unshift":"push")]([name,_339,wrap,_33a]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var _33c=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _33d=dojo._docScroll();return {w:_33c.clientWidth,h:_33c.clientHeight,l:_33d.x,t:_33d.y};};dijit.placeOnScreen=function(node,pos,_33e,_33f){var _340=dojo.map(_33e,function(_341){var c={corner:_341,pos:{x:pos.x,y:pos.y}};if(_33f){c.pos.x+=_341.charAt(1)=="L"?_33f.x:-_33f.x;c.pos.y+=_341.charAt(0)=="T"?_33f.y:-_33f.y;}return c;});return dijit._place(node,_340);};dijit._place=function(node,_342,_343){var view=dijit.getViewport();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_342,function(_344){var _345=_344.corner;var pos=_344.pos;if(_343){_343(node,_344.aroundCorner,_345);}var _346=node.style;var _347=_346.display;var _348=_346.visibility;_346.visibility="hidden";_346.display="";var mb=dojo.marginBox(node);_346.display=_347;_346.visibility=_348;var _349=Math.max(view.l,_345.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_34a=Math.max(view.t,_345.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_345.charAt(1)=="L"?(_349+mb.w):pos.x),endY=Math.min(view.t+view.h,_345.charAt(0)=="T"?(_34a+mb.h):pos.y),_34b=endX-_349,_34c=endY-_34a,_34d=(mb.w-_34b)+(mb.h-_34c);if(best==null||_34d<best.overflow){best={corner:_345,aroundCorner:_344.aroundCorner,x:_349,y:_34a,w:_34b,h:_34c,overflow:_34d};}return !_34d;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_343){_343(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_34e,_34f,_350){_34e=dojo.byId(_34e);var _351=_34e.style.display;_34e.style.display="";var _352=dojo.position(_34e,true);_34e.style.display=_351;return dijit._placeOnScreenAroundRect(node,_352.x,_352.y,_352.w,_352.h,_34f,_350);};dijit.placeOnScreenAroundRectangle=function(node,_353,_354,_355){return dijit._placeOnScreenAroundRect(node,_353.x,_353.y,_353.width,_353.height,_354,_355);};dijit._placeOnScreenAroundRect=function(node,x,y,_356,_357,_358,_359){var _35a=[];for(var _35b in _358){_35a.push({aroundCorner:_35b,corner:_358[_35b],pos:{x:x+(_35b.charAt(1)=="L"?0:_356),y:y+(_35b.charAt(0)=="T"?0:_357)}});}return dijit._place(node,_35a,_359);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_35c,_35d,_35e){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAlignment=function(_35f,_360){var _361={};dojo.forEach(_35f,function(pos){switch(pos){case "after":_361[_360?"BR":"BL"]=_360?"BL":"BR";break;case "before":_361[_360?"BL":"BR"]=_360?"BR":"BL";break;case "below":_361[_360?"BL":"BR"]=_360?"TL":"TR";_361[_360?"BR":"BL"]=_360?"TR":"TL";break;case "above":default:_361[_360?"TL":"TR"]=_360?"BL":"BR";_361[_360?"TR":"TL"]=_360?"BR":"BL";break;}});return _361;};dijit.getPopupAroundAlignment=function(_362,_363){var _364={};dojo.forEach(_362,function(pos){switch(pos){case "after":_364[_363?"BR":"BL"]=_363?"BL":"BR";break;case "before":_364[_363?"BL":"BR"]=_363?"BR":"BL";break;case "below":_364[_363?"BL":"BR"]=_363?"TL":"TR";_364[_363?"BR":"BL"]=_363?"TR":"TL";break;case "above":default:_364[_363?"TL":"TR"]=_363?"BL":"BR";_364[_363?"TR":"TL"]=_363?"BR":"BL";break;}});return _364;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){if(dojo.isIE&&window!==document.parentWindow&&!doc._parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc._parentWindow||doc.parentWindow||doc.defaultView;};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var _365=[],_366=1000,_367=1;this.moveOffScreen=function(node){var s=node.style;s.visibility="hidden";s.position="absolute";s.top="-9999px";if(s.display=="none"){s.display="";}dojo.body().appendChild(node);};var _368=function(){for(var pi=_365.length-1;pi>0&&_365[pi].parent===_365[pi-1].widget;pi--){}return _365[pi];};var _369=[];this.open=function(args){var _36a=args.popup,_36b=args.orient||(dojo._isBodyLtr()?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_36c=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+_367++);var _36d=_369.pop(),_36e,_36f;if(!_36d){_36e=dojo.create("div",{"class":"dijitPopup"},dojo.body());dijit.setWaiRole(_36e,"presentation");}else{_36e=_36d[0];_36f=_36d[1];}dojo.attr(_36e,{id:id,style:{zIndex:_366+_365.length,visibility:"hidden",top:"-9999px"},dijitPopupParent:args.parent?args.parent.id:""});var s=_36a.domNode.style;s.display="";s.visibility="";s.position="";s.top="0px";_36e.appendChild(_36a.domNode);if(!_36f){_36f=new dijit.BackgroundIframe(_36e);}else{_36f.resize(_36e);}var best=_36c?dijit.placeOnScreenAroundElement(_36e,_36c,_36b,_36a.orient?dojo.hitch(_36a,"orient"):null):dijit.placeOnScreen(_36e,args,_36b=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_36e.style.visibility="visible";var _370=[];_370.push(dojo.connect(_36e,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _371=_368();if(_371&&_371.onCancel){_371.onCancel();}}}}));if(_36a.onCancel){_370.push(dojo.connect(_36a,"onCancel",args.onCancel));}_370.push(dojo.connect(_36a,_36a.onExecute?"onExecute":"onChange",function(){var _372=_368();if(_372&&_372.onExecute){_372.onExecute();}}));_365.push({wrapper:_36e,iframe:_36f,widget:_36a,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_370});if(_36a.onOpen){_36a.onOpen(best);}return best;};this.close=function(_373){while(dojo.some(_365,function(elem){return elem.widget==_373;})){var top=_365.pop(),_374=top.wrapper,_375=top.iframe,_376=top.widget,_377=top.onClose;if(_376.onClose){_376.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_376&&_376.domNode){this.moveOffScreen(_376.domNode);}_374.style.top="-9999px";_374.style.visibility="hidden";_369.push([_374,_375]);if(_377){_377();}}};}();dijit._frames=new function(){var _378=[];this.pop=function(){var _379;if(_378.length){_379=_378.pop();_379.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_379=dojo.doc.createElement(html);}else{_379=dojo.create("iframe");_379.src="javascript:\"\"";_379.className="dijitBackgroundIframe";dojo.style(_379,"opacity",0.1);}_379.tabIndex=-1;}return _379;};this.push=function(_37a){_37a.style.display="none";_378.push(_37a);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _37b=dijit._frames.pop();node.appendChild(_37b);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_37b,{width:"100%",height:"100%"});}this.iframe=_37b;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _37c=doc.compatMode=="BackCompat",_37d=_37c?body:html,_37e=isWK?body:_37d,_37f=_37d.clientWidth,_380=_37d.clientHeight,rtl=!dojo._isBodyLtr(),_381=pos||dojo.position(node),el=node.parentNode,_382=function(el){return ((isIE<=6||(isIE&&_37c))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_382(node)){return;}while(el){if(el==body){el=_37e;}var _383=dojo.position(el),_384=_382(el);with(_383){if(el==_37e){w=_37f,h=_380;if(_37e==html&&isIE&&rtl){x+=_37e.offsetWidth-w;}if(x<0||!isIE){x=0;}if(y<0||!isIE){y=0;}}else{var pb=dojo._getPadBorderExtents(el);w-=pb.w;h-=pb.h;x+=pb.l;y+=pb.t;}with(el){if(el!=_37e){var _385=clientWidth,_386=w-_385;if(_385>0&&_386>0){w=_385;if(isIE&&rtl){x+=_386;}}_385=clientHeight;_386=h-_385;if(_385>0&&_386>0){h=_385;}}if(_384){if(y<0){h+=y,y=0;}if(x<0){w+=x,x=0;}if(y+h>_380){h=_380-y;}if(x+w>_37f){w=_37f-x;}}var l=_381.x-x,t=_381.y-Math.max(y,0),r=l+_381.w-w,bot=t+_381.h-h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_381.x+=scrollLeft;scrollLeft+=(isIE>=8&&!_37c&&rtl)?-s:s;_381.x-=scrollLeft;}if(bot*t>0){_381.y+=scrollTop;scrollTop+=Math[t<0?"max":"min"](t,bot);_381.y-=scrollTop;}}}el=(el!=_37e)&&!_384&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_387=d.isOpera,maj=Math.floor,ff=d.isFF,_388=d.boxModel.replace(/-/,""),_389={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_iequirks:ie&&d.isQuirks,dj_opera:_387,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_389["dj_"+_388]=true;for(var p in _389){if(_389[p]){if(html.className){html.className+=" "+p;}else{html.className=p;}}}dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){html.className+=" dijitRtl";for(var p in _389){if(_389[p]){html.className+=" "+p+"-rtl";}}}});})();}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),10);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_38a,node,_38b,obj,_38c,_38d){if(obj!=this._obj){this.stop();this._initialDelay=_38d||500;this._subsequentDelay=_38c||0.9;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_38a,_38b);this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_38e,_38f,_390,_391,_392){if(_38e.keyCode){_38e.charOrCode=_38e.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_38e.charCode){_38e.charOrCode=String.fromCharCode(_38e.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_38e.charOrCode&&(_38e.ctrlKey===undefined||_38e.ctrlKey==evt.ctrlKey)&&(_38e.altKey===undefined||_38e.altKey==evt.altKey)&&(_38e.metaKey===undefined||_38e.metaKey==(evt.metaKey||false))&&(_38e.shiftKey===undefined||_38e.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(_38e,_38f,node,_390,_38e,_391,_392);}else{if(dijit.typematic._obj==_38e){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_38e){dijit.typematic.stop();}})];},addMouseListener:function(node,_393,_394,_395,_396){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_393,node,_394,node,_395,_396);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){dojo.stopEvent(evt);}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_393,node,_394,node,_395,_396);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_397,_398,_399,_39a,_39b,_39c,_39d){return this.addKeyListener(_398,_399,_39a,_39b,_39c,_39d).concat(this.addMouseListener(_397,_39a,_39b,_39c,_39d));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _39e=cs.backgroundImage;var _39f=(cs.borderTopColor==cs.borderRightColor)||(_39e!=null&&(_39e=="none"||_39e=="url(invalid-url:)"));dojo[_39f?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _3a0=this.getWaiRole(elem);return role?(_3a0.indexOf(role)>-1):(_3a0.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _3a1=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_3a1)){dojo.attr(elem,"role",role);}else{if((" "+_3a1+" ").indexOf(" "+role+" ")<0){var _3a2=dojo.trim(_3a1.replace(this._XhtmlRoles,""));var _3a3=dojo.trim(_3a1.replace(_3a2,""));dojo.attr(elem,"role",_3a3+(_3a3?" ":"")+role);}}},removeWaiRole:function(elem,role){var _3a4=dojo.attr(elem,"role");if(!_3a4){return;}if(role){var t=dojo.trim((" "+_3a4+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_3a5){return elem.hasAttribute?elem.hasAttribute("aria-"+_3a5):!!elem.getAttribute("aria-"+_3a5);},getWaiState:function(elem,_3a6){return elem.getAttribute("aria-"+_3a6)||"";},setWaiState:function(elem,_3a7,_3a8){elem.setAttribute("aria-"+_3a7,_3a8);},removeWaiState:function(elem,_3a9){elem.removeAttribute("aria-"+_3a9);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_3aa,_3ab){if(_3aa&&dojo.isFunction(_3aa._onConnect)){_3aa._onConnect(_3ab);}});dijit._connectOnUseEventHandler=function(_3ac){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _3ad=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_3ad);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_3ad);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _3ae={},_3af=function(_3b0){var dc=_3b0.declaredClass;if(!_3ae[dc]){var r=[],_3b1,_3b2=_3b0.constructor.prototype;for(var _3b3 in _3b2){if(dojo.isFunction(_3b2[_3b3])&&(_3b1=_3b3.match(/^_set([a-zA-Z]*)Attr$/))&&_3b1[1]){r.push(_3b1[1].charAt(0).toLowerCase()+_3b1[1].substr(1));}}_3ae[dc]=r;}return _3ae[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_3b4,_3b5){this.create(_3b4,_3b5);},create:function(_3b6,_3b7){this.srcNodeRef=dojo.byId(_3b7);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_3b6){this.params=_3b6;dojo.mixin(this,_3b6);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _3b8=this.srcNodeRef;if(_3b8&&_3b8.parentNode){_3b8.parentNode.replaceChild(this.domNode,_3b8);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _3b9=function(attr,_3ba){if((_3ba.params&&attr in _3ba.params)||_3ba[attr]){_3ba.attr(attr,_3ba[attr]);}};for(var attr in this.attributeMap){_3b9(attr,this);}dojo.forEach(_3af(this),function(a){if(!(a in this.attributeMap)){_3b9(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_3bb){this._beingDestroyed=true;this.destroyDescendants(_3bb);this.destroy(_3bb);},destroy:function(_3bc){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_3bd){dfe(_3bd,d.disconnect);});dfe(this._subscribes,function(_3be){dun(_3be);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_3bc);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_3bf){if(this.bgIframe){this.bgIframe.destroy(_3bf);delete this.bgIframe;}if(this.domNode){if(_3bf){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_3bf){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_3c0){dojo.forEach(this.getChildren(),function(_3c1){if(_3c1.destroyRecursive){_3c1.destroyRecursive(_3c0);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_3c2){if(_3c2 in this._deferredConnects){var _3c3=this[this._deferredConnects[_3c2]||"domNode"];this.connect(_3c3,_3c2.toLowerCase(),_3c2);delete this._deferredConnects[_3c2];}},_setClassAttr:function(_3c4){var _3c5=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_3c5,this["class"]);this["class"]=_3c4;dojo.addClass(_3c5,_3c4);},_setStyleAttr:function(_3c6){var _3c7=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_3c6)){dojo.style(_3c7,_3c6);}else{if(_3c7.style.cssText){_3c7.style.cssText+="; "+_3c6;}else{_3c7.style.cssText=_3c6;}}this.style=_3c6;},setAttribute:function(attr,_3c8){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(attr,_3c8);},_attrToDom:function(attr,_3c9){var _3ca=this.attributeMap[attr];dojo.forEach(dojo.isArray(_3ca)?_3ca:[_3ca],function(_3cb){var _3cc=this[_3cb.node||_3cb||"domNode"];var type=_3cb.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_3c9)){_3c9=dojo.hitch(this,_3c9);}var _3cd=_3cb.attribute?_3cb.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_3cc,_3cd,_3c9);break;case "innerText":_3cc.innerHTML="";_3cc.appendChild(dojo.doc.createTextNode(_3c9));break;case "innerHTML":_3cc.innerHTML=_3c9;break;case "class":dojo.removeClass(_3cc,this[attr]);dojo.addClass(_3cc,_3c9);break;}},this);this[attr]=_3c9;},attr:function(name,_3ce){var args=arguments.length;if(args==1&&!dojo.isString(name)){for(var x in name){this.attr(x,name[x]);}return this;}var _3cf=this._getAttrNames(name);if(args>=2){if(this[_3cf.s]){args=dojo._toArray(arguments,1);return this[_3cf.s].apply(this,args)||this;}else{if(name in this.attributeMap){this._attrToDom(name,_3ce);}this[name]=_3ce;}return this;}else{return this[_3cf.g]?this[_3cf.g]():this[name];}},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_3d0,_3d1){var d=dojo,dc=d._connect,_3d2=[];if(_3d0=="ondijitclick"){if(!this.nodesWithKeyClick[obj.tagName.toLowerCase()]){var m=d.hitch(this,_3d1);_3d2.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;d.stopEvent(e);}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_3d0="onclick";}_3d2.push(dc(obj,_3d0,this,_3d1));this._connects.push(_3d2);return _3d2;},disconnect:function(_3d3){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_3d3){dojo.forEach(_3d3,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_3d4,_3d5){var d=dojo,_3d6=d.subscribe(_3d4,this,_3d5);this._subscribes.push(_3d6);return _3d6;},unsubscribe:function(_3d7){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_3d7){dojo.unsubscribe(_3d7);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_3d8,_3d9){if(_3d8.declaredClass&&_3d8.addChild){_3d8.addChild(this,_3d9);}else{dojo.place(this.domNode,_3d8,_3d9);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){}});})();}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_3da,_3db){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3dc=dojo.date.stamp._isoRegExp.exec(_3da),_3dd=null;if(_3dc){_3dc.shift();if(_3dc[1]){_3dc[1]--;}if(_3dc[6]){_3dc[6]*=1000;}if(_3db){_3db=new Date(_3db);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _3db["get"+prop]();}).forEach(function(_3de,_3df){if(_3dc[_3df]===undefined){_3dc[_3df]=_3de;}});}_3dd=new Date(_3dc[0]||1970,_3dc[1]||0,_3dc[2]||1,_3dc[3]||0,_3dc[4]||0,_3dc[5]||0,_3dc[6]||0);if(_3dc[0]<100){_3dd.setFullYear(_3dc[0]||1970);}var _3e0=0,_3e1=_3dc[7]&&_3dc[7].charAt(0);if(_3e1!="Z"){_3e0=((_3dc[8]||0)*60)+(Number(_3dc[9])||0);if(_3e1!="-"){_3e0*=-1;}}if(_3e1){_3e0-=_3dd.getTimezoneOffset();}if(_3e0){_3dd.setTime(_3dd.getTime()+_3e0*60000);}}return _3dd;};dojo.date.stamp.toISOString=function(_3e2,_3e3){var _3e4=function(n){return (n<10)?"0"+n:n;};_3e3=_3e3||{};var _3e5=[],_3e6=_3e3.zulu?"getUTC":"get",date="";if(_3e3.selector!="time"){var year=_3e2[_3e6+"FullYear"]();date=["0000".substr((year+"").length)+year,_3e4(_3e2[_3e6+"Month"]()+1),_3e4(_3e2[_3e6+"Date"]())].join("-");}_3e5.push(date);if(_3e3.selector!="date"){var time=[_3e4(_3e2[_3e6+"Hours"]()),_3e4(_3e2[_3e6+"Minutes"]()),_3e4(_3e2[_3e6+"Seconds"]())].join(":");var _3e7=_3e2[_3e6+"Milliseconds"]();if(_3e3.milliseconds){time+="."+(_3e7<100?"0":"")+_3e4(_3e7);}if(_3e3.zulu){time+="Z";}else{if(_3e3.selector!="time"){var _3e8=_3e2.getTimezoneOffset();var _3e9=Math.abs(_3e8);time+=(_3e8>0?"-":"+")+_3e4(Math.floor(_3e9/60))+":"+_3e4(_3e9%60);}}_3e5.push(time);}return _3e5.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _3ea(_3eb){if(d.isString(_3eb)){return "string";}if(typeof _3eb=="number"){return "number";}if(typeof _3eb=="boolean"){return "boolean";}if(d.isFunction(_3eb)){return "function";}if(d.isArray(_3eb)){return "array";}if(_3eb instanceof Date){return "date";}if(_3eb instanceof d._Url){return "url";}return "object";};function _3ec(_3ed,type){switch(type){case "string":return _3ed;case "number":return _3ed.length?Number(_3ed):NaN;case "boolean":return typeof _3ed=="boolean"?_3ed:!(_3ed.toLowerCase()=="false");case "function":if(d.isFunction(_3ed)){_3ed=_3ed.toString();_3ed=d.trim(_3ed.substring(_3ed.indexOf("{")+1,_3ed.length-1));}try{if(_3ed.search(/[^\w\.]+/i)!=-1){return new Function(_3ed);}else{return d.getObject(_3ed,false);}}catch(e){return new Function();}case "array":return _3ed?_3ed.split(/\s*,\s*/):[];case "date":switch(_3ed){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_3ed);}case "url":return d.baseUrl+_3ed;default:return d.fromJson(_3ed);}};var _3ee={};dojo.connect(dojo,"extend",function(){_3ee={};});function _3ef(_3f0){if(!_3ee[_3f0]){var cls=d.getObject(_3f0);if(!d.isFunction(cls)){throw new Error("Could not load class '"+_3f0+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");}var _3f1=cls.prototype;var _3f2={},_3f3={};for(var name in _3f1){if(name.charAt(0)=="_"){continue;}if(name in _3f3){continue;}var _3f4=_3f1[name];_3f2[name]=_3ea(_3f4);}_3ee[_3f0]={cls:cls,params:_3f2};}return _3ee[_3f0];};this._functionFromScript=function(_3f5){var _3f6="";var _3f7="";var _3f8=_3f5.getAttribute("args");if(_3f8){d.forEach(_3f8.split(/\s*,\s*/),function(part,idx){_3f6+="var "+part+" = arguments["+idx+"]; ";});}var _3f9=_3f5.getAttribute("with");if(_3f9&&_3f9.length){d.forEach(_3f9.split(/\s*,\s*/),function(part){_3f6+="with("+part+"){";_3f7+="}";});}return new Function(_3f6+_3f5.innerHTML+_3f7);};this.instantiate=function(_3fa,_3fb,args){var _3fc=[],dp=dojo.parser;_3fb=_3fb||{};args=args||{};d.forEach(_3fa,function(node){if(!node){return;}var type=dp._attrName in _3fb?_3fb[dp._attrName]:node.getAttribute(dp._attrName);if(!type||!type.length){return;}var _3fd=_3ef(type),_3fe=_3fd.cls,ps=_3fe._noScript||_3fe.prototype._noScript;var _3ff={},_400=node.attributes;for(var name in _3fd.params){var item=name in _3fb?{value:_3fb[name],specified:true}:_400.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _401=item.value;switch(name){case "class":_401="className" in _3fb?_3fb.className:node.className;break;case "style":_401="style" in _3fb?_3fb.style:(node.style&&node.style.cssText);}var _402=_3fd.params[name];if(typeof _401=="string"){_3ff[name]=_3ec(_401,_402);}else{_3ff[name]=_401;}}if(!ps){var _403=[],_404=[];d.query("> script[type^='dojo/']",node).orphan().forEach(function(_405){var _406=_405.getAttribute("event"),type=_405.getAttribute("type"),nf=d.parser._functionFromScript(_405);if(_406){if(type=="dojo/connect"){_403.push({event:_406,func:nf});}else{_3ff[_406]=nf;}}else{_404.push(nf);}});}var _407=_3fe.markupFactory||_3fe.prototype&&_3fe.prototype.markupFactory;var _408=_407?_407(_3ff,node,_3fe):new _3fe(_3ff,node);_3fc.push(_408);var _409=node.getAttribute("jsId");if(_409){d.setObject(_409,_408);}if(!ps){d.forEach(_403,function(_40a){d.connect(_408,_40a.event,null,_40a.func);});d.forEach(_404,function(func){func.call(_408);});}});if(!_3fb._started){d.forEach(_3fc,function(_40b){if(!args.noStart&&_40b&&_40b.startup&&!_40b._started&&(!_40b.getParent||!_40b.getParent())){_40b.startup();}});}return _3fc;};this.parse=function(_40c,args){var root;if(!args&&_40c&&_40c.rootNode){args=_40c;root=args.rootNode;}else{root=_40c;}var list=d.query(this._query,root);return this.instantiate(list,null,args);};}();(function(){var _40d=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_40d);}else{dojo._loaders.unshift(_40d);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _40e={};dojo.cache=function(_40f,url,_410){if(typeof _40f=="string"){var _411=dojo.moduleUrl(_40f,url);}else{_411=_40f;_410=url;}var key=_411.toString();var val=_410;if(_410!==undefined&&!dojo.isString(_410)){val=("value" in _410?_410.value:undefined);}var _412=_410&&_410.sanitize?true:false;if(val||val===null){if(val==null){delete _40e[key];}else{val=_40e[key]=_412?dojo.cache._sanitize(val):val;}}else{if(!(key in _40e)){val=dojo._getText(key);_40e[key]=_412?dojo.cache._sanitize(val):val;}val=_40e[key];}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _413=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_413){val=_413[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];},_stringRepl:function(tmpl){var _414=this.declaredClass,_415=this;return dojo.string.substitute(tmpl,this,function(_416,key){if(key.charAt(0)=="!"){_416=dojo.getObject(key.substr(1),false,_415);}if(typeof _416=="undefined"){throw new Error(_414+" template:"+key);}if(_416==null){return "";}return key.charAt(0)=="!"?_416:_416.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _417=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_417)){node=dojo._toDom(this._stringRepl(_417));if(node.nodeType!=1){throw new Error("Invalid template: "+_417);}}else{node=_417.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _418=dojo.parser,qry,attr;if(_418._query!="[dojoType]"){qry=_418._query;attr=_418._attrName;_418._query="[dojoType]";_418._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup}));if(qry){_418._query=qry;_418._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_419){var dest=this.containerNode;if(_419&&dest){while(_419.hasChildNodes()){dest.appendChild(_419.firstChild);}}},_attachTemplateNodes:function(_41a,_41b){_41b=_41b||function(n,p){return n.getAttribute(p);};var _41c=dojo.isArray(_41a)?_41a:(_41a.all||_41a.getElementsByTagName("*"));var x=dojo.isArray(_41a)?0:-1;for(;x<_41c.length;x++){var _41d=(x==-1)?_41a:_41c[x];if(this.widgetsInTemplate&&_41b(_41d,"dojoType")){continue;}var _41e=_41b(_41d,"dojoAttachPoint");if(_41e){var _41f,_420=_41e.split(/\s*,\s*/);while((_41f=_420.shift())){if(dojo.isArray(this[_41f])){this[_41f].push(_41d);}else{this[_41f]=_41d;}this._attachPoints.push(_41f);}}var _421=_41b(_41d,"dojoAttachEvent");if(_421){var _422,_423=_421.split(/\s*,\s*/);var trim=dojo.trim;while((_422=_423.shift())){if(_422){var _424=null;if(_422.indexOf(":")!=-1){var _425=_422.split(":");_422=trim(_425[0]);_424=trim(_425[1]);}else{_422=trim(_422);}if(!_424){_424=_422;}this.connect(_41d,_422,_424);}}}var role=_41b(_41d,"waiRole");if(role){dijit.setWaiRole(_41d,role);}var _426=_41b(_41d,"waiState");if(_426){dojo.forEach(_426.split(/\s*,\s*/),function(_427){if(_427.indexOf("-")!=-1){var pair=_427.split("-");dijit.setWaiState(_41d,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_428){delete this[_428];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_429,_42a,_42b){var _42c=dijit._Templated._templateCache;var key=_42a||_429;var _42d=_42c[key];if(_42d){try{if(!_42d.ownerDocument||_42d.ownerDocument==dojo.doc){return _42d;}}catch(e){}dojo.destroy(_42d);}if(!_42a){_42a=dojo.cache(_429,{sanitize:true});}_42a=dojo.string.trim(_42a);if(_42b||_42a.match(/\$\{([^\}]+)\}/g)){return (_42c[key]=_42a);}else{var node=dojo._toDom(_42a);if(node.nodeType!=1){throw new Error("Invalid template: "+_42a);}return (_42c[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _42e=dijit._Templated._templateCache;for(var key in _42e){var _42f=_42e[key];if(typeof _42f=="object"){dojo.destroy(_42f);}delete _42e[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_430,_431,_432){if(this.aroundNode&&this.aroundNode===_431){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_430;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var pos=dijit.placeOnScreenAroundElement(this.domNode,_431,dijit.getPopupAroundAlignment((_432&&_432.length)?_432:dijit.Tooltip.defaultPosition,this.isLeftToRight()),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_431;},orient:function(node,_433,_434){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_433+"-"+_434];},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_435){if(this._onDeck&&this._onDeck[1]==_435){this._onDeck=null;}else{if(this.aroundNode===_435){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_436,_437,_438){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_436,_437,_438);};dijit.hideTooltip=function(_439){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_439);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={};},_setConnectIdAttr:function(_43a){for(var _43b in this._nodeConnectionsById){this.removeTarget(_43b);}dojo.forEach(dojo.isArrayLike(_43a)?_43a:[_43a],this.addTarget,this);},_getConnectIdAttr:function(){var ary=[];for(var id in this._nodeConnectionsById){ary.push(id);}return ary;},addTarget:function(id){var node=dojo.byId(id);if(!node){return;}if(node.id in this._nodeConnectionsById){return;}this._nodeConnectionsById[node.id]=[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")];if(dojo.isIE&&!node.style.zoom){node.style.zoom=1;}},removeTarget:function(node){var id=node.id||node;if(id in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[id],this.disconnect,this);delete this._nodeConnectionsById[id];}},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _43c=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_43c);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_43d){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_43d,this.position);this._connectNode=_43d;this.onShow(_43d,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_43e,_43f){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dojox.lang.functional.scan"]){dojo._hasResource["dojox.lang.functional.scan"]=true;dojo.provide("dojox.lang.functional.scan");(function(){var d=dojo,df=dojox.lang.functional,_440={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _440)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_441=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(var i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(var i in a){if(!(i in _440)){if(_441){t=[z=a[i]];_441=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});})();}if(!dojo._hasResource["dojox.charting.action2d.Tooltip"]){dojo._hasResource["dojox.charting.action2d.Tooltip"]=true;dojo.provide("dojox.charting.action2d.Tooltip");(function(){var _442=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var df=dojox.lang.functional,pi4=Math.PI/4,pi2=Math.PI/2;dojo.declare("dojox.charting.action2d.Tooltip",dojox.charting.action2d.Base,{defaultParams:{text:_442},optionalParams:{},constructor:function(_443,plot,_444){this.text=_444&&_444.text?_444.text:_442;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){dijit.hideTooltip(this.aroundRect);this.aroundRect=null;return;}if(!o.shape||o.type!=="onmouseover"){return;}var _445={type:"rect"},_446=["after","before"];switch(o.element){case "marker":_445.x=o.cx;_445.y=o.cy;_445.width=_445.height=1;break;case "circle":_445.x=o.cx-o.cr;_445.y=o.cy-o.cr;_445.width=_445.height=2*o.cr;break;case "column":_446=["above","below"];case "bar":_445=dojo.clone(o.shape.getShape());break;case "candlestick":_445.x=o.x;_445.y=o.y;_445.width=o.width;_445.height=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _447=(this.angles[o.index]+this.angles[o.index+1])/2;_445.x=o.cx+o.cr*Math.cos(_447);_445.y=o.cy+o.cr*Math.sin(_447);_445.width=_445.height=1;if(_447<pi4){}else{if(_447<pi2+pi4){_446=["below","above"];}else{if(_447<Math.PI+pi4){_446=["before","after"];}else{if(_447<2*Math.PI-pi4){_446=["above","below"];}}}}break;}var lt=dojo.coords(this.chart.node,true);_445.x+=lt.x;_445.y+=lt.y;_445.x=Math.round(_445.x);_445.y=Math.round(_445.y);_445.width=Math.ceil(_445.width);_445.height=Math.ceil(_445.height);this.aroundRect=_445;dijit.showTooltip(this.text(o),this.aroundRect,_446);}});})();}if(!dojo._hasResource["dojox.charting.themes.Grasshopper"]){dojo._hasResource["dojox.charting.themes.Grasshopper"]=true;dojo.provide("dojox.charting.themes.Grasshopper");(function(){var dxc=dojox.charting;dxc.themes.Grasshopper=new dxc.Theme({colors:["#208040","#40b657","#78c25e","#14401f","#64bd5f"]});})();}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var _448=dijit.getEnclosingWidget(this.domNode.parentNode);return _448&&_448.isContainer?_448:null;},_getSibling:function(_449){var node=this.domNode;do{node=node[_449+"Sibling"];}while(node&&node.nodeType!=1);return node&&dijit.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_44a,_44b){var _44c=this.containerNode;if(_44b&&typeof _44b=="number"){var _44d=this.getChildren();if(_44d&&_44d.length>=_44b){_44c=_44d[_44b-1].domNode;_44b="after";}}dojo.place(_44a.domNode,_44c,_44b);if(this._started&&!_44a._started){_44a.startup();}},removeChild:function(_44e){if(typeof _44e=="number"&&_44e>0){_44e=this.getChildren()[_44e];}if(_44e&&_44e.domNode){var node=_44e.domNode;node.parentNode.removeChild(node);}},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode);},hasChildren:function(){return dojo.query("> [widgetId]",this.containerNode).length>0;},destroyDescendants:function(_44f){dojo.forEach(this.getChildren(),function(_450){_450.destroyRecursive(_44f);});},_getSiblingOfChild:function(_451,dir){var node=_451.domNode,_452=(dir>0?"nextSibling":"previousSibling");do{node=node[_452];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_453){return dojo.indexOf(this.getChildren(),_453);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_454){_454.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass);this.inherited(arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);var _455=this.getParent&&this.getParent();if(!(_455&&_455.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize();});}},resize:function(_456,_457){var node=this.domNode;if(_456){dojo.marginBox(node,_456);if(_456.t){node.style.top=_456.t+"px";}if(_456.l){node.style.left=_456.l+"px";}}var mb=_457||{};dojo.mixin(mb,_456||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(node),mb);}var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_458){dojo.addClass(_458.domNode,this.baseClass+"-child");if(_458.baseClass){dojo.addClass(_458.domNode,this.baseClass+"-"+_458.baseClass);}},addChild:function(_459,_45a){this.inherited(arguments);if(this._started){this._setupChild(_459);}},removeChild:function(_45b){dojo.removeClass(_45b.domNode,this.baseClass+"-child");if(_45b.baseClass){dojo.removeClass(_45b.domNode,this.baseClass+"-"+_45b.baseClass);}this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return {l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _45c=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_45d,dim){_45d.resize?_45d.resize(dim):dojo.marginBox(_45d.domNode,dim);dojo.mixin(_45d,dojo.marginBox(_45d.domNode));dojo.mixin(_45d,dim);};dijit.layout.layoutChildren=function(_45e,dim,_45f){dim=dojo.mixin({},dim);dojo.addClass(_45e,"dijitLayoutContainer");_45f=dojo.filter(_45f,function(item){return item.layoutAlign!="client";}).concat(dojo.filter(_45f,function(item){return item.layoutAlign=="client";}));dojo.forEach(_45f,function(_460){var elm=_460.domNode,pos=_460.layoutAlign;var _461=elm.style;_461.left=dim.l+"px";_461.top=dim.t+"px";_461.bottom=_461.right="auto";dojo.addClass(elm,"dijitAlign"+_45c(pos));if(pos=="top"||pos=="bottom"){size(_460,{w:dim.w});dim.h-=_460.h;if(pos=="top"){dim.t+=_460.h;}else{_461.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){size(_460,{h:dim.h});dim.w-=_460.w;if(pos=="left"){dim.l+=_460.w;}else{_461.left=dim.l+dim.w+"px";}}else{if(pos=="client"){size(_460,dim);}}}});};})();}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var _462=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _463=cont.length,i=0;i<cont.length;i=_463==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_464,node){dojo.mixin(this,_464||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_462++].join("_");}if(!(this.node||node)){new Error(this.declaredClass+": no node provided to "+this.id);}},set:function(cont,_465){if(undefined!==cont){this.content=cont;}if(_465){this._mixin(_465);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){console.error("setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _466=this.onContentError(e);try{node.innerHTML=_466;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _467=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_467){cont=_467[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_468){var _469={},key;for(key in _468){if(key in _469){continue;}this[key]=_468[key];}},_parse:function(){var _46a=this.node;try{this.parseResults=dojo.parser.parse(_46a,true);}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_46b){var _46c=this["on"+type+"Error"].call(this,err);if(_46b){console.error(_46b,err);}else{if(_46c){dojo.html._setNodeContent(this.node,_46c,true);}}}});dojo.html.set=function(node,cont,_46d){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_46d){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_46d,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(_46e,_46f,_470){_470=dojo.i18n.normalizeLocale(_470);var _471=_470.split("-");var _472=[_46e,"nls",_46f].join(".");var _473=dojo._loadedModules[_472];if(_473){var _474;for(var i=_471.length;i>0;i--){var loc=_471.slice(0,i).join("_");if(_473[loc]){_474=_473[loc];break;}}if(!_474){_474=_473.ROOT;}if(_474){var _475=function(){};_475.prototype=_474;return new _475();}}throw new Error("Bundle not found: "+_46f+" in "+_46e+" , locale="+_470);};dojo.i18n.normalizeLocale=function(_476){var _477=_476?_476.toLowerCase():dojo.locale;if(_477=="root"){_477="ROOT";}return _477;};dojo.i18n._requireLocalization=function(_478,_479,_47a,_47b){var _47c=dojo.i18n.normalizeLocale(_47a);var _47d=[_478,"nls",_479].join(".");var _47e="";if(_47b){var _47f=_47b.split(",");for(var i=0;i<_47f.length;i++){if(_47c["indexOf"](_47f[i])==0){if(_47f[i].length>_47e.length){_47e=_47f[i];}}}if(!_47e){_47e="ROOT";}}var _480=_47b?_47e:_47c;var _481=dojo._loadedModules[_47d];var _482=null;if(_481){if(dojo.config.localizationComplete&&_481._built){return;}var _483=_480.replace(/-/g,"_");var _484=_47d+"."+_483;_482=dojo._loadedModules[_484];}if(!_482){_481=dojo["provide"](_47d);var syms=dojo._getModuleSymbols(_478);var _485=syms.concat("nls").join("/");var _486;dojo.i18n._searchLocalePath(_480,_47b,function(loc){var _487=loc.replace(/-/g,"_");var _488=_47d+"."+_487;var _489=false;if(!dojo._loadedModules[_488]){dojo["provide"](_488);var _48a=[_485];if(loc!="ROOT"){_48a.push(loc);}_48a.push(_479);var _48b=_48a.join("/")+".js";_489=dojo._loadPath(_48b,null,function(hash){var _48c=function(){};_48c.prototype=_486;_481[_487]=new _48c();for(var j in hash){_481[_487][j]=hash[j];}});}else{_489=true;}if(_489&&_481[_487]){_486=_481[_487];}else{_481[_487]=_486;}if(_47b){return true;}});}if(_47b&&_47c!=_47e){_481[_47c.replace(/-/g,"_")]=_481[_47e.replace(/-/g,"_")];}};(function(){var _48d=dojo.config.extraLocale;if(_48d){if(!_48d instanceof Array){_48d=[_48d];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_48e,_48f){req(m,b,_48e,_48f);if(_48e){return;}for(var i=0;i<_48d.length;i++){req(m,b,_48d[i],_48f);}};}})();dojo.i18n._searchLocalePath=function(_490,down,_491){_490=dojo.i18n.normalizeLocale(_490);var _492=_490.split("-");var _493=[];for(var i=_492.length;i>0;i--){_493.push(_492.slice(0,i).join("-"));}_493.push(false);if(down){_493.reverse();}for(var j=_493.length-1;j>=0;j--){var loc=_493[j]||"ROOT";var stop=_491(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_494,_495){function _496(_497){_497=dojo.i18n.normalizeLocale(_497);dojo.i18n._searchLocalePath(_497,true,function(loc){for(var i=0;i<_495.length;i++){if(_495[i]==loc){dojo["require"](_494+"_"+loc);return true;}}return false;});};_496();var _498=dojo.config.extraLocale||[];for(var i=0;i<_498.length;i++){_496(_498[i]);}};}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,isLayoutContainer:true,onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),postMixInProperties:function(){this.inherited(arguments);var _499=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_499);this.errorMessage=dojo.string.substitute(this.errorMessage,_499);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true;}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},postCreate:function(){this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}dojo.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}var _49a=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=_49a&&_49a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;if(this.isLoaded){dojo.forEach(this.getChildren(),function(_49b){_49b.startup();});}if(this._isShown()||this.preload){this._onShow();}this.inherited(arguments);},_checkIfSingleChild:function(){var _49c=dojo.query("> *",this.containerNode).filter(function(node){return node.tagName!=="SCRIPT";}),_49d=_49c.filter(function(node){return dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId");}),_49e=dojo.filter(_49d.map(dijit.byNode),function(_49f){return _49f&&_49f.domNode&&_49f.resize;});if(_49c.length==_49d.length&&_49e.length==1){this._singleChild=_49e[0];}else{delete this._singleChild;}dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.","","2.0");return this.attr("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.href=href;if(this._created&&(this.preload||this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",data);},_setContentAttr:function(data){this.href="";this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(_4a0){if(this._beingDestroyed){return;}this.inherited(arguments);},resize:function(_4a1,_4a2){if(!this._wasShown){this._onShow();}this._resizeCalled=true;if(_4a1){dojo.marginBox(this.domNode,_4a1);}var cn=this.containerNode;if(cn===this.domNode){var mb=_4a2||{};dojo.mixin(mb,_4a1||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(cn),mb);}this._contentBox=dijit.layout.marginBox2contentBox(cn,mb);}else{this._contentBox=dojo.contentBox(cn);}this._layoutChildren();},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!dojo.hasClass(node,"dijitHidden");}}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){this.refresh();}}else{if(!this._childOfLayoutWidget&&this._needLayout){this._layoutChildren();}}this.inherited(arguments);this._wasShown=true;},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _4a3={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_4a3,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_4a3));hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});delete this._hrefChanged;},_onLoadHandler:function(data){this.isLoaded=true;try{this.onLoadDeferred.callback(data);this.onLoad(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _4a4=this._contentSetter;dojo.forEach(this.getChildren(),function(_4a5){if(_4a5.destroyRecursive){_4a5.destroyRecursive();}});if(_4a4){dojo.forEach(_4a4.parseResults,function(_4a6){if(_4a6.destroyRecursive&&_4a6.domNode&&_4a6.domNode.parentNode==dojo.body()){_4a6.destroyRecursive();}});delete _4a4.parseResults;}dojo.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(cont,_4a7){this.destroyDescendants();var _4a8=this._contentSetter;if(!(_4a8&&_4a8 instanceof dojo.html._ContentSetter)){_4a8=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _4a9=this.onContentError(e);try{this.containerNode.innerHTML=_4a9;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _4aa=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(_4a8,_4aa);_4a8.set((dojo.isObject(cont)&&cont.domNode)?cont.domNode:cont);delete this._contentSetterParams;if(!_4a7){dojo.forEach(this.getChildren(),function(_4ab){if(!this.parseOnLoad||_4ab.getParent){_4ab.startup();}},this);this._scheduleLayout();this._onLoadHandler(cont);}},_onError:function(type,err,_4ac){this.onLoadDeferred.errback(err);var _4ad=this["on"+type+"Error"].call(this,err);if(_4ac){console.error(_4ac,err);}else{if(_4ad){this._setContent(_4ad,true);}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren();}else{this._needLayout=true;}},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_4ae){if(_4ae.resize){_4ae.resize();}});}delete this._needLayout;},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_4af){},onDownloadError:function(_4b0){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd.getCopyKeyState=dojo.isCopyKeyPressed;dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId);}while(dojo.byId(id));return id;};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var d=dojo.doc,dd=d.documentElement,w=window,b=dojo.body();if(dojo.isMozilla){return {w:dd.clientWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&w.innerWidth){return {w:w.innerWidth,h:w.innerHeight};}else{if(!dojo.isOpera&&dd&&dd.clientWidth){return {w:dd.clientWidth,h:dd.clientHeight};}else{if(b.clientWidth){return {w:b.clientWidth,h:b.clientHeight};}}}}return null;};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.dnd.getViewport(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft,ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _4b1=n.scrollLeft,_4b2=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_4b1!=n.scrollLeft||_4b2!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=dojo.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=this.host=host,d=node.ownerDocument,_4b3=dojo.connect(d,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent),_4b3];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY});dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left));t=Math.round(parseFloat(s.top));break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this);}dojo.disconnect(this.events.pop());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_4b4){this.node=dojo.byId(node);if(!_4b4){_4b4={};}this.handle=_4b4.handle?dojo.byId(_4b4.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_4b4.delay>0?_4b4.delay:0;this.skip=_4b4.skip;this.mover=_4b4.mover?_4b4.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_4b5,node){return new dojo.dnd.Moveable(node,_4b5);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_4b6){dojo.publish("/dnd/move/start",[_4b6]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_4b7){dojo.publish("/dnd/move/stop",[_4b7]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_4b8){},onMove:function(_4b9,_4ba){this.onMoving(_4b9,_4ba);var s=_4b9.node.style;s.left=_4ba.l+"px";s.top=_4ba.t+"px";this.onMoved(_4b9,_4ba);},onMoving:function(_4bb,_4bc){},onMoved:function(_4bd,_4be){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_4bf,node){return new dojo.dnd.move.constrainedMoveable(node,_4bf);},constructor:function(node,_4c0){if(!_4c0){_4c0={};}this.constraints=_4c0.constraints;this.within=_4c0.within;},onFirstMove:function(_4c1){var c=this.constraintBox=this.constraints.call(this,_4c1);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo.marginBox(_4c1.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_4c2,_4c3){var c=this.constraintBox,s=_4c2.node.style;s.left=(_4c3.l<c.l?c.l:c.r<_4c3.l?c.r:_4c3.l)+"px";s.top=(_4c3.t<c.t?c.t:c.b<_4c3.t?c.b:_4c3.t)+"px";}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_4c4,node){return new dojo.dnd.move.boxConstrainedMoveable(node,_4c4);},constructor:function(node,_4c5){var box=_4c5&&_4c5.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_4c6,node){return new dojo.dnd.move.parentConstrainedMoveable(node,_4c6);},constructor:function(node,_4c7){var area=_4c7&&_4c7.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.move.constrainedMover=function(fun,_4c8){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var _4c9=function(node,e,_4ca){dojo.dnd.Mover.call(this,node,e,_4ca);};dojo.extend(_4c9,dojo.dnd.Mover.prototype);dojo.extend(_4c9,{onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,c=this.constraintBox,l=m.l+e.pageX,t=m.t+e.pageY;l=l<c.l?c.l:c.r<l?c.r:l;t=t<c.t?c.t:c.b<t?c.b:t;this.host.onMove(this,{l:l,t:t});},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var c=this.constraintBox=fun.call(this);c.r=c.l+c.w;c.b=c.t+c.h;if(_4c8){var mb=dojo.marginBox(this.node);c.r-=mb.w;c.b-=mb.h;}}});return _4c9;};dojo.dnd.move.boxConstrainedMover=function(box,_4cb){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return box;},_4cb);};dojo.dnd.move.parentConstrainedMover=function(area,_4cc){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var fun=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};return dojo.dnd.move.constrainedMover(fun,_4cc);};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _4cd=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,_4ce){if(!_4ce){_4ce={};}if(_4ce.timeout&&typeof _4ce.timeout=="number"&&_4ce.timeout>=0){this.timeout=_4ce.timeout;}},markupFactory:function(_4cf,node){return new dojo.dnd.TimedMoveable(node,_4cf);},onMoveStop:function(_4d0){if(_4d0._timer){clearTimeout(_4d0._timer);_4cd.call(this,_4d0,_4d0._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_4d1,_4d2){_4d1._leftTop=_4d2;if(!_4d1._timer){var _4d3=this;_4d1._timer=setTimeout(function(){_4d1._timer=null;_4cd.call(_4d3,_4d1,_4d1._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(_4d4){if(_4d4.reset){_4d4.reset();}});},validate:function(){var _4d5=false;return dojo.every(dojo.map(this.getDescendants(),function(_4d6){_4d6._hasBeenBlurred=true;var _4d7=_4d6.disabled||!_4d6.validate||_4d6.validate();if(!_4d7&&!_4d5){dijit.scrollIntoView(_4d6.containerNode||_4d6.domNode);_4d6.focus();_4d5=true;}return _4d7;}),function(item){return item;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_4d8){if(!_4d8.name){return;}var _4d9=map[_4d8.name]||(map[_4d8.name]=[]);_4d9.push(_4d8);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _4da=map[name],_4db=dojo.getObject(name,false,obj);if(_4db===undefined){continue;}if(!dojo.isArray(_4db)){_4db=[_4db];}if(typeof _4da[0].checked=="boolean"){dojo.forEach(_4da,function(w,i){w.attr("value",dojo.indexOf(_4db,w.value)!=-1);});}else{if(_4da[0].multiple){_4da[0].attr("value",_4db);}else{dojo.forEach(_4da,function(w,i){w.attr("value",_4db[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_4dc){var name=_4dc.name;if(!name||_4dc.disabled){return;}var _4dd=_4dc.attr("value");if(typeof _4dc.checked=="boolean"){if(/Radio/.test(_4dc.declaredClass)){if(_4dd!==false){dojo.setObject(name,_4dd,obj);}else{_4dd=dojo.getObject(name,false,obj);if(_4dd===undefined){dojo.setObject(name,null,obj);}}}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj);}if(_4dd!==false){ary.push(_4dd);}}}else{var prev=dojo.getObject(name,false,obj);if(typeof prev!="undefined"){if(dojo.isArray(prev)){prev.push(_4dd);}else{dojo.setObject(name,[prev,_4dd],obj);}}else{dojo.setObject(name,_4dd,obj);}}});return obj;},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(_4de){return !_4de.disabled&&_4de.isValid&&!_4de.isValid();});return !this._invalidWidgets.length;},onValidStateChange:function(_4df){},_widgetChange:function(_4e0){var _4e1=this._lastValidState;if(!_4e0||this._lastValidState===undefined){_4e1=this.isValid();if(this._lastValidState===undefined){this._lastValidState=_4e1;}}else{if(_4e0.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(w){return (w!=_4e0);},this);if(!_4e0.isValid()&&!_4e0.attr("disabled")){this._invalidWidgets.push(_4e0);}_4e1=(this._invalidWidgets.length===0);}}if(_4e1!==this._lastValidState){this._lastValidState=_4e1;this.onValidStateChange(_4e1);}},connectChildren:function(){dojo.forEach(this._changeConnections,dojo.hitch(this,"disconnect"));var _4e2=this;var _4e3=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(item){return item.validate;}),function(_4e4){_4e3.push(_4e2.connect(_4e4,"validate",dojo.hitch(_4e2,"_widgetChange",_4e4)));_4e3.push(_4e2.connect(_4e4,"_setDisabledAttr",dojo.hitch(_4e2,"_widgetChange",_4e4)));});this._widgetChange(null);},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren();}});}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_4e5){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"));},_getFocusItems:function(_4e6){var _4e7=dijit._getTabNavigable(dojo.byId(_4e6));this._firstFocusItem=_4e7.lowest||_4e7.first||_4e6;this._lastFocusItem=_4e7.last||_4e7.highest||this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.getNodeProp(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(_4e6,"tabIndex","0");this._firstFocusItem=_4e6;}}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");},_setClassAttr:function(_4e8){this.node.className="dijitDialogUnderlay "+_4e8;},postCreate:function(){dojo.body().appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _4e9=dijit.getViewport();os.top=_4e9.t+"px";os.left=_4e9.l+"px";is.width=_4e9.w+"px";is.height=_4e9.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode);},hide:function(){this.bgIframe.destroy();this.domNode.style.display="none";},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html","<div waiRole=\"presentation\">\n\t<div class=\"dijitTooltipContainer\" waiRole=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" tabindex=\"-1\" waiRole=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" waiRole=\"presentation\"></div>\n</div>\n"),postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title;},orient:function(node,_4ea,_4eb){var c=this._currentOrientClass;if(c){dojo.removeClass(this.domNode,c);}c="dijitTooltipAB"+(_4eb.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_4eb.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,c);this._currentOrientClass=c;},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);}},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _4ec=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_4ec){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_4ec){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:dojo.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog\" tabindex=\"-1\" waiRole=\"dialog\" waiState=\"labelledby-${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave\" title=\"${buttonCancel}\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _4ed=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_4ed);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=dojo.position(e.node);}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};this._fadeIn=dojo.fadeIn({node:node,duration:this.duration,beforeBegin:dojo.hitch(this,function(){var _4ee=dijit._underlay;if(!_4ee){_4ee=dijit._underlay=new dijit.DialogUnderlay(this.underlayAttrs);}else{_4ee.attr(this.underlayAttrs);}var _4ef=948+dijit._dialogStack.length*2;dojo.style(dijit._underlay.domNode,"zIndex",_4ef);dojo.style(this.domNode,"zIndex",_4ef+1);_4ee.show();}),onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}})});this._fadeOut=dojo.fadeOut({node:node,duration:this.duration,onEnd:dojo.hitch(this,function(){node.style.display="none";var ds=dijit._dialogStack;if(ds.length==0){dijit._underlay.hide();}else{dojo.style(dijit._underlay.domNode,"zIndex",948+ds.length*2);dijit._underlay.attr(ds[ds.length-1].underlayAttrs);}if(this.refocus){var _4f0=this._savedFocus;if(ds.length>0){var pd=ds[ds.length-1];if(!dojo.isDescendant(_4f0.node,pd.domNode)){pd._getFocusItems(pd.domNode);_4f0=pd._firstFocusItem;}}dijit.focus(_4f0);}})});},uninitialize:function(){var _4f1=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){_4f1=true;this._fadeIn.stop();}if(this._fadeOut&&this._fadeOut.status()=="playing"){_4f1=true;this._fadeOut.stop();}if((this.open||_4f1)&&!dijit._underlay._destroyed){dijit._underlay.hide();}if(this._moveable){this._moveable.destroy();}this.inherited(arguments);},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{dojo.style(this.containerNode,{width:"auto",height:"auto"});}var mb=dojo.marginBox(this.domNode);var _4f2=dijit.getViewport();if(mb.w>=_4f2.w||mb.h>=_4f2.h){var w=Math.min(mb.w,Math.floor(_4f2.w*0.75)),h=Math.min(mb.h,Math.floor(_4f2.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode,_4f3=dijit.getViewport(),p=this._relativePosition,bb=p?null:dojo._getBorderBox(node),l=Math.floor(_4f3.l+(p?p.x:(_4f3.w-bb.w)/2)),t=Math.floor(_4f3.t+(p?p.y:(_4f3.h-bb.h)/2));dojo.style(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){var ds=dijit._dialogStack;if(ds[ds.length-1]!=this){return;}if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _4f4=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_4f4){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_4f4){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOut.status()=="playing"){this._fadeOut.stop();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _4f5=dijit.getViewport();if(!this._oldViewport||_4f5.h!=this._oldViewport.h||_4f5.w!=this._oldViewport.w){this.layout();this._oldViewport=_4f5;}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this.open=true;this._onShow();this._size();this._position();dijit._dialogStack.push(this);this._fadeIn.play();this._savedFocus=dijit.getFocus(this);},hide:function(){var ds=dijit._dialogStack;if(!this._alreadyInitialized||this!=ds[ds.length-1]){return;}if(this._fadeIn.status()=="playing"){this._fadeIn.stop();}ds.pop();this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this.open=false;this.onHide();},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay){dijit._underlay.layout();}this._position();}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);if(this.refocus&&this.open){setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25);}this.inherited(arguments);},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._dialogStack=[];}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},_setDisabledAttr:function(_4f6){this.disabled=_4f6;dojo.attr(this.focusNode,"disabled",_4f6);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_4f6);}dijit.setWaiState(this.focusNode,"disabled",_4f6);if(_4f6){this._hovering=false;this._active=false;this.focusNode.setAttribute("tabIndex","-1");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}this._setStateClass();},setDisabled:function(_4f7){dojo.deprecated("setDisabled("+_4f7+") is deprecated. Use attr('disabled',"+_4f7+") instead.","","2.0");this.attr("disabled",_4f7);},_onFocus:function(e){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode);}this.inherited(arguments);},_onMouse:function(_4f8){var _4f9=_4f8.currentTarget;if(_4f9&&_4f9.getAttribute){this.stateModifier=_4f9.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_4f8.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _4fa=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus();}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_4fa);});break;}this._setStateClass();}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},_setStateClass:function(){var _4fb=this.baseClass.split(" ");function _4fc(_4fd){_4fb=_4fb.concat(dojo.map(_4fb,function(c){return c+_4fd;}),"dijit"+_4fd);};if(this.checked){_4fc("Checked");}if(this.state){_4fc(this.state);}if(this.selected){_4fc("Selected");}if(this.disabled){_4fc("Disabled");}else{if(this.readOnly){_4fc("ReadOnly");}else{if(this._active){_4fc(this.stateModifier+"Active");}else{if(this._focused){_4fc("Focused");}if(this._hovering){_4fc(this.stateModifier+"Hover");}}}}var tn=this.stateNode||this.domNode,_4fe={};dojo.forEach(tn.className.split(" "),function(c){_4fe[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _4fe[c];});}dojo.forEach(_4fb,function(c){_4fe[c]=true;});var _4ff=[];for(var c in _4fe){_4ff.push(c);}tn.className=_4ff.join(" ");this._stateClasses=_4fb;},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_500){},_onChangeActive:false,_handleOnChange:function(_501,_502){this._lastValue=_501;if(this._lastValueReported==undefined&&(_502===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_501;}if((this.intermediateChanges||_502||_502===undefined)&&((typeof _501!=typeof this._lastValueReported)||this.compare(_501,this._lastValueReported)!=0)){this._lastValueReported=_501;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_501);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass();},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_503){dojo.deprecated("dijit.form._FormWidget:setValue("+_503+") is deprecated.  Use attr('value',"+_503+") instead.","","2.0");this.attr("value",_503);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_504){this.readOnly=_504;dojo.attr(this.focusNode,"readOnly",_504);dijit.setWaiState(this.focusNode,"readonly",_504);this._setStateClass();},postCreate:function(){if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_505,_506){this.value=_505;this._handleOnChange(_505,_506);},_getValueAttr:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _507=this.domNode;var _508=_507.parentNode;var _509=_507.firstChild||_507;var _50a=_509.style.filter;while(_508&&_508.clientHeight==0){_508._disconnectHandle=this.connect(_508,"onscroll",dojo.hitch(this,function(e){this.disconnect(_508._disconnectHandle);_508.removeAttribute("_disconnectHandle");_509.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_509.style.filter=_50a;},0);}));_508=_508.parentNode;}}}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouse:function(e){if(e.type=="click"&&!this._seenKeydown){return;}this._seenKeydown=false;if(e.type=="mousedown"){this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseup");}if(this.disabled||this.readOnly){return;}if(this._stopClickEvents){dojo.stopEvent(e);}this.toggleDropDown();if(e.type=="click"||e.type=="keypress"){this._onDropDownMouseup();}},_onDropDownMouseup:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _50b=this.dropDown,_50c=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_50c){if(dojo.hasClass(t,"dijitPopup")){_50c=true;}else{t=t.parentNode;}}if(_50c){t=e.target;if(_50b.onItemClick){var _50d;while(t&&!(_50d=dijit.byNode(t))){t=t.parentNode;}if(_50d&&_50d.onClick&&_50d.getParent){_50d.getParent().onItemClick(_50d,e);}}return;}}}if(this._opened&&_50b.focus){window.setTimeout(dojo.hitch(_50b,"focus"),1);}},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown","_onDropDownMouse");this.connect(this._buttonNode,"onclick","_onDropDownMouse");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");this.connect(this._buttonNode,"onblur","_onDropDownBlur");this.connect(this._buttonNode,"onkeypress","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass");}var _50e={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_50e+"ArrowButton");},postCreate:function(){this._setupDropdown();this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onDropDownKeydown:function(e){this._seenKeydown=true;},_onKeyPress:function(e){if(this._opened&&e.charOrCode==dojo.keys.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.toggleDropDown();dojo.stopEvent(e);return;}this.inherited(arguments);},_onDropDownBlur:function(e){this._seenKeydown=false;},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){return;}}if(d&&this._opened&&e.keyCode==dojo.keys.ESCAPE){this.toggleDropDown();return;}if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.charOrCode==" "){this._onDropDownMouse(e);}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_50f){_50f();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}this.focus();var _510=this.dropDown;if(!_510){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _511=this.dropDown;var _512=_511.domNode;var self=this;if(!this._preparedNode){dijit.popup.moveOffScreen(_512);this._preparedNode=true;if(_512.style.width){this._explicitDDWidth=true;}if(_512.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _513={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_513.width="";}if(!this._explicitDDHeight){_513.height="";}dojo.style(_512,_513);var mb=dojo.marginBox(_512);var _514=(this.maxHeight&&mb.h>this.maxHeight);dojo.style(_512,{overflow:_514?"auto":"hidden"});if(this.forceWidth){mb.w=this.domNode.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,this.domNode.offsetWidth);}else{delete mb.w;}}if(_514){mb.h=this.maxHeight;if("w" in mb){mb.w+=16;}}else{delete mb.h;}delete mb.t;delete mb.l;if(dojo.isFunction(_511.resize)){_511.resize(mb);}else{dojo.marginBox(_512,mb);}}var _515=dijit.popup.open({parent:this,popup:_511,around:this._aroundNode,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;self.state="";}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return _515;},closeDropDown:function(_516){if(this._opened){dijit.popup.close(this.dropDown);if(_516){this.focus();}this._opened=false;this.state="";}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><span class=\"dijitReset dijitRight dijitInline\"\n\t\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\t\tdojoAttachPoint=\"titleNode,focusNode\"\n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\" waiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\"\n\t\t\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#10003;</span\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\t\tid=\"${id}_label\"\n\t\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t\t></span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!this.focusNode.form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _517=dijit.byNode(node);if(_517&&typeof _517._onSubmit=="function"){_517._onSubmit(e);break;}}}}},_setValueAttr:function(_518){var attr=this.attributeMap.value||"";if(this[attr.node||attr||"domNode"].tagName=="BUTTON"){if(_518!=this.value){console.debug("Cannot change the value attribute on a Button widget.");}}},_fillContent:function(_519){if(_519&&(!this.params||!("label" in this.params))){this.attr("label",_519.innerHTML);}},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments);},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this.showLabel=val;},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_51a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_51a);},_setLabelAttr:function(_51b){this.containerNode.innerHTML=this.label=_51b;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitLeft dijitInline\"\n\tdojoAttachPoint=\"_buttonNode\"\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\n\t><span class='dijitReset dijitRight dijitInline'\n\t\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\t\t${nameAttrSetting} type=\"${type}\" value=\"${value}\"\n\t\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t\t\t><span class=\"dijitReset dijitInline\"\n\t\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\t\tid=\"${id}_label\"\n\t\t\t\t></span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\">&thinsp;</span\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _51c=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_51c[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _51d=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_51d);delete this.dropDownContainer;}dijit.popup.moveOffScreen(this.dropDown.domNode);this.inherited(arguments);},isLoaded:function(){var _51e=this.dropDown;return (!_51e.href||_51e.isLoaded);},loadDropDown:function(){var _51f=this.dropDown;if(!_51f){return;}if(!this.isLoaded()){var _520=dojo.connect(_51f,"onLoad",this,function(){dojo.disconnect(_520);this.openDropDown();});_51f.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class='dijit dijitReset dijitInline dijitLeft'\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\"><button id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onkeypress:_onButtonKeyPress\"  dojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\n\t\t></button></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onkeypress:_onArrowKeyPress\"\n\t\t\tstateModifier=\"DownArrow\"\n\t\t\ttitle=\"${optionsTitle}\" ${nameAttrSetting}\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\">&thinsp;</div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this._popupStateNode];var isIE=dojo.isIE;dojo.forEach(this._focalNodes,dojo.hitch(this,function(node){this.connect(node,isIE?"onactivate":"onfocus",this._onNodeFocus);this.connect(node,isIE?"ondeactivate":"onblur",this._onNodeBlur);}));if(isIE&&(isIE<8||dojo.isQuirks)){with(this.titleNode){style.width=scrollWidth+"px";this.connect(this.titleNode,"onresize",function(){setTimeout(function(){style.width=scrollWidth+"px";},0);});}}},_onNodeFocus:function(evt){this._focusedNode=evt.currentTarget;var fnc=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,fnc);},_onNodeBlur:function(evt){var fnc=evt.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(evt.currentTarget,fnc);},_onBlur:function(){this.inherited(arguments);this._focusedNode=null;},_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_521){dijit.focus(_521=="start"?this.titleNode:this._popupStateNode);}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.attr("checked",!this.checked);},_setCheckedAttr:function(_522){this.checked=_522;dojo.attr(this.focusNode||this.domNode,"checked",_522);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_522);this._setStateClass();this._handleOnChange(_522,true);},setChecked:function(_523){dojo.deprecated("setChecked("+_523+") is deprecated. Use attr('checked',"+_523+") instead.","","2.0");this.attr("checked",_523);},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_524){var _525=dojo.doc.createElement("span");this.domNode.appendChild(_525);var cls=dojo.getObject(this.buttonWidget);var _526=new cls({id:this.id+"_"+page.id,label:page.title,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip},_525);dijit.setWaiState(_526.focusNode,"selected","false");this.pane2handles[page.id]=[this.connect(page,"attr",function(name,_527){if(arguments.length==2){var _528={title:"label",showTitle:"showLabel",iconClass:"iconClass",closable:"closeButton",tooltip:"title"}[name];if(_528){_526.attr(_528,_527);}}}),this.connect(_526,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_526,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_526,_524);this.pane2button[page.id]=_526;page.controlButton=_526;if(!this._currentChild){_526.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_526.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2handles[page.id],this.disconnect,this);delete this.pane2handles[page.id];var _529=this.pane2button[page.id];if(_529){this.removeChild(_529);delete this.pane2button[page.id];_529.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _52a=this.pane2button[this._currentChild.id];_52a.attr("checked",false);dijit.setWaiState(_52a.focusNode,"selected","false");_52a.focusNode.setAttribute("tabIndex","-1");}var _52b=this.pane2button[page.id];_52b.attr("checked",true);dijit.setWaiState(_52b.focusNode,"selected","true");this._currentChild=page;_52b.focusNode.setAttribute("tabIndex","0");var _52c=dijit.byId(this.containerId);dijit.setWaiState(_52c.containerNode,"labelledby",_52b.id);},onButtonClick:function(page){var _52d=dijit.byId(this.containerId);_52d.selectChild(page);},onCloseButtonClick:function(page){var _52e=dijit.byId(this.containerId);_52e.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_52f){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_52f=!_52f;}var _530=this.getChildren();var _531=dojo.indexOf(_530,this.pane2button[this._currentChild.id]);var _532=_52f?1:_530.length-1;return _530[(_531+_532)%_530.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _533=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_533=false;}break;case k.PAGE_UP:if(e.ctrlKey){_533=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_533=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_533=true;}break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_533!==null){this.adjacent(_533).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(evt){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments);},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _534=this.getChildren();dojo.forEach(_534,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_534,function(_535){if(_535.selected){this.selectedChildWidget=_535;}return _535.selected;},this);}var _536=this.selectedChildWidget;if(!_536&&_534[0]){_536=this.selectedChildWidget=_534[0];_536.selected=true;}dojo.publish(this.id+"-startup",[{children:_534,selected:_536}]);this.inherited(arguments);},resize:function(){var _537=this.selectedChildWidget;if(_537&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_537);}this.inherited(arguments);},_setupChild:function(_538){this.inherited(arguments);dojo.removeClass(_538.domNode,"dijitVisible");dojo.addClass(_538.domNode,"dijitHidden");_538.domNode.title="";},addChild:function(_539,_53a){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_539,_53a]);this.layout();if(!this.selectedChildWidget){this.selectChild(_539);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this._started){this.layout();}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _53b=this.getChildren();if(_53b.length){this.selectChild(_53b[0]);}}}},selectChild:function(page){page=dijit.byId(page);if(this.selectedChildWidget!=page){this._transition(page,this.selectedChildWidget);this.selectedChildWidget=page;dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}},_transition:function(_53c,_53d){if(_53d){this._hideChild(_53d);}this._showChild(_53c);if(_53c.resize){if(this.doLayout){_53c.resize(this._containerContentBox||this._contentBox);}else{_53c.resize();}}},_adjacent:function(_53e){var _53f=this.getChildren();var _540=dojo.indexOf(_53f,this.selectedChildWidget);_540+=_53e?1:_53f.length-1;return _53f[_540%_53f.length];},forward:function(){this.selectChild(this._adjacent(true));},back:function(){this.selectChild(this._adjacent(false));},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox);}},_showChild:function(page){var _541=this.getChildren();page.isFirstChild=(page==_541[0]);page.isLastChild=(page==_541[_541.length-1]);page.selected=true;dojo.removeClass(page.domNode,"dijitHidden");dojo.addClass(page.domNode,"dijitVisible");page._onShow();},_hideChild:function(page){page.selected=false;dojo.removeClass(page.domNode,"dijitVisible");dojo.addClass(page.domNode,"dijitHidden");page.onHide();},closeChild:function(page){var _542=page.onClose(this,page);if(_542){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_543){dojo.forEach(this.getChildren(),function(_544){this.removeChild(_544);_544.destroyRecursive(_543);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true,onClose:function(){return true;}});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _545=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_545;var _546=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_545},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_546);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_546[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){this.tablist.resize({w:dojo.contentBox(this.domNode).w});}if(sc&&sc.resize){sc.resize();}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_547,_548){var _549=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_547,function(code){_549[code]=prev;});dojo.forEach(_548,function(code){_549[code]=next;});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_54a,_54b){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_54a);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _54c=this._getFirstFocusableChild();if(_54c){this.focusChild(_54c);}},focusNext:function(){var _54d=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_54d);},focusPrev:function(){var _54e=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_54e,true);},focusChild:function(_54f,last){if(this.focusedChild&&_54f!==this.focusedChild){this._onChildBlur(this.focusedChild);}_54f.focus(last?"end":"start");this.focusedChild=_54f;},_startupChild:function(_550){_550.attr("tabIndex","-1");this.connect(_550,"_onFocus",function(){_550.attr("tabIndex",this.tabIndex);});this.connect(_550,"_onBlur",function(){_550.attr("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_551){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getNextFocusableChild:function(_552,dir){if(_552){_552=this._getSiblingOfChild(_552,dir);}var _553=this.getChildren();for(var i=0;i<_553.length;i++){if(!_552){_552=_553[(dir>0)?0:(_553.length-1)];}if(_552.isFocusable()){return _552;}_552=this._getSiblingOfChild(_552,dir);}return null;}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\">\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_554){if(_554&&!("label" in this.params)){this.attr("label",_554.innerHTML);}},postCreate:function(){dojo.setSelectable(this.domNode,false);var _555=this.id+"_text";dojo.attr(this.containerNode,"id",_555);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_555+=" "+this.id+"_accel";}dijit.setWaiState(this.domNode,"labelledby",_555);},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this);},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_556){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_556);},setLabel:function(_557){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_557);},setDisabled:function(_558){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_558);},_setDisabledAttr:function(_559){this.disabled=_559;dojo[_559?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",_559?"true":"false");},_setAccelKeyAttr:function(_55a){this.accelKey=_55a;this.accelKeyNode.style.display=_55a?"":"none";this.accelKeyNode.innerHTML=_55a;dojo.attr(this.containerNode,"colSpan",_55a?"1":"2");}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _55b=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_55b[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset\" waiRole=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\">\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">\n\t</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_55c){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_55c);dijit.setWaiState(this.domNode,"checked",_55c);this.checked=_55c;},onChange:function(_55d){},_onClick:function(e){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td colspan=\"4\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_55e){_55e.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_55f){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _560=this._getTopMenu();if(_560&&_560._isMenuBar){_560.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _561=this.currentPopup.parentMenu;if(_561.focusedChild){_561.focusedChild._setSelected(false);}_561.focusedChild=this.currentPopup.from_item;_561.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _562=item.popup;if(_562){this._stopPendingCloseTimer(_562);_562._pendingClose_timer=setTimeout(function(){_562._pendingClose_timer=null;if(_562.parentMenu){_562.parentMenu.currentPopup=null;}dijit.popup.close(_562);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_563){if(_563._pendingClose_timer){clearTimeout(_563._pendingClose_timer);_563._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(item.disabled){return false;}if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _564=this.focusedChild;if(!_564){return;}var _565=_564.popup;if(_565.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_565.parentMenu=this;_565.from_item=_564;var self=this;dijit.popup.open({parent:this,popup:_565,around:_564.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_564);self._cleanUp();_564._setSelected(true);self.focusedChild=_564;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_565;_565.connect(_565.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_565.focus){_565._focus_timer=setTimeout(dojo.hitch(_565,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}if(this.currentPopup){dijit.popup.close(this.currentPopup);this.currentPopup=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" waiRole=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_566){var win=dijit.getDocumentWindow(this._iframeContentDocument(_566))||this._iframeContentDocument(_566)["__parent__"]||(_566.name&&dojo.doc.frames[_566.name])||null;return win;},_iframeContentDocument:function(_567){var doc=_567.contentDocument||(_567.contentWindow&&_567.contentWindow.document)||(_567.name&&dojo.doc.frames[_567.name]&&dojo.doc.frames[_567.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _568=node,win=this._iframeContentWindow(_568);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _569={node:node,iframe:_568};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_569));var _56a=dojo.hitch(this,function(cn){return [dojo.connect(cn,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,function(evt){this._openMyself(evt,cn,_568);}),dojo.connect(cn,"onkeydown",this,"_contextKey"),dojo.connect(cn,"onmousedown",this,"_contextMouse")];});_569.connects=cn?_56a(cn):[];if(_568){_569.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_568);cn=dojo.withGlobal(win,dojo.body);_569.connects=_56a(cn);});if(_568.addEventListener){_568.addEventListener("load",_569.onloadHandler,false);}else{_568.attachEvent("onload",_569.onloadHandler);}}},unBindDomNode:function(_56b){var node;try{node=dojo.byId(_56b);}catch(e){return;}var _56c="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_56c)){var bid=dojo.attr(node,_56c)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _56d=b.iframe;if(_56d){if(_56d.removeEventListener){_56d.removeEventListener("load",b.onloadHandler,false);}else{_56d.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_56c);delete this._bindings[bid];}},_contextKey:function(e){this._contextMenuWithMouse=false;if(e.keyCode==dojo.keys.F10){dojo.stopEvent(e);if(e.shiftKey&&e.type=="keydown"){var _56e={target:e.target,pageX:e.pageX,pageY:e.pageY};_56e.preventDefault=_56e.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(_56e);}),1);}}},_contextMouse:function(e){this._contextMenuWithMouse=true;},_openMyself:function(e,node,_56f){if(this.leftClickToOpen&&e.button>0){return;}dojo.stopEvent(e);var x,y;if(dojo.isSafari||this._contextMenuWithMouse){x=e.pageX;y=e.pageY;if(_56f){var od=e.target.ownerDocument,ifc=dojo.position(_56f,true),win=this._iframeContentWindow(_56f),_570=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_56f),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_56f,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_56f,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_56f,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_56f,cs.borderTopWidth):0);x+=ifc.x+left-_570.x;y+=ifc.y+top-_570.y;}}else{var _571=dojo.position(e.target,true);x=_571.x+10;y=_571.y+10;}var self=this;var _572=dijit.getFocus(this);function _573(){if(self.refocus){dijit.focus(_572);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:x,y:y,onExecute:_573,onCancel:_573,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _574=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_574=Math.max(_574,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_574+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div waiRole=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent,focusNode'>\n\t        <img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='iconNode' waiRole=\"presentation\"/>\n\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t        <span class=\"closeButton\" dojoAttachPoint='closeNode'\n\t        \t\tdojoAttachEvent='onclick: onClickCloseButton, onmouseenter: _onCloseButtonEnter, onmouseleave: _onCloseButtonLeave'>\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeIcon' class='closeImage' waiRole=\"presentation\"/>\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\n\t        </span>\n        </div>\n    </div>\n</div>\n"),scrollOnFocus:false,postMixInProperties:function(){if(!this.iconClass){this.iconClass="dijitTabButtonIcon";}},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);if(this.iconNode.className=="dijitTabButtonIcon"){dojo.style(this.iconNode,"width","1px");}},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this.closeButton=disp;dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _575=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_575.itemClose);if(dojo.isIE<8){dojo.attr(this.closeIcon,"title",_575.itemClose);}}var _575=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_575.itemClose,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);},_onCloseButtonEnter:function(){dojo.addClass(this.closeNode,"closeButton-hover");},_onCloseButtonLeave:function(){dojo.removeClass(this.closeNode,"closeButton-hover");}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"menuBtn\" buttonClass=\"tabStripMenuButton\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_menuBtn\" showLabel=false>&darr;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"leftBtn\" buttonClass=\"tabStripSlideButtonLeft\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=false>&larr;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\" buttonType=\"rightBtn\" buttonClass=\"tabStripSlideButtonRight\"\n\t\t\ttabPosition=\"${tabPosition}\" dojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=false>&rarr;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'>\n\t\t</div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),postCreate:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_576){this.inherited(arguments);var _577;if(this.useMenu){_577=new dijit.MenuItem({label:page.title,onClick:dojo.hitch(this,function(){this.onSelectChild(page);})});this._menuChildren[page.id]=_577;this._menu.addChild(_577,_576);}this.pane2handles[page.id].push(this.connect(this.pane2button[page.id],"attr",function(name,_578){if(this._postStartup){if(arguments.length==2&&name=="label"){if(_577){_577.attr(name,_578);}if(this._dim){this.resize(this._dim);}}}}));dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_579){var _57a=this.pane2button[page.id];if(this._selectedTab===_57a.domNode){this._selectedTab=null;}if(this.useMenu&&page&&page.id&&this._menuChildren[page.id]){this._menu.removeChild(this._menuChildren[page.id]);this._menuChildren[page.id].destroy();delete this._menuChildren[page.id];}this.inherited(arguments);},_initButtons:function(){this._menuChildren={};this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo.marginBox(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);if(this.useMenu){this._menu=new dijit.Menu({id:this.id+"_menu",targetNodeIds:[this._menuBtn.domNode],leftClickToOpen:true,refocus:false});this._supportingWidgets.push(this._menu);}},_getTabsWidth:function(){var _57b=this.getChildren();if(_57b.length){var _57c=_57b[this.isLeftToRight()?0:_57b.length-1].domNode,_57d=_57b[this.isLeftToRight()?_57b.length-1:0].domNode;return _57d.offsetLeft+dojo.style(_57d,"width")-_57c.offsetLeft;}else{return 0;}},_enableBtn:function(_57e){var _57f=this._getTabsWidth();_57e=_57e||dojo.style(this.scrollNode,"width");return _57f>0&&_57e<_57f;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _580=this._enableBtn(this._contentBox.w);this._buttons.style("display",_580?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8||dojo.isQuirks||dojo.isWebKit)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8||dojo.isQuirks||dojo.isWebKit){return val;}else{var _581=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_581);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){this.createSmoothScroll().play();}}this.inherited(arguments);},_getScrollBounds:function(){var _582=this.getChildren(),_583=dojo.style(this.scrollNode,"width"),_584=dojo.style(this.containerNode,"width"),_585=_584-_583,_586=this._getTabsWidth();if(_582.length&&_586>_583){return {min:this.isLeftToRight()?0:_582[_582.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_582[_582.length-1].domNode.offsetLeft+dojo.style(_582[_582.length-1].domNode,"width"))-_583:_585};}else{var _587=this.isLeftToRight()?0:_585;return {min:_587,max:_587};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_588=dojo.style(this.scrollNode,"width"),_589=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_588/2;pos=Math.min(Math.max(pos,_589.min),_589.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _58a=this._getScrollBounds();x=Math.min(Math.max(x,_58a.min),_58a.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_58b,node){if(node&&dojo.hasClass(node,"dijitTabBtnDisabled")){return;}var _58c=dojo.style(this.scrollNode,"width");var d=(_58c*0.75)*_58b;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_58d){var cls="dijitTabBtnDisabled",_58e=this._getScrollBounds();dojo.toggleClass(this._leftBtn.domNode,cls,_58d<=_58e.min);dojo.toggleClass(this._rightBtn.domNode,cls,_58d>=_58e.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButton",dijit.form.Button,{baseClass:"dijitTab",buttonType:"",buttonClass:"",tabPosition:"top",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div id=\"${id}-${buttonType}\" class=\"tabStripButton dijitTab ${buttonClass} tabStripButton-${tabPosition}\"\n\t\tdojoAttachEvent=\"onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\">\n\t<div role=\"presentation\" wairole=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" wairole=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img src=\"${_blankGif}\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:""});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_58f){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_590=dojo.getObject(this.controllerWidget);return new _590({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_58f);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_591){var _592=dojo.doc;var doc;_591=_591||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _593=new DOMParser();doc=_593.parseFromString(str,_591);var de=doc.documentElement;var _594="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_594){var _595=de.getElementsByTagNameNS(_594,"sourcetext")[0];if(!_595){_595=_595.firstChild.data;}throw new Error("Error parsing text "+nativeDoc.documentElement.firstChild.data+" \n"+_595);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_592.implementation&&_592.implementation.createDocument){if(str&&dojo.trim(str)&&_592.createElement){var tmp=_592.createElement("xml");tmp.innerHTML=str;var _596=_592.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_597){_596.importNode(_597,true);});return _596;}else{return _592.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _598=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_598.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _599="";if(node){dojo.forEach(node.childNodes,function(_59a){switch(_59a.nodeType){case 1:case 5:_599+=dojox.xml.parser.textContent(_59a);break;case 3:case 2:case 4:_599+=_59a.nodeValue;}});}return _599;}};dojox.xml.parser.replaceChildren=function(node,_59b){var _59c=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_59d){_59c.push(_59d);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_59c,dojo.destroy);if(!dojo.isArray(_59b)){node.appendChild(_59b);}else{dojo.forEach(_59b,function(_59e){node.appendChild(_59e);});}};dojox.xml.parser.removeChildren=function(node){var _59f=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _59f;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.data.dom"]){dojo._hasResource["dojox.data.dom"]=true;dojo.provide("dojox.data.dom");dojo.deprecated("dojox.data.dom","Use dojox.xml.parser instead.","2.0");dojox.data.dom.createDocument=function(str,_5a0){dojo.deprecated("dojox.data.dom.createDocument()","Use dojox.xml.parser.parse() instead.","2.0");try{return dojox.xml.parser.parse(str,_5a0);}catch(e){return null;}};dojox.data.dom.textContent=function(node,text){dojo.deprecated("dojox.data.dom.textContent()","Use dojox.xml.parser.textContent() instead.","2.0");if(arguments.length>1){return dojox.xml.parser.textContent(node,text);}else{return dojox.xml.parser.textContent(node);}};dojox.data.dom.replaceChildren=function(node,_5a1){dojo.deprecated("dojox.data.dom.replaceChildren()","Use dojox.xml.parser.replaceChildren() instead.","2.0");dojox.xml.parser.replaceChildren(node,_5a1);};dojox.data.dom.removeChildren=function(node){dojo.deprecated("dojox.data.dom.removeChildren()","Use dojox.xml.parser.removeChildren() instead.","2.0");return dojox.xml.parser.removeChildren(node);};dojox.data.dom.innerXML=function(node){dojo.deprecated("dojox.data.dom.innerXML()","Use dojox.xml.parser.innerXML() instead.","2.0");return dojox.xml.parser.innerXML(node);};}if(!dojo._hasResource["ambra.general"]){dojo._hasResource["ambra.general"]=true;dojo.provide("ambra.general");document.getElementsByTagAndClassName=function(_5a2,_5a3){if(_5a2==null){_5a2="*";}var _5a4=document.getElementsByTagName(_5a2);var _5a5=new Array();if(_5a3==null){return _5a4;}for(var i=0;i<_5a4.length;i++){var _5a6=_5a4[i];var _5a7=_5a6.className.split(" ");for(var j=0;j<_5a7.length;j++){if(_5a7[j]==_5a3){_5a5.push(_5a6);break;}}}return _5a5;};document.getElementsByTagAndAttributeName=function(_5a8,_5a9){if(_5a8==null){_5a8="*";}var _5aa=document.getElementsByTagName(_5a8);var _5ab=new Array();if(_5a9==null){return _5aa;}for(var i=0;i<_5aa.length;i++){var _5ac=_5aa[i];if(_5ac.getAttributeNode(_5a9)!=null){_5ab.push(_5ac);}}return _5ab;};document.getElementsByAttributeValue=function(_5ad,_5ae,_5af){if(_5ad==null){_5ad="*";}else{if(_5ae==null){return "[getElementsByAttributeValue] attributeName is required.";}else{if(_5af==null){return "[getElementsByAttributeValue] attributeValue is required.";}}}var _5b0=document.getElementsByTagAndAttributeName(_5ad,_5ae);var _5b1=new Array();for(var i=0;i<_5b0.length;i++){var _5b2=_5b0[i];if(_5b2.getAttributeNode(_5ae).nodeValue==_5af){_5b1.push(_5b2);}}return _5b1;};String.prototype.trim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"");};String.prototype.rtrim=function(){return this.replace(/\s+$/,"");};String.prototype.ltrim=function(){return this.replace(/^\s+/,"");};String.prototype.isEmpty=function(){return (this==null||this=="");};String.prototype.trimOnWord=function(_5b3){var _5b4=this.split(" ");var _5b5="";if(this.length<=_5b3){return this;}for(var i=0;i<_5b4.length;i++){if((_5b5+" "+_5b4[i]).length<_5b3){if(_5b5.length>0){_5b5=_5b5+" ";}_5b5=_5b5+_5b4[i];}else{return _5b5;}}return _5b5;};String.prototype.replaceStringArray=function(_5b6,_5b7,_5b8){if(!_5b7||!_5b8){return "Missing required value";}var _5b9=(_5b6)?this.split(_5b6):this.split(" ");var _5ba=-1;var _5bb=-1;for(var i=0;i<_5b9.length;i++){if(_5b9[i].match(_5b7)!=null){if(_5ba<0){_5ba=i;}_5bb=i;}}if(_5bb>=0){var diff=_5bb-_5ba+1;_5b9.splice(_5ba,diff,_5b8);}var _5b8=_5b9.join(" ");return _5b8;};function handleXhrError(_5bc,_5bd){if(_5bc instanceof Error){if(_ldc){_ldc.hide();}if(_5bc.dojoType=="cancel"){console.debug("Request canceled.");}else{if(_5bc.dojoType=="timeout"){console.debug("Request timed out.");}else{console.error(_5bc);if(djConfig.isDebug){alert(_5bc.toSource());}}}}};function jumpToElement(_5be){if(_5be){elLocation=ambra.domUtil.getCurrentOffset(_5be);window.scrollTo(0,elLocation.top);}};Date.getMonthShortName=function(mon){switch(mon){case 0:return "Jan";break;case 1:return "Feb";break;case 2:return "Mar";break;case 3:return "Apr";break;case 4:return "May";break;case 5:return "Jun";break;case 6:return "Jul";break;case 7:return "Aug";break;case 8:return "Sep";break;case 9:return "Oct";break;case 10:return "Nov";break;case 11:return "Dec";break;}};Date.formatDate=function(_5bf){var dt=new Date(_5bf);return Date.getMonthShortName(dt.getMonth())+" "+dt.getDate()+", "+" "+dt.getFullYear();};Date.getDateFromGMT=function(_5c0){var _5c1=(new Date()).getTimezoneOffset()*60000;return new Date(_5c0+_5c1);};Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest);};}if(!dojo._hasResource["ambra.domUtil"]){dojo._hasResource["ambra.domUtil"]=true;dojo.provide("ambra.domUtil");ambra.domUtil={getDisplayId:function(obj){if(obj.getAttributeNode("displayid")){var _5c2=obj.getAttributeNode("displayid").nodeValue;return _5c2;}else{return null;}},getAnnotationId:function(obj){if(obj.getAttributeNode("annotationid")!=null){var _5c3=obj.getAttributeNode("annotationid").nodeValue;return _5c3;}else{return null;}},ISOtoJSDate:function(_5c4){var temp=_5c4.split(/^(....).(..).(..).(..).(..).(..).*$/);var _5c5=new Date();_5c5.setUTCFullYear(temp[1],temp[2]-1,temp[3]);_5c5.setUTCHours(temp[4]);_5c5.setUTCMinutes(temp[5]);_5c5.setUTCSeconds(temp[6]);return _5c5;},removeChildren:function(node){var _5c6=node.childNodes.length;while(node.hasChildNodes()){this.removeNode(node.firstChild);}return _5c6;},moveChildren:function(_5c7,_5c8,trim){var _5c9=0;if(trim){while(_5c7.hasChildNodes()&&_5c7.firstChild.nodeType==dojo.dom.TEXT_NODE){_5c7.removeChild(_5c7.firstChild);}while(_5c7.hasChildNodes()&&_5c7.lastChild.nodeType==dojo.dom.TEXT_NODE){_5c7.removeChild(_5c7.lastChild);}}while(_5c7.hasChildNodes()){_5c8.appendChild(_5c7.firstChild);_5c9++;}return _5c9;},copyChildren:function(_5ca,_5cb,trim){var _5cc=_5ca.cloneNode(true);return this.moveChildren(_5cc,_5cb,trim);},getDisplayMap:function(obj,_5cd){var _5ce=(_5cd!=null)?[_5cd]:ambra.domUtil.getDisplayId(obj).split(",");var _5cf=document.getElementsByTagAndAttributeName("span","annotationid");var _5d0=new Array();for(var i=0;i<_5ce.length;i++){var _5d1=new Array();for(var n=0;n<_5cf.length;n++){var _5d2=this.getAnnotationId(_5cf[n]).split(",");for(var x=0;x<_5d2.length;x++){if(_5d2[x]==_5ce[i]){_5d1.push(_5cf[n]);}}}_5d0.push({"displayId":_5ce[i],"elementList":_5d1,"elementCount":_5d1.length});}return _5d0;},addNewClass:function(_5d3,_5d4,el){var _5d5=(el)?el:null;var _5d6=document.getElementsByTagAndClassName(_5d5,_5d3);for(var i=0;i<_5d6.length;i++){dojo.addClass(_5d6[i],_5d4);}},swapClassNameBtwnSibling:function(obj,_5d7,_5d8){var _5d9=obj.parentNode;var _5da=_5d9.getElementsByTagName(_5d7);for(var i=0;i<_5da.length;i++){if(_5da[i].className.match(_5d8)){dojo.removeClass(_5da[i],_5d8);}}dojo.addClass(obj,_5d8);},swapAttributeByClassNameForDisplay:function(obj,_5db,_5dc){var _5dd=this.getDisplayMap(obj,_5dc);for(var i=0;i<_5dd.elementCount;i++){if(_5dd.elementList[i].className.match(_5db)){var _5de=new RegExp(_5db);_5dd.elementList[i].className=_5dd.elementList[i].className.replace(_5de,"");}}dojo.addClass(obj,_5db);},getCurrentOffset:function(obj){var _5df=curtop=0;if(obj.offsetParent){_5df=obj.offsetLeft;curtop=obj.offsetTop;while(obj=obj.offsetParent){_5df+=obj.offsetLeft;curtop+=obj.offsetTop;}}var _5e0=new Object();_5e0.top=curtop;_5e0.left=_5df;return _5e0;},getFirstAncestorByClass:function(_5e1,_5e2){var _5e3=_5e1;while(_5e3.className.search(_5e2)<0){_5e3=_5e3.parentNode;}return _5e3;},swapDisplayMode:function(_5e4,_5e5){var obj=dojo.byId(_5e4);if(_5e5&&(_5e5=="block"||_5e5=="none")){obj.style.display=_5e5;}else{if(obj.style.display!="block"){obj.style.display="block";}else{obj.style.display="none";}}return false;},swapDisplayTextMode:function(node,_5e6,_5e7,_5e8,_5e9){var obj=dojo.byId(_5e6);if(_5e7){obj.style.display=_5e7;}else{if(obj.style.display!="block"){obj.style.display="block";}else{obj.style.display="none";}}if(obj.style.display=="block"){dojox.data.dom.textContent(node,_5e8);}else{dojox.data.dom.textContent(node,_5e9);}return false;},removeExtraSpaces:function(text){return text.replace(/([\r\n]+\s+)/g," ");},getChildElementsByTagAndClassName:function(node,_5ea,_5eb){var _5ec=node.childNodes;var _5ed=new Array();_5ea=_5ea.toUpperCase();if(_5eb!=null||_5ea!=null){for(var i=0;i<_5ec.length;i++){var _5ee=_5ec[i];if(_5ea!=null){if(_5ee.nodeName.match(_5ea)){if(_5eb!=null){var _5ef=_5ee.className.split(" ");for(var j=0;j<_5ef.length;j++){if(_5ef[j]==_5eb){_5ed.push(_5ee);break;}}}else{_5ed.push(_5ee);}}}else{if(_5eb!=null){var _5ef=_5ee.className.split(" ");for(var j=0;j<_5ef.length;j++){if(_5ef[j]==_5eb){_5ed.push(_5ee);break;}}}}}}else{return _5ec;}return _5ed;},adjustContainerHeight:function(obj){var _5f0=dijit.getViewport();var _5f1=this.getCurrentOffset(obj);var _5f2=dojo._getMarginBox(obj);var _5f3=_5f0.h-(10*_5f1.t);obj.style.height=_5f3+"px";obj.style.overflow="auto";},setContainerWidth:function(obj,_5f4,_5f5,_5f6){var _5f7=dijit.getViewport();obj.style.width=(_5f4&&_5f7.w<_5f4)?_5f4+"px":(_5f5&&_5f7.w>_5f5)?_5f5+"px":(!_5f6&&_5f7.w<_5f5)?_5f5+"px":"auto";},removeNode:function(node,deep){if(deep&&node.hasChildNodes){this.removeChildren(node);}if(node&&node.parentNode){return node.parentNode.removeChild(node);}},replaceNode:function(node,_5f8){return node.parentNode.replaceChild(_5f8,node);},insertBefore:function(node,ref,_5f9){if((_5f9!=true)&&(node===ref||node.nextSibling===ref)){return false;}var _5fa=ref.parentNode;_5fa.insertBefore(node,ref);return true;},insertAfter:function(node,ref,_5fb){var pn=ref.parentNode;if(ref==pn.lastChild){if((_5fb!=true)&&(node===ref)){return false;}pn.appendChild(node);}else{return this.insertBefore(node,ref.nextSibling,_5fb);}return true;},insertAfterLast:function(_5fc,_5fd){if(_5fd.hasChildNodes){this.insertAfter(_5fc,_5fd[_5fd.childNodes.length-1]);}else{_5fd.appendChild(_5fc);}},insertBeforeFirst:function(_5fe,_5ff){if(_5ff.hasChildNodes){this.insertBefore(_5fe,_5ff[0]);}else{_5ff.appendChild(_5fe);}},modifyNodeChildClassname:function(node,_600,_601,_602){if(node.hasChildNodes){var _603=node.childNodes;for(var i=0;i<_603.length;i++){if(_603[i].nodeName==_600){if(_602){dojo.addClass(_603[i],_601);}else{dojo.removeClass(_603[i],_601);}}if(_603[i].hasChildNodes){this.modifyNodeChildClassname(_603[i],refNodeName,_601,_602);}}return true;}else{return false;}},isClassNameExist:function(node,_604){var _605=new Array();_605=node.className.split(" ");for(var i=0;i<_605.length;i++){if(_605[i]==_604){return true;}}return false;},isChildContainAttributeValue:function(node,_606,_607){var _608=node.childNodes;var _609=new Array();console.debug("[ambra.domUtil.isChildContainAttributeValue]");for(var i=0;i<=_608.length-1;i++){var _60a=new Object();console.debug("attributeValue = "+_607+"\nchildlist["+i+"].nodeName = "+_608[i].nodeName);if(_608[i].nodeType==1&&(((_607||_607!=null)&&_608[i].getAttribute(_606)==_607)||((!_607||_607==null)&&_608[i].getAttributeNode(_606)!=null))){console.debug("\nchildlist["+i+"].getAttribute("+_606+") = "+_608[i].getAttribute(_606));_60a.node=_608[i];_60a.value=_608[i].getAttribute(_606);_609.push(_60a);}}return _609;},firstSibling:function(_60b){var _60c;for(var _60d=_60b;_60d!=null;_60d=_60d.previousSibling){if(_60d.nodeName=="#text"&&(_60d.nodeValue.match(new RegExp("\n"))||_60d.nodeValue.match(new RegExp("\r")))){continue;}_60c=_60d;}return _60c;},firstDescendantTextNode:function(node){if(!node){return null;}var dtn,c,cn=node.childNodes;for(var i=0;i<cn.length;i++){c=cn[i];if(c.nodeType==3){return c;}else{if(c.nodeType==1){if(dtn=this.firstDescendantTextNode(c)){return dtn;}}}}return null;},lastDescendantTextNode:function(node){if(!node){return null;}var dtn,c,cn=node.childNodes;for(var i=cn.length-1;i>=0;i--){c=cn[i];if(c.nodeType==3){return c;}else{if(c.nodeType==1){if(dtn=this.lastDescendantTextNode(c)){return dtn;}}}}return null;},findTextNode:function(n,_60e){if(n.nodeType==3){return n;}var t=_60e?this.firstDescendantTextNode(n):this.lastDescendantTextNode(n);return t?t:n;}};}if(!dojo._hasResource["ambra.htmlUtil"]){dojo._hasResource["ambra.htmlUtil"]=true;dojo.provide("ambra.htmlUtil");ambra.htmlUtil={getQuerystring:function(){var _60f=unescape(document.location.search.substring(1));var _610=_60f.split("&");var _611=new Array();for(var i=0;i<_610.length;i++){var pair=_610[i].split("=");_611.push({param:pair[0],value:pair[1]});}return _611;}};}if(!dojo._hasResource["ambra.formUtil"]){dojo._hasResource["ambra.formUtil"]=true;dojo.provide("ambra.formUtil");ambra.formUtil={textCues:{on:function(_612,_613){if(_612.value==""){_612.value=_613;}},off:function(_614,_615){if(_614.value==_615){_614.value="";}},reset:function(_616,_617){_616.value=_617;}},toggleFieldsByClassname:function(_618,_619){var _61a=document.getElementsByTagAndClassName(null,_618);var _61b=document.getElementsByTagAndClassName(null,_619);for(var i=0;i<_61a.length;i++){_61a[i].style.display="block";}for(var i=0;i<_61b.length;i++){_61b[i].style.display="none";}},checkFieldStrLength:function(_61c,_61d){if(_61c.value&&_61c.value.length>_61d){alert("Your comment exceeds the allowable limit of "+_61d+" characters by "+(_61c.value.length-_61d)+" characters.");_61c.focus();return 0;}else{return -1;}},_tglFields:function(node,_61e){var n=_61e?"false":"true";dojo.query("input[type='text'],input[type='textarea'],input[type='radio'],input[type='checkbox'],input[type='button'],select,textarea",node).forEach("item.disabled="+n+";item.locked="+n+";");},disableFormFields:function(node){ambra.formUtil._tglFields(node,false);},enableFormFields:function(node){ambra.formUtil._tglFields(node,true);},createFormValueObject:function(_61f){var _620=new Object();for(var i=0;i<_61f.elements.length;i++){if(_61f.elements[i].type!="hidden"&&_61f.elements[i].type!="button"&&_61f.elements[i].type!="submit"&&_61f.elements[i].name!=null){if(_61f.elements[i].type=="radio"){var _621=_61f.elements[i].name;var _622=_61f.elements[_621];for(var n=0;n<_622.length;n++){if(_622[n].checked){_620[_622[n].name]=_622[n].value;break;}}}else{if(_61f.elements[i].type=="checkbox"){var _623=_61f.elements[i].name;var _624=_61f.elements[_623];var _625=new Array();if(_624.length){for(var n=0;n<_624.length;n++){if(_624[n].checked){_625.push(_624[n].value);}}_620[_623]=_625;}else{_620[_624.name]=_624.value;}}else{if(_61f.elements[i].type=="select-one"){_620[_61f.elements[i].name]=_61f.elements[i][_61f.elements[i].selectedIndex].value;}else{_620[_61f.elements[i].name]=_61f.elements[i].value;}}}}}return _620;},selectAllCheckboxes:function(_626,_627){if(_626.checked){for(var i=0;i<_627.length;i++){_627[i].checked=true;}}else{for(var i=0;i<_627.length;i++){_627[i].checked=false;}}},selectCheckboxPerCollection:function(_628,_629){var _62a=0;for(var i=0;i<_629.length;i++){if(_629[i].checked){_62a++;}}_628.checked=(_62a==_629.length)?true:false;}};}if(!dojo._hasResource["ambra.widget.LoadingCycle"]){dojo._hasResource["ambra.widget.LoadingCycle"]=true;dojo.provide("ambra.widget.LoadingCycle");dojo.declare("ambra.widget.LoadingCycle",[dijit.Dialog],{templateString:"<div class=\"dijitDialog\"><div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div></div>",duration:250,refocus:false,_getFocusItems:function(arg){},_onKey:function(e){}});}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(_62b,_62c,uri){if(window[_62b]){return window[_62b];}if(window.frames[_62b]){return window.frames[_62b];}var _62d=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _62e=dojo.isIE?"<iframe name=\""+_62b+"\" src=\""+turi+"\" onload=\""+_62c+"\">":"iframe";_62d=dojo.doc.createElement(_62e);with(_62d){name=_62b;setAttribute("name",_62b);id=_62b;}dojo.body().appendChild(_62d);window[_62b]=_62d;with(_62d.style){if(!(dojo.isSafari<3)){position="absolute";}left=top="1px";height=width="1px";visibility="hidden";}if(!dojo.isIE){this.setSrc(_62d,turi,true);_62d.onload=new Function(_62c);}return _62d;},setSrc:function(_62f,src,_630){try{if(!_630){if(dojo.isWebKit){_62f.location=src;}else{frames[_62f.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit>521){idoc=_62f.contentWindow.document;}else{if(dojo.isSafari){idoc=_62f.document;}else{idoc=_62f.contentWindow;}}if(!idoc){_62f.location=src;return;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_631){var doc=_631.contentDocument||(((_631.name)&&(_631.document)&&(dojo.doc.getElementsByTagName("iframe")[_631.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_631.name].contentWindow.document)))||((_631.name)&&(dojo.doc.frames[_631.name])&&(dojo.doc.frames[_631.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _632=null;try{var _633=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _634=_633.handleAs;_632=ifd;if(_634!="html"){if(_634=="xml"){if(dojo.isIE){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _635=(dii._frame.contentWindow.document).documentElement.innerText;_635=_635.replace(/>\s+</g,"><");_635=dojo.trim(_635);var _636={responseText:_635};_632=dojo._contentHandlers["xml"](_636);}}else{_632=ifd.getElementsByTagName("textarea")[0].value;if(_634=="json"){_632=dojo.fromJson(_632);}else{if(_634=="javascript"){_632=dojo.eval(_632);}}}}}catch(e){_632=e;}finally{_633._callNext();}return _632;},function(_637,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _637;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _638=dfd.ioArgs;var args=_638.args;_638._contentToClean=[];var fn=dojo.byId(args["form"]);var _639=args["content"]||{};if(fn){if(_639){var _63a=function(name,_63b){var tn;if(dojo.isIE){tn=dojo.doc.createElement("<input type='hidden' name='"+name+"'>");}else{tn=dojo.doc.createElement("input");tn.type="hidden";tn.name=name;}tn.value=_63b;fn.appendChild(tn);_638._contentToClean.push(name);};for(var x in _639){var val=_639[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_63a(x,val[i]);}}else{if(!fn[x]){_63a(x,val);}else{fn[x].value=val;}}}}var _63c=fn.getAttributeNode("action");var _63d=fn.getAttributeNode("method");var _63e=fn.getAttributeNode("target");if(args["url"]){_638._originalAction=_63c?_63c.value:null;if(_63c){_63c.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_63d||!_63d.value){if(_63d){_63d.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_638._originalTarget=_63e?_63e.value:null;if(_63e){_63e.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _63f=args.url+(args.url.indexOf("?")>-1?"&":"?")+_638.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_63f,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _640=dfd.ioArgs;var args=_640.args;var _641=dojo.byId(args.form);if(_641){var _642=_640._contentToClean;for(var i=0;i<_642.length;i++){var key=_642[i];for(var j=0;j<_641.childNodes.length;j++){var _643=_641.childNodes[j];if(_643.name==key){dojo.destroy(_643);break;}}}if(_640["_originalAction"]){_641.setAttribute("action",_640._originalAction);}if(_640["_originalTarget"]){_641.setAttribute("target",_640._originalTarget);_641.target=_640._originalTarget;}}_640._finished=true;}};}if(!dojo._hasResource["ambra.widget.RegionalDialog"]){dojo._hasResource["ambra.widget.RegionalDialog"]=true;dojo.provide("ambra.widget.RegionalDialog");dojo.declare("ambra.widget.RegionalDialogBase",[dijit.Dialog],{duration:250,refocus:false,_onKey:function(e){},_changeTipDirection:function(_644,_645){var dTip=this.tipDownNode;var _646=this.tipUpNode;dTip.className=dTip.className.replace(/\son/,"");_646.className=_646.className.replace(/\son/,"");var _647=(_644)?dTip:_646;_647.className=_647.className.concat(" on");_647.style.left=(_645)?_645+"px":"auto";},placeModalDialog:function(){var _648=dojo._docScroll();var _649=dijit.getViewport();var _64a=ambra.domUtil.getCurrentOffset(this.markerNode);var mb=dojo.marginBox(this.containerNode);var _64b=mb.w;var _64c=mb.h;var _64d=_649.w;var _64e=_649.h;var _64f=_648.x;var _650=_648.y;var _651=22;var _652=39;var _653=22;var _654=22;var _655=10;var _656=10;var _657=15;var xMin=_64f+_655;var yMin=_650+_656;var xMax=_64f+_64d-_655-_64b;var yMax=_650+_64e-_656-_64c;var _658=xMin+_653;var _659=xMax+_64b-_654-_652;var _65a=true;if(xMin>xMax||yMin>yMax||_658>_659){}var xTip=_64a.left-(_652/2)+4;var yTip=_64a.top-_651-(_651/4)+8;var x=xTip-_653;var y=yTip-_64c;if(x<xMin){x=xMin;if(xTip<_658){xTip=_658;}}else{if(x>xMax){x=xMax;if(xTip>_659){xTip=_659;}}}if(y<yMin){_65a=false;yTip=_64a.top+_657-(_651/4);y=yTip+_651;if(y>yMax){}}var _65b=_64a.left-x;if(_65b<_653){xTipPos=_653-(_652/4);x=x-(_653-_65b);}else{xTipPos=_65b-(_652/4);}this._changeTipDirection(_65a,xTipPos);with(this.domNode.style){left=x+"px";top=y+"px";}console.debug("RegionalDialogBase.placeModalDialog: \nleft = "+this.domNode.style.left+"\ntop = "+this.domNode.style.top);},_position:function(){this.placeModalDialog();}});dojo.declare("ambra.widget.RegionalDialog",[ambra.widget.RegionalDialogBase],{templateString:"<div id=\"${id}\" class=\"dijitDialog\" style=\"overflow:visible;\" dojoAttachPoint=\"wrapper\"><div dojoAttachPoint=\"containerNode\"></div></div>\n",show:function(){console.debug("RegionalDialog.show()");this.inherited(arguments);},layout:function(){if(this.domNode.style.visibility!="hidden"){this._underlay.layout();if(!dojo.isSafari){this._position();}}},onLoad:function(){console.debug("RegionalDialog.onLoad()");this.inherited(arguments);},setMarker:function(node){this.markerNode=node;},setTipUp:function(node){this.tipUpNode=node;},setTipDown:function(node){this.tipDownNode=node;}});}if(!dojo._hasResource["ambra.navigation"]){dojo._hasResource["ambra.navigation"]=true;dojo.provide("ambra.navigation");ambra.navigation={buildTOC:function(_65c,_65d){var ul=dojo.byId("tocUl");if(!ul){var _65e=document.getElementsByTagAndAttributeName(null,"toc");if(_65e.length>0){var ul=document.createElement("ul");ul.setAttribute("id","tocUl");for(var i=0;i<_65e.length;i++){var li=document.createElement("li");var _65f=document.createElement("a");_65f.href="#"+_65e[i].getAttributeNode("toc").nodeValue;_65f.title=_65e[i].getAttributeNode("title").nodeValue;if(i==_65e.length-1){_65f.className="last";}var _660=_65e[i].getAttributeNode("title").nodeValue;if(_660.length>25){_660=_660.trimOnWord(25)+"...";}var _661=document.createTextNode(_660);_65f.appendChild(_661);li.appendChild(_65f);ul.appendChild(li);}_65d.appendChild(ul);_65c.style.display="inline";}}}};dojo.addOnLoad(function(){if(dojo.isIE){var _662=dojo.byId("nav");if(!_662){return;}for(var i=0;i<_662.childNodes.length;i++){if(_662.childNodes[i].nodeName=="LI"){var _663=_662.childNodes[i];_663.onmouseover=function(){this.className=this.className.concat(" over");};_663.onmouseout=function(){this.className=this.className.replace(/\sover/,"");this.className=this.className.replace(/over/,"");};}}}});}if(!dojo._hasResource["ambra.horizontalTabs"]){dojo._hasResource["ambra.horizontalTabs"]=true;dojo.provide("ambra.horizontalTabs");ambra.horizontalTabs={proceedFlag:false,tempValue:"",changeFlag:false,tabPaneSet:"",tabsListObject:"",tabsContainer:"",targetFormObj:"",targetObj:"",newTarget:"",setTabPaneSet:function(obj){this.tabPaneSet=obj;},setTabsListObject:function(_664){this.tabsListObject=_664;},setTabsContainer:function(_665){this.tabsContainer=_665;},setTargetFormObj:function(_666){this.targetFormObj=_666;},setTargetObj:function(_667){this.targetObj=_667;},setNewTarget:function(_668){this.newTarget=_668;},getMapObject:function(_669){if(_669){for(var i=0;i<this.tabsListObject.length;i++){if(this.tabsListObject[i].tabKey==_669){return this.tabsListObject[i];}}}else{return this.tabsListObject[0];}},init:function(_66a){var _66b;if(_66a){_66b=this.getMapObject(_66a);}else{_66b=this.getMapObject();}this.buildTabs(_66b);this.tabSetup(_66b);},initSimple:function(_66c){var _66d;if(_66c){_66d=this.getMapObject(_66c);}else{_66d=this.getMapObject();}this.buildTabsHome(_66d);if(_66d!=null){this.setTargetObj(_66d);}},tabSetup:function(_66e){this.setTargetObj(_66e);var _66f=this.targetObj.formName;var _670=document.forms[_66f];this.setTargetFormObj(_670);_670.formSubmit.onclick=function(){submitContent();};},setTempValue:function(obj){if(obj.type=="radio"){var _671=obj.name;var _672=obj.form.elements[_671];for(var n=0;n<_672.length;n++){if(_672[n].checked){this.tempValue=_672[n].value;}}}else{if(obj.type=="checkbox"){var _673=obj.name;var _674=obj.form.elements[_673];if(_674.length){for(var n=0;n<_674.length;n++){if(_674[n].checked){this.tempValue=_674[n].value;}}}else{this.tempValue=_674.checked;}}else{if(obj.type=="select-one"){this.tempValue=obj[obj.selectedIndex].value;}else{this.tempValue=obj.value;}}}},checkValue:function(obj){if(obj.type=="radio"){var _675=obj.name;var _676=obj.form.elements[_675];for(var n=0;n<_676.length;n++){if(_676[n].checked){if(this.tempValue!=_676[n].value){this.changeFlag=true;}}}}else{if(obj.type=="checkbox"){var _677=obj.name;var _678=obj.form.elements[_677];if(_678.length){for(var n=0;n<_678.length;n++){if(_678[n].checked){if(this.tempValue!=_678[n].value){this.changeFlag=true;}}}}else{if(this.tempValue!=_678.checked){this.changeFlag=true;}}}else{if(obj.type=="select-one"){if(this.tempValue!=obj[obj.selectedIndex].value){this.changeFlag=true;}}else{if(this.tempValue!=obj.value){this.changeFlag=true;}}}}},attachFormEvents:function(_679){ambra.horizontalTabs.tempValue="";for(var i=0;i<_679.elements.length;i++){if(_679.elements[i].type!="hidden"){var _67a=_679.name;var _67b=_679.elements[i].name;dojo.connect(document.forms[_67a].elements[_67b],"onfocus",function(){ambra.horizontalTabs.tempValue=this.value;});dojo.connect(_679.elements[i],"onchange",function(){if(ambra.horizontalTabs.tempValue==this.value){ambra.horizontalTabs.changeFlag=true;}});}}},buildTabs:function(obj){for(var i=0;i<this.tabsListObject.length;i++){var li=document.createElement("li");li.id=this.tabsListObject[i].tabKey;if(obj.className){li.className=obj.className;}if(this.tabsListObject[i].tabKey==obj.tabKey){dojo.addClass(li,"active");}li.onclick=function(){ambra.horizontalTabs.show(this.id);return false;};li.appendChild(document.createTextNode(this.tabsListObject[i].title));this.tabsContainer.appendChild(li);}this.tempValue="";},buildTabsHome:function(obj){for(var i=0;i<this.tabsListObject.length;i++){var li=document.createElement("li");li.id=this.tabsListObject[i].tabKey;if(this.tabsListObject[i].className){li.className=this.tabsListObject[i].className;}if(obj!=null&&this.tabsListObject[i].tabKey==obj.tabKey){dojo.addClass(li,"active");}li.onclick=function(){ambra.horizontalTabs.showHome(this.id);return false;};var span=document.createElement("span");span.appendChild(document.createTextNode(this.tabsListObject[i].title));li.appendChild(span);this.tabsContainer.appendChild(li);}},toggleTab:function(obj){for(var i=0;i<this.tabsListObject.length;i++){var _67c=dojo.byId(this.tabsListObject[i].tabKey);if(_67c.className.match("active")){dojo.removeClass(_67c,"active");}}var _67d=dojo.byId(obj.tabKey);dojo.addClass(_67d,"active");},confirmChange:function(_67e){if(this.changeFlag){var _67f=confirm("You have made changes, are you sure you want to leave this tab without saving?  If you want to proceed, click \"OK\".  Otherwise click \"Cancel\" to go to save.");this.proceedFlag=_67f;}else{this.proceedFlag=true;}},getContent:function(){if(!this.proceedFlag){_ldc.hide();this.targetFormObj.formSubmit.focus();return false;}else{loadContent(this.newTarget);}},saveContent:function(_680){var _681=this.getMapObject(_680);submitContent(_681);},show:function(id){var _682=this.getMapObject(id);this.setNewTarget(_682);_ldc.show();this.confirmChange();setTimeout("getContentFunc()",1000);},showHome:function(id){var _683=this.getMapObject(id);this.setNewTarget(_683);loadContentHome(_683);}};function getContentFunc(){ambra.horizontalTabs.getContent();};function loadContent(_684){var _685=dojo.byId(profileConfig.tabPaneSetId);var _686=_684.urlLoad+"?tabId="+_684.tabKey;_ldc.show();dojo.xhrGet({url:_namespace+_686,handleAs:"text",headers:{"AJAX_USER_AGENT":"Dojo/"+dojo.version},error:function(_687,_688){handleXhrError(_687,_688);},load:function(_689,_68a){_685.innerHTML=_689;ambra.horizontalTabs.toggleTab(_684);ambra.horizontalTabs.tabSetup(_684);ambra.horizontalTabs.tempValue="";ambra.horizontalTabs.changeFlag=false;ambra.horizontalTabs.proceedFlag=true;_ldc.hide();}});};function loadContentHome(_68b){var _68c=dojo.byId(homeConfig.tabPaneSetId);var _68d=_68b.urlLoad;dojo.xhrGet({url:_namespace+_68d,headers:{"AJAX_USER_AGENT":"Dojo/"+dojo.version},error:function(_68e,_68f){handleXhrError(_68e,_68f);},load:function(_690,_691){_68c.innerHTML=_690;ambra.horizontalTabs.setTargetObj(_68b);ambra.horizontalTabs.toggleTab(_68b);}});};function submitContent(){var _692=dojo.byId(profileConfig.tabPaneSetId);var _693=ambra.horizontalTabs.targetObj;var _694=_693.urlSave;var _695=document.forms[_693.formName];var _696=ambra.formUtil.createFormValueObject(_695);_ldc.show();dojo.xhrPost({url:_namespace+_694,content:_696,headers:{"AJAX_USER_AGENT":"Dojo/"+dojo.version},error:function(_697,_698){handleXhrError(_697,_698);},load:function(_699,_69a){ambra.horizontalTabs.tabSetup(_693);_692.innerHTML=_699;ambra.horizontalTabs.tempValue="";ambra.horizontalTabs.changeFlag=false;var _69b=document.forms[_693.formName];_69b.formSubmit.onclick=function(){submitContent();};var _69c=document.getElementsByTagAndClassName(null,"form-error");if(_69c.length>=0){jumpToElement(_69c[0]);}else{jumpToElement(_69c);}_ldc.hide();}});};}if(!dojo._hasResource["ambra.floatMenu"]){dojo._hasResource["ambra.floatMenu"]=true;dojo.provide("ambra.floatMenu");ambra.floatMenu={el:null,changeHeight:null,doFloat:function(){this.el=dojo.byId("postcomment");var _69d=dojo.byId("floatMarker");if(!_69d){return;}var _69e=_69d.parentNode;var _69f=ambra.domUtil.getCurrentOffset(_69d);var _6a0=ambra.domUtil.getCurrentOffset(_69e);var _6a1=dojo._docScroll();var _6a2=dijit.getViewport();var _6a3=_6a1.y;var y=0;dojo.removeClass(this.el,"fixed");if(_6a3>_69f.top){y=_6a3-_6a0.top;dojo.addClass(this.el,"fixed");}if(dojo.isIE&&dojo.isIE<7&&((document.body.offsetHeight-_6a3)>=_6a2.h)){this.changeHeight=y;window.setTimeout("ambra.floatMenu.el.style.top = ambra.floatMenu.changeHeight + \"px\";",100);}}};dojo.addOnLoad(function(){if(dojo.byId("floatMarker")){dojo.connect(window,"onscroll",function(){ambra.floatMenu.doFloat();});dojo.connect(window,"onresize",function(){ambra.floatMenu.doFloat();});dojo.connect(dojo.doc,"onscroll",function(){ambra.floatMenu.doFloat();});dojo.connect(dojo.doc,"onkey",function(){ambra.floatMenu.doFloat();});ambra.floatMenu.doFloat();}});}if(!dojo._hasResource["ambra.displayComment"]){dojo._hasResource["ambra.displayComment"]=true;dojo.provide("ambra.displayComment");ambra.displayComment={target:"",targetSecondary:"",sectionTitle:"",sectionDetail:"",sectionComment:"",sectionCIStatement:"",sectionLink:"",ciStatementMsg:"",noCIStatementMsg:"",retrieveMsg:"",init:function(){this.sectionTitle=dojo.byId(commentConfig.sectionTitle);this.sectionDetail=dojo.byId(commentConfig.sectionDetail);this.sectionComment=dojo.byId(commentConfig.sectionComment);this.sectionCIStatement=dojo.byId(commentConfig.sectionCIStatement);this.sectionLink=dojo.byId(commentConfig.sectionLink);this.retrieveMsg=dojo.byId(commentConfig.retrieveMsg);this.ciStatementMsg=commentConfig.ciStatementMsg;this.noCIStatementMsg=commentConfig.noCIStatementMsg;},isMultiple:function(attr){var _6a4=this.parseAttributeToList(attr);return (_6a4.length>1)?true:false;},setTarget:function(obj){this.target=obj;},setTargetSecondary:function(obj){this.targetSecondary=obj;},setSectionTitle:function(_6a5){this.sectionTitle=dojo.byId(_6a5.sectionTitle);},setSectionDetail:function(_6a6){this.sectionDetail=dojo.byId(_6a6.sectionDetail);},setSectionComment:function(_6a7){this.sectionComment=dojo.byId(_6a7.sectionComment);},setSectionCIStatement:function(_6a8){this.sectionCIStatement=dojo.byId(_6a8.sectionCIStatement);},setCiStatementMsg:function(_6a9){this.ciStatementMsg=dojo.byId(_6a9.ciStatementMsg);},setNoCIStatementMsg:function(_6aa){this.noCIStatementMsg=dojo.byId(_6aa.noCIStatementMsg);},setSectionLink:function(_6ab){this.sectionLink=dojo.byId(_6ab.sectionLink);},setRetrieveMsg:function(_6ac){this.retrieveMsg=dojo.byId(_6ac.retrieveMsg);},show:function(node){if(_commentDlg){_commentDlg.hide();}if(_commentMultiDlg){_commentMultiDlg.hide();}this.setTarget(node);_commentDlg.setMarker(this.target);_commentMultiDlg.setMarker(this.target);getComment(this.target);return false;},buildDisplayHeader:function(_6ad){var _6ae=document.createDocumentFragment();var _6af=document.createElement("a");_6af.href=_namespace+"/annotation/listThread.action?inReplyTo="+_6ad.annotationId+"&root="+_6ad.annotationId;_6af.className="discuss icon";_6af.title="View full note";_6af.innerHTML=_6ad.annotation.commentTitle;_6ae.appendChild(_6af);return _6ae;},buildDisplayDetail:function(_6b0){var _6b1=_6b0.annotationId;var _6b2=_6b1.substring(_6b1.lastIndexOf("/")+1,_6b1.length);var _6b3=_6b0.creatorUserName;var _6b4=document.createElement("a");_6b4.href=_namespace+"/user/showUser.action?userId="+_6b0.annotation.creator;_6b4.className="user icon";_6b4.appendChild(document.createTextNode(_6b3));_6b4.id=_6b2;var _6b5=document.createElement("div");_6b5.className="userinfo";var d=new Date(_6b0.annotation.createdAsMillis);var _6b6=new String("JanFebMarAprMayJunJulAugSepOctNovDec");var _6b7=d.getUTCDate();var day=(_6b7>=10?"":"0")+_6b7;var _6b8=d.getUTCMonth()*3;var _6b9=_6b6.substring(_6b8,_6b8+3);var year=d.getUTCFullYear();var _6ba=d.getUTCHours();var _6bb=(_6ba>=10?"":"0")+_6ba;var _6bc=d.getUTCMinutes();var _6bd=(_6bc>=10?"":"0")+_6bc;var _6be=document.createElement("strong");_6be.appendChild(document.createTextNode(day+" "+_6b9+" "+year));var _6bf=document.createElement("strong");_6bf.appendChild(document.createTextNode(_6bb+":"+_6bd+" GMT"));var _6c0=document.createDocumentFragment();_6c0.appendChild(document.createTextNode("Posted by "));_6c0.appendChild(_6b4);_6c0.appendChild(document.createTextNode(" on "));_6c0.appendChild(_6be);_6c0.appendChild(document.createTextNode(" at "));_6c0.appendChild(_6bf);return _6c0;},buildDisplayBody:function(_6c1){var _6c2=document.createDocumentFragment();_6c2=_6c1.annotation.escapedTruncatedComment;return _6c2;},buildDisplayCIStatement:function(_6c3){if(_6c3.cisStartDateMillis<_6c3.annotation.createdAsMillis){var _6c4=document.createDocumentFragment();if(_6c3.annotation.truncatedCIStatement){_6c4="<div class=\"cis\"><strong>"+this.ciStatementMsg+"</strong>"+_6c3.annotation.truncatedCIStatement+"</div>";}else{_6c4="<div class=\"cis\"><strong>"+this.noCIStatementMsg+"</strong></div>";}return _6c4;}else{return null;}},buildDisplayViewLink:function(_6c5){var _6c6=document.createElement("a");_6c6.href=_namespace+"/annotation/listThread.action?inReplyTo="+_6c5.annotationId+"&root="+_6c5.annotationId;_6c6.className="commentary icon";_6c6.title="Click to view full thread and respond";_6c6.appendChild(document.createTextNode("View/respond to this"));return _6c6;},buildDisplayView:function(_6c7){if(ambra.displayComment.sectionTitle.hasChildNodes){ambra.domUtil.removeChildren(ambra.displayComment.sectionTitle);}ambra.displayComment.sectionTitle.appendChild(this.buildDisplayHeader(_6c7));if(ambra.displayComment.sectionDetail.hasChildNodes){ambra.domUtil.removeChildren(ambra.displayComment.sectionDetail);}ambra.displayComment.sectionDetail.appendChild(this.buildDisplayDetail(_6c7));if(ambra.displayComment.sectionComment.hasChildNodes){ambra.domUtil.removeChildren(ambra.displayComment.sectionComment);}ambra.displayComment.sectionComment.innerHTML=this.buildDisplayBody(_6c7);if(ambra.displayComment.sectionCIStatement.hasChildNodes){ambra.domUtil.removeChildren(ambra.displayComment.sectionCIStatement);}var _6c8=this.buildDisplayCIStatement(_6c7);if(_6c8!=null){ambra.displayComment.sectionCIStatement.innerHTML=_6c8;}if(ambra.displayComment.sectionLink.hasChildNodes){ambra.domUtil.removeChildren(ambra.displayComment.sectionLink);}this.sectionLink.appendChild(this.buildDisplayViewLink(_6c7));var _6c9=dojo.byId(commentConfig.cmtContainer);if(_6c7.annotation.type.indexOf(annotationConfig.annTypeMinorCorrection)>=0){dojo.addClass(_6c9,annotationConfig.styleMinorCorrection);}else{if(_6c7.annotation.type.indexOf(annotationConfig.annTypeFormalCorrection)>=0){dojo.addClass(_6c9,annotationConfig.styleFormalCorrection);}else{if(_6c7.annotation.type.indexOf(annotationConfig.annTypeRetraction)>=0){dojo.addClass(_6c9,annotationConfig.styleRetraction);}else{dojo.removeClass(_6c9,annotationConfig.styleMinorCorrection);dojo.removeClass(_6c9,annotationConfig.styleFormalCorrection);dojo.removeClass(_6c9,annotationConfig.styleRetraction);}}}},buildDisplayViewMultiple:function(_6ca,iter,_6cb,_6cc){var _6cd=document.createElement("li");if(iter<=0){_6cd.className="active";}var _6ce=document.createElement("span");_6ce.innerHTML=_6ca.annotation.commentTitle;_6cd.appendChild(_6ce);var _6cf=document.createElement("div");_6cf.className="detail";_6cf.appendChild(this.buildDisplayDetail(_6ca));_6cd.appendChild(_6cf);var _6d0=document.createElement("div");if(iter<=0){_6d0.className="contentwrap active";}else{_6d0.className="contentwrap";}if(_6ca.annotation.type.indexOf(annotationConfig.annTypeMinorCorrection)>=0){dojo.addClass(_6cd,annotationConfig.styleMinorCorrection);_6d0.className+=" "+annotationConfig.styleMinorCorrection;}else{if(_6ca.annotation.type.indexOf(annotationConfig.annTypeFormalCorrection)>=0){dojo.addClass(_6cd,annotationConfig.styleFormalCorrection);_6d0.className+=" "+annotationConfig.styleFormalCorrection;}else{if(_6ca.annotation.type.indexOf(annotationConfig.annTypeRetraction)>=0){dojo.addClass(_6cd,annotationConfig.styleRetraction);_6d0.className+=" "+annotationConfig.styleRetraction;}}}var _6d1=this.buildDisplayCIStatement(_6ca);if(_6d1!=null){_6d0.innerHTML=this.buildDisplayBody(_6ca)+_6d1;}else{_6d0.innerHTML=this.buildDisplayBody(_6ca);}var _6d2=document.createElement("div");_6d2.className="detail";_6d2.appendChild(this.buildDisplayViewLink(_6ca));_6d0.appendChild(_6d2);if(iter<=0){_6cb.appendChild(_6cd);_6cc.appendChild(_6d0);}else{var _6d3=ambra.domUtil.getChildElementsByTagAndClassName(_6cb,"li",null);ambra.domUtil.insertAfter(_6cd,_6d3[_6d3.length-1]);var _6d4=ambra.domUtil.getChildElementsByTagAndClassName(_6cc,"div",null);ambra.domUtil.insertAfter(_6d0,_6d4[_6d4.length-1]);}var _6d5=_6cc.childNodes[_6cc.childNodes.length-1];_6cd.onclick=function(){ambra.displayComment.mouseoutComment(ambra.displayComment.target);ambra.displayComment.mouseoverComment(ambra.displayComment.target,_6ca.annotationId);ambra.domUtil.swapClassNameBtwnSibling(this,this.nodeName,"active");ambra.domUtil.swapClassNameBtwnSibling(_6d5,_6d5.nodeName,"active");ambra.domUtil.swapAttributeByClassNameForDisplay(ambra.displayComment.target," active",_6ca.annotationId);ambra.displayComment.adjustDialogHeight(_6cb,_6cc,50);};},mouseoverComment:function(obj,_6d6){var _6d7=ambra.domUtil.getDisplayMap(obj,_6d6);var _6d8;for(var i=0;i<_6d7.length;i++){if(i==0){_6d8=_6d7[i];}else{if(_6d7[i].elementCount>_6d7[i-1].elementCount){_6d8=_6d7[i];}}}for(var n=0;n<_6d8.elementCount;n++){var _6d9=new Array();var _6da=_6d8.elementList[n];this.modifyClassName(_6da);if(n==0){var _6db=ambra.domUtil.getChildElementsByTagAndClassName(_6da,"a","bug");for(var i=0;i<_6db.length;i++){this.modifyClassName(_6db[i]);}}}},mouseoutComment:function(obj){var _6dc=document.getElementsByTagName("span");for(var i=0;i<_6dc.length;i++){_6dc[i].className=_6dc[i].className.replace(/\-active/,"");}obj.className=obj.className.replace(/\-active/,"");},modifyClassName:function(obj){classList=obj.className.split(" ");for(var i=0;i<classList.length;i++){if((classList[i].match("public")||classList[i].match("private"))&&!classList[i].match("-active")){classList[i]=classList[i].concat("-active");}}obj.className=classList.join(" ");},processBugCount:function(){var _6dd=document.getElementsByTagAndClassName(null,"bug");for(var i=0;i<_6dd.length;i++){var _6de=ambra.domUtil.getDisplayId(_6dd[i]);var spn=document.createElement("span");if(_6de!=null){var _6df=_6de.split(",");var _6e0=_6df.length;var _6e1=document.createTextNode(_6e0);}else{var _6e1=document.createTextNode("0");}spn.appendChild(_6e1);ambra.domUtil.removeChildren(_6dd[i]);_6dd[i].appendChild(spn);}},adjustDialogHeight:function(_6e2,_6e3,_6e4){var _6e5=dojo._getMarginBox(_6e2).h;var _6e6=dojo._getMarginBox(_6e3).h;if(_6e5>_6e6){_6e2.parentNode.style.height=(_6e5+_6e4)+"px";var _6e7=ambra.domUtil.getChildElementsByTagAndClassName(_6e3,"div","contentwrap");for(var i=0;i<_6e7.length;i++){if(_6e7[i].className.match("active")){_6e7[i].style.height=(_6e5-_6e5/(3.59*_6e7.length))+"px";}}}else{_6e2.parentNode.style.height=(_6e6+_6e4)+"px";}}};function getComment(obj){_ldc.show();var _6e8=ambra.domUtil.getDisplayId(obj);var _6e9=_6e8.split(",");if(_6e9.length>1){var _6ea=document.getElementById("multilist");ambra.domUtil.removeChildren(_6ea);var _6eb=document.getElementById("multidetail");ambra.domUtil.removeChildren(_6eb);}else{var _6ea=dijit.byId("CommentDialog");}var _6ec=4;var _6ed=(_6e9.length<_6ec)?_6e9.length:_6ec;var _6ee=0;for(var i=0;i<_6ed;i++){dojo.xhrGet({url:_namespace+"/annotation/getAnnotation.action?annotationId="+_6e9[i],handleAs:"json-comment-filtered",error:function(_6ef,_6f0){handleXhrError(_6ef,_6f0);},load:function(_6f1,_6f2){_ldc.hide();var _6f3=_6f1;if(_6f3.actionErrors.length>0){var _6f4="";for(var i=0;i<_6f3.actionErrors.length;i++){_6f4=_6f4+_6f3.actionErrors[i]+"\n";}alert("ERROR [actionErrors]: "+_6f4);}else{if(_6f3.numFieldErrors>0){var _6f5;for(var item in _6f3.fieldErrors){var _6f6="";for(var i=0;i<_6f3.fieldErrors[item].length;i++){_6f6+=_6f3.fieldErrors[item][i];}_6f5=_6f5+item+": "+_6f6+"<br/>";}alert("ERROR [numFieldErrors]: "+_6f5);}else{var _6f7=(_6e9.length>1);if(_6f7){ambra.displayComment.buildDisplayViewMultiple(_6f3,_6ea.childNodes.length,_6ea,_6eb);if(_6ea.childNodes.length==_6ed){ambra.displayComment.mouseoverComment(ambra.displayComment.target,_6e9[0]);_commentMultiDlg.show();ambra.displayComment.adjustDialogHeight(_6ea,_6eb,50);}}else{ambra.displayComment.buildDisplayView(_6f3);ambra.displayComment.mouseoverComment(ambra.displayComment.target);_commentDlg.show();}}}}});}};}if(!dojo._hasResource["ambra.annotation"]){dojo._hasResource["ambra.annotation"]=true;dojo.provide("ambra.annotation");ambra.annotation={handleUserSelectionError:function(){var msg=annotationConfig.annSelErrMsg?annotationConfig.annSelErrMsg:annotationConfig.dfltAnnSelErrMsg;alert(msg);annotationConfig.annSelErrMsg=null;},createNewAnnotation:function(){annotationConfig.rangeInfoObj=this.getRangeOfSelection();if(annotationConfig.rangeInfoObj==annotationConfig.excludeSelection){this.handleUserSelectionError();this.undoPendingAnnotation();return false;}else{if(!annotationConfig.rangeInfoObj){alert("Using your mouse, select the area of the article you wish to notate.");return false;}else{console.debug("annotationConfig.rangeInfoObj.range.text = '"+annotationConfig.rangeInfoObj.range.text+"'\n"+"annotationConfig.rangeInfoObj.startPoint = "+annotationConfig.rangeInfoObj.startPoint+"\n"+"annotationConfig.rangeInfoObj.endPoint = "+annotationConfig.rangeInfoObj.endPoint+"\n"+"annotationConfig.rangeInfoObj.startParent = "+annotationConfig.rangeInfoObj.startParent+"\n"+"annotationConfig.rangeInfoObj.endParent = "+annotationConfig.rangeInfoObj.endParent+"\n"+"annotationConfig.rangeInfoObj.startParentId = "+annotationConfig.rangeInfoObj.startParentId+"\n"+"annotationConfig.rangeInfoObj.endParentId = "+annotationConfig.rangeInfoObj.endParentId+"\n"+"annotationConfig.rangeInfoObj.startXpath = "+annotationConfig.rangeInfoObj.startXpath+"\n"+"annotationConfig.rangeInfoObj.endXpath = "+annotationConfig.rangeInfoObj.endXpath);_annotationForm.startPath.value=annotationConfig.rangeInfoObj.startXpath;_annotationForm.startOffset.value=annotationConfig.rangeInfoObj.startPoint+1;_annotationForm.endPath.value=annotationConfig.rangeInfoObj.endXpath;_annotationForm.endOffset.value=annotationConfig.rangeInfoObj.endPoint+1;var mod=this.analyzeRange(annotationConfig.rangeInfoObj);if(mod==annotationConfig.excludeSelection){alert("This area of text cannot be notated.");this.undoPendingAnnotation();return false;}return true;}}},isSimpleTextSelection:function(_6f8){if(_6f8){if(document.selection&&document.selection.createRange){return (_6f8.htmlText==_6f8.text);}else{if(window.getSelection){var _6f9=_6f8.cloneContents();var div=document.createElement("div");div.appendChild(_6f9);var html=div.innerHTML;return (html==_6f8.toString());}}}return false;},getRangeOfSelection:function(){var _6fa=new Object();if(document.selection&&document.selection.createRange){_6fa=this.findIeRange();}else{if(window.getSelection||document.getSelection){_6fa=this.findMozillaRange();}else{return false;}}_6fa.isSimpleText=this.isSimpleTextSelection(_6fa.range);return _6fa;},analyzeRange:function(_6fb){var mod=this.insertHighlightWrapper(_6fb);if(mod==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}console.debug("ambra.annotation.analyzeRange() - annotationConfig.regionalDialogMarker: "+annotationConfig.regionalDialogMarker);var _6fc=dojo.byId(annotationConfig.regionalDialogMarker);_annotationDlg.setMarker(_6fc);showAnnotationDialog();},findIeRange:function(){if(document.selection.type=="Text"){var _6fd=document.selection.createRange();if(this.validateAndTextualizeRange(_6fd)==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}var _6fe=_6fd.duplicate();var _6ff=_6fe.duplicate();_6fe.collapse(true);_6ff.collapse(false);var _700=this.getRangePoint(_6fe);if(_700==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}_6fe.pasteHTML("<span id=\"tempStartPoint\" class=\"temp\"></span>");var _701=this.getRangePoint(_6ff);if(_701==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}_6ff.pasteHTML("<span id=\"tempEndPoint\" class=\"temp\"></span>");var _702=this.isAncestorOf(_700.element,_701.element,"xpathLocation",_701.xpathLocation);if(_702){_6fd.moveEnd("character",-1);_6ff=_6fd.duplicate();_6ff.collapse(false);_701=this.getRangePoint(_6ff);if(_701==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}}if(_700.element==null||_701.element==null){return null;}else{var _703=_700.element;var _704=_701.element;var _705=_700.xpathLocation;var _706=_701.xpathLocation;var _707=_700.element.id;var _708=_701.element.id;var _709=new Object();_709={range:_6fd,startPoint:_700.offset,endPoint:_701.offset,startParent:_703,endParent:_704,startXpath:_705,endXpath:_706,startParentId:_707,endParentId:_708,selection:null};return _709;}}else{return false;}},validateAndTextualizeRange:function(_70a){if(document.selection&&document.selection.createRange){if(!_70a.findText(_70a.text,0,0)){return annotationConfig.excludeSelection;}}else{if(window.getSelection){var nt=_70a.startContainer.nodeType;if(nt==1){if(_70a.endContainer.nodeType!=1||_70a.startContainer!=_70a.endContainer){return annotationConfig.excludeSelection;}if(Math.abs(_70a.startOffset-_70a.endOffset)!=1){annotationConfig.annSelErrMsg="Only one item may be selected for notation.";return annotationConfig.excludeSelection;}var ftn=ambra.domUtil.findTextNode(_70a.startContainer.childNodes[_70a.startOffset],true);var ltn=ambra.domUtil.findTextNode(_70a.startContainer.childNodes[_70a.endOffset-1],false);_70a.setStart(ftn,0);_70a.setEnd(ltn,ltn.length);}else{if(nt==3){}else{return annotationConfig.excludeSelection;}}}else{return "noSelect";}}},findMozillaRange:function(){var _70b=window.getSelection?window.getSelection():document.getSelection?document.getSelection():0;if(_70b!=""&&_70b!=null){console.debug("Inside findMozillaRange");var _70c;if(typeof _70b.getRangeAt!="undefined"){_70c=_70b.getRangeAt(0);}else{if(typeof _70b.baseNode!="undefined"){console.debug("rangeSelection.baseNode = '"+_70b.baseNode+"'\n"+"rangeSelection.baseOffset = '"+_70b.baseOffset+"'\n"+"rangeSelection.extentNode = '"+_70b.extentNode+"'\n"+"rangeSelection.extentOffset  = "+_70b.extentOffset);_70c=window.createRange?window.createRange():document.createRange?document.createRange():0;_70c.setStart(_70b.baseNode,_70b.baseOffset);_70c.setEnd(_70b.extentNode,_70b.extentOffset);if(_70c.collapsed){_70c.setStart(_70b.extentNode,_70b.extentOffset);_70c.setEnd(_70b.baseNode,_70b.baseOffset);}}}if(this.validateAndTextualizeRange(_70c)==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}var _70d=_70c.cloneRange();var _70e=_70c.cloneRange();_70c.collapse(true);_70d.collapse(false);var _70f=document.createElement("span");_70d.insertNode(_70f);var _710=this.getRangePoint(_70d);if(_710==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}var _711=this.getRangePoint(_70c);if(_711==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}_70e.setEndAfter(_70f);_70f.parentNode.removeChild(_70f);if(_711.element==null||_710.element==null){return null;}else{var _712=_711.element;var _713=_710.element;var _714=_711.xpathLocation;var _715=_710.xpathLocation;var _716=_711.element.id;var _717=_710.element.id;var _718=new Object();_718={range:_70e,startPoint:_711.offset,endPoint:_710.offset,startParent:_712,endParent:_713,startXpath:_714,endXpath:_715,startParentId:_716,endParentId:_717,selection:_70b};return _718;}}else{return false;}},getRangePoint:function(_719){var _71a="POINT_SPAN";if(_719.pasteHTML){_719.pasteHTML("<span id=\""+_71a+"\"></span>");}else{var _71b=document.createElement("span");_71b.id=_71a;_719.insertNode(_71b);}var _71c=document.getElementById(_71a);var _71d=this.getFirstXpathAncestor(_71c);if(!_71d||_71d==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}var _71e=new Object();_71e.element=_71d.element;_71e.xpathLocation=_71d.xpathLocation;_71e.offset=this.getPointOffset(_71c,_71d);_71c.parentNode.removeChild(_71c);return _71e;},getPointOffset:function(_71f,_720){var _721=0;var node=_71f;for(var _722=node.previousSibling;_722!=null;_722=_722.previousSibling){if(_722.nodeType==1){if(_722.className.match("bug")||(dojo.isIE&&_722.className.match("temp"))){}else{var _723=this.normalizeText(_722,"");_721+=_723.length;}}else{if(_722.nodeType==3){_721+=_722.length;}else{}}}if(_720){var _724=_71f.parentNode;if(_724.getAttributeNode("xpathLocation")==null){_721+=this.getPointOffset(_724,_720);}}return _721;},getAncestors:function(_725,_726){var _727=new Array();var _728=_725;while(_728.id!=_726){_728=_728.parentNode;var _729=new Object();_729.element=_728;_729.id=_728.id;_729.name=_728.name;_729.xpathLocation=(_728.getAttributeNode("xpathLocation"))?_728.getAttributeNode("xpathLocation").nodeValue:"";_727.push(_729);}return _727;},isAncestorOf:function(_72a,_72b,_72c){var _72d=this.getAncestors(_72a,annotationConfig.lastAncestor);var _72e=_72a;for(var i=0;i<_72d.length;i++){if(_72d[i][_72b]==_72c){return true;}}return false;},getFirstXpathAncestor:function(_72f){var _730=_72f;try{if(_730.getAttributeNode("xpathLocation")==null){for(var _731=_730;_731.getAttributeNode("xpathLocation")==null;_731=_731.parentNode){_730=_731;}_730=_730.parentNode;if(_730.getAttributeNode("xpathLocation")!=null&&_730.getAttributeNode("xpathLocation").nodeValue==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}else{if(_730.nodeName=="BODY"){return annotationConfig.excludeSelection;}}}var _732=new Object();_732.element=(_730.getAttributeNode("xpathLocation")!=null&_730.getAttributeNode("xpathLocation").nodeValue==annotationConfig.excludeSelection)?null:_730;_732.xpathLocation=(_730.getAttributeNode("xpathLocation")!=null)?_730.getAttributeNode("xpathLocation").nodeValue:"";return _732;}catch(err){}return false;},insertHighlightWrapper:function(_733){var _734=annotationConfig.annotationMarker+" "+(annotationConfig.isPublic?"public":"private")+"-active";var _735=(annotationConfig.isAuthor?"Author":annotationConfig.isPublic?"User":"My")+" Note "+(annotationConfig.isPublic?"(Public)":"(Private)");var _736=annotationConfig.regionalDialogMarker;var _737=_namespace+"/images/"+"note_"+(annotationConfig.isAuthor?"author":"private")+"_active.gif";var _738=annotationConfig.annotationImgMarker;var _739=document.createDocumentFragment();var _73a=document.createElement("span");_73a.className=_734;_73a.title=_735;_73a.annotationId="";var link=document.createElement("a");link.className="bug public";link.title="Click to preview this note";link.displayId="";link.onclick=function(){ambra.displayComment.show(this);return false;};link.onmouseover=function(){ambra.displayComment.mouseoverComment(this);return false;};link.onmouseout=function(){ambra.displayComment.mouseoutComment(this);return false;};link.appendChild(document.createTextNode("1"));if(_733.range.pasteHTML){var html=_733.range.htmlText;var _73b=document.createElement("div");_73b.innerHTML=html;ambra.domUtil.copyChildren(_73b,_739);var _73c=this.modifySelection(_733,_739,_73a,link,_736);if(_73c==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}if(djConfig.isDebug){console.debug("== Modified Content ==");console.debug(_73c.cloneNode(true));}if(_73c.hasChildNodes()){ambra.domUtil.removeChildren(_73b);ambra.domUtil.copyChildren(_73c,_73b);_733.range.pasteHTML(_73b.innerHTML);}var _73d=dojo.byId("tempStartPoint");ambra.domUtil.removeNode(_73d);var _73e=dojo.byId("tempEndPoint");ambra.domUtil.removeNode(_73e);document.selection.empty();}else{if(dojo.isSafari){_739=_733.range.cloneContents();_733.range.deleteContents();}else{_739=_733.range.extractContents();}console.debug("== Calling modifySelection ===");var _73c=this.modifySelection(_733,_739,_73a,link,_736);if(_73c==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}_733.range.insertNode(_73c);return;}},modifySelection:function(_73f,_740,_741,link,_742){console.debug("=== Inside modifySelelection ===");var _743;if(_73f.startXpath==_73f.endXpath){_743=document.createDocumentFragment();_743.appendChild(this.insertWrapper(_73f,_740,_741,link,_742,null));}else{_743=this.modifyMultiSelection(_73f,_740,_741,link,_742);}return _743;},modifyMultiSelection:function(_744,_745,_746,link,_747){var _748=document.createDocumentFragment();var _749=_745.childNodes;for(var i=0;i<_749.length;i++){if(_749[i].nodeName=="#text"&&(_749[i].nodeValue.match(new RegExp("\n"))||_749[i].nodeValue.match(new RegExp("\r")))){continue;}var _74a=(_749[i].getAttribute)?_749[i].getAttribute("xpathlocation"):null;var _74b=0;console.debug("=== MODIFYMULTISELECTION ==="+"\n"+"[MODIFYMULTISELECTION] i = "+i+"\n"+"node = "+_749[i].nodeName+", "+_74a+", "+_749[i].nodeValue+"\n"+"multiContent.length = "+_749.length);if(_74a!=null){if(_74a==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}else{if(_74a==_744.startXpath||_74a==_744.endXpath){var _74c=null;if(_74a==_744.startXpath){_74c=_744.startParent.nodeName;}else{if(_74a==_744.endXpath){_74c=_744.endParent.nodeName;}}var _74d=document.getElementsByAttributeValue(_74c,"xpathlocation",_74a);if(_74d!=null&&_74d.length>0){if(i==0){_74b=-1;}else{_74b=1;}}}}}var _74e=this.isContainXpath(_749[i],_74b);console.debug("doesChildrenContainXpath = "+_74e);if(_74e==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}else{if(_74e=="true"){var _74f=this.modifyMultiSelection(_744,_749[i],_746,link,_747);if(_74f==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}_748.appendChild(_74f);}else{if(_749[i].hasChildNodes()){var _750=this.insertWrapper(_744,_749[i],_746,link,_747,_74b);if(dojo.isIE){if(_74b==0){_748.appendChild(_750);--i;}}else{_748.appendChild(_750);--i;}}}}}return _748;},isContainXpath:function(node,_751){var _752=ambra.domUtil.isChildContainAttributeValue(node,"xpathlocation",null);console.debug("xpathAttr.length = "+_752.length);if(_752.length==0){return "false";}else{var _753=0;var _754=_752.length;if(_751==-1){_753=1;}else{if(_751==1){_754-=1;}}for(var i=_753;i<_754;i++){if(_752[i].value==annotationConfig.excludeSelection){return annotationConfig.excludeSelection;}}return "true";}},insertWrapper:function(_755,_756,_757,_758,_759,_75a,_75b){var _75c=_756.childNodes;var _75d=_75c.length;var _75e=0;var _75f=new Array();var _760=null;var _761=new Date();var _762=document.createDocumentFragment();if(dojo.isSafari){if(_75a==null){_75d=_75c.length-1;}else{if(_75a==1){}}}for(var i=0;i<_75d;i++){var _763=(_75c[i].getAttribute)?_75c[i].getAttribute("xpathlocation"):null;console.debug("=== INSERTWRAPPER ==="+"\nnode = "+_75c[i].nodeName+", "+_763+", "+_75c[i].nodeValue+"\nmultiPosition = "+_75a+"\ni = "+i+"\nchildContents["+i+"].nodeName = "+_75c[i].nodeName+"\nchildContents["+i+"].nodeType = "+_75c[i].nodeType+"\nchildContents["+i+"].className = "+_75c[i].className+"\nchildContents["+i+"].hasChildNodes = "+_75c[i].hasChildNodes());if(_75c[i].nodeName=="#text"&&(_75c[i].nodeValue.match(new RegExp("\n"))||_75c[i].nodeValue.match(new RegExp("\r")))){continue;}var _764;var _765=_75c[i];if(_765.nodeName=="SPAN"&&ambra.domUtil.isClassNameExist(_765,"note")){_764=_765.cloneNode(true);_764.className=_757.getAttributeNode("class").nodeValue;}else{_764=_757.cloneNode(true);_764.appendChild(_765.cloneNode(true));}if(i==0&&(_75a==null||_75a==-1)){if(dojo.isIE){_758.setAttribute("id",_759);}else{_764.setAttribute("id",_759);}ambra.domUtil.insertBefore(_758,_764.firstChild,false);}if(_75a==null||_75a==0){ambra.domUtil.replaceNode(_765,_764);}else{var _75b=_756.getAttributeNode("xpathlocation").nodeValue;var _766=null;if(_75a==-1){_766=_755.startParent.nodeName;}else{if(_75a==1){_766=_755.endParent.nodeName;}}var _767=document.getElementsByAttributeValue(_766,"xpathlocation",_75b);if(_767.length>0){var _768=dojo.byId("tempStartPoint");var _769=dojo.byId("tempEndPoint");if(_75a<0){if(_768&&_768!=null){ambra.domUtil.insertBefore(_764,_768);ambra.domUtil.removeNode(_768.nextSibling);}else{_767[_767.length-1].appendChild(_764);}}else{var _76a=document.createDocumentFragment();if(dojo.isSafari&&_75a==1&&i==(_75c.length-1)){ambra.domUtil.copyChildren(_764,_76a);}else{_76a=_764;}if(dojo.isIE&&_75e==0){_762.appendChild(_76a);ambra.domUtil.removeNode(_769.previousSibling);}else{_767[_767.length-1].insertBefore(_76a,_767[_767.length-1].childNodes[_75e]);++_75e;}}}_75f.push(_765);}}if(dojo.isIE&&_75a==1){ambra.domUtil.insertAfter(_762,_769);return;}if(_75f.length>0){for(var i=0;i<_75f.length;i++){ambra.domUtil.removeNode(_75f[i]);}}var _76b=new Date();console.debug("Duration: "+(_76b.getTime()-_761.getTime()+"ms"));return _756;},undoPendingAnnotation:function(){var arr;var _76c=document.getElementById("POINT_SPAN");if(_76c){ambra.domUtil.removeNode(_76c);}arr=dojo.query(".temp",annotationConfig.articleContainer);if(arr){for(var i=0;i<arr.length;i++){ambra.domUtil.removeNode(arr[i]);}}var rdm=dojo.byId("rdm");if(rdm){ambra.domUtil.removeNode(rdm);}arr=dojo.query("."+annotationConfig.pendingAnnotationMarker,annotationConfig.articleContainer);if(arr){var i,j,n,cns,cn,pn;for(i=0;i<arr.length;i++){n=arr[i];cns=n.childNodes;if(cns.length>0){for(j=0;j<cns.length;j++){cn=cns[j];if(cn.nodeType==3){n.parentNode.insertBefore(n.removeChild(cn),n.nextSibling);}}}}for(var i=0;i<arr.length;i++){n=arr[i];pn=n.parentNode;ambra.domUtil.removeNode(n);if(!(document.selection&&document.selection.createRange)){pn.normalize();}}}},normalizeText:function(_76d,_76e){var _76f=_76e,carr=_76d.childNodes,cn;for(var i=0;i<carr.length;i++){cn=carr[i];if(cn.nodeType==1){if(cn.className.match("bug")){}else{_76f+=this.normalizeText(cn,"");}}else{if(cn.nodeType==3){_76f+=cn.nodeValue;}}}return _76f;}};}if(!dojo._hasResource["ambra.corrections"]){dojo._hasResource["ambra.corrections"]=true;dojo.provide("ambra.corrections");ambra.corrections={aroot:null,fclist:null,arrElmFc:null,init:function(){this.aroot=dojo.byId(annotationConfig.articleContainer);this.fclist=dojo.query("."+formalCorrectionConfig.fcLinkClass);this.arrElmFc=dojo.query("."+annotationConfig.styleFormalCorrection,this.aroot);for(var x=0;x<this.fclist.length;x++){dojo.connect(this.fclist[x],"onclick",ambra.corrections.onClickFC);}},_findFrmlCrctnByAnnId:function(_770){if(this.arrElmFc!=null&&_770!=null){for(var i=0;i<this.arrElmFc.length;i++){var naid=dojo.attr(this.arrElmFc[i],"annotationid");if(naid!=null&&naid.indexOf(_770)>=0){return this.arrElmFc[i];}}}return null;},_getAnnAnchor:function(_771){var cns=_771.childNodes;if(cns){for(var i=0;i<cns.length;i++){if(cns[i].nodeName=="A"){return cns[i];}}}return null;},onClickFC:function(e){var _772=dojo.attr(e.target,formalCorrectionConfig.annid);e.preventDefault();var fcn=ambra.corrections._findFrmlCrctnByAnnId(_772);if(fcn){var _773=ambra.corrections._getAnnAnchor(fcn);if(!_773){throw "Unable to resolve annotation anchor!";}ambra.displayComment.show(_773);jumpToAnnotation(_772);}return false;}};}if(!dojo._hasResource["ambra.widget.ContextAction"]){dojo._hasResource["ambra.widget.ContextAction"]=true;dojo.provide("ambra.widget.ContextAction");(function(){var _774=null;dojo.declare("ambra.widget._MasterContextAction",[dijit._MasterTooltip],{offSetX:39,offSetY:22,show:function(id,_775,_776,_777,_778,_779){if(this.aroundNode&&this.aroundNode==_776){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_775;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var _77a=this.makePos(["BL","TL","TR","BR"],_778,_779);var pos=dijit._place(this.domNode,_77a);dojo.style(this.domNode,"opacity",0);var _77b=null;if(pos.corner.charAt(0)=="B"){_77b=dojo.query(".tip",this.domNode);}else{_77b=dojo.query(".tipu",this.domNode);}var node=dojo.byId(id);dojo.style(_77b[0],"display","block");this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_776;},makePos:function(_77c,_77d,_77e){var res=[];for(var a=0;a<_77c.length;a++){switch(_77c[a]){case "BL":res[res.length]={corner:_77c[a],pos:{x:_77d-this.offSetX,y:_77e-this.offSetY}};break;case "TL":res[res.length]={corner:_77c[a],pos:{x:_77d-this.offSetX,y:_77e+this.offSetY}};break;case "TR":res[res.length]={corner:_77c[a],pos:{x:_77d+this.offSetX,y:_77e+this.offSetY}};break;case "BR":res[res.length]={corner:_77c[a],pos:{x:_77d+this.offSetX,y:_77e-this.offSetY}};break;}if(res[res.length-1].pos.x<0){res[res.length-1].pos.x=0;}}return res;}});dojo.declare("ambra.widget.ContextAction",[dijit.Tooltip],{templateString:"<div id=\"${id}\" class=\"dijitDialog\" style=\"overflow:visible;\" dojoAttachPoint=\"wrapper\"><div dojoAttachPoint=\"containerNode\"></div></div>\n",templateString:"ambra.widget.ContextAction",_onUnHover:function(e){return;},open:function(_77f,_780,_781){_77f=_77f||this._connectNodes[0];if(!_77f){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}ambra.showContextAction(this.domNode.id,this.label||this.domNode.innerHTML,_77f,this.position,_780,_781);this._connectNode=_77f;},close:function(){ambra.hideContextAction(this._connectNode);delete this._connectNode;if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}}});ambra.showContextAction=function(id,_782,_783,_784,_785,_786){if(!ambra._MasterCA){ambra._MasterCA=new ambra.widget._MasterContextAction();}return ambra._MasterCA.show(id,_782,_783,_784,_785,_786);};ambra.hideContextAction=function(_787){if(!ambra._MasterCA){ambra._MasterCA=new ambra.widget._MasterContextAction();}return ambra._MasterCA.hide(_787);};dijit.Tooltip.defaultPosition=["left","below"];})();}if(!dojo._hasResource["ambra.displayAnnotationContext"]){dojo._hasResource["ambra.displayAnnotationContext"]=true;dojo.provide("ambra.displayAnnotationContext");var contextActionTT=null;var contextActionEventConnectors=[];var annotationContextConstants={topNodeId:"researchArticle",excludeSelection:"noSelect",ignoreSelection:"noDialog",badSelection:"badSelection",badDocumentArea:"badDocumentArea",badRangeSelection:"badRangeSelection",badElementSelection:"badElementSelection"};ambra.displayAnnotationContext={target:"",mouseUpEvent:0,mouseDownEvent:1,selectionError:"",init:function(id){console.log("init called:"+id);this.target=id;this.connect();console.log("onmouseupconnected:"+contextActionEventConnectors[this.mouseUpEvent]);},disconnect:function(e){dojo.disconnect(contextActionEventConnectors[this.mouseUpEvent]);dojo.disconnect(contextActionEventConnectors[this.mouseDownEvent]);},connect:function(){contextActionEventConnectors[this.mouseUpEvent]=dojo.connect(document.body,"onmouseup",ambra.displayAnnotationContext,"startSelect");contextActionEventConnectors[this.mouseDownEvent]=dojo.connect(document.body,"onmousedown",ambra.displayAnnotationContext,"closeContext");},startComment:function(e){console.log("startComment called:");this.disconnect(e);this.closeContext();createAnnotationOnMouseDown();},cancelContext:function(evt){ambra.displayAnnotationContext.closeContext(evt);evt.cancelBubble=true;return false;},closeContext:function(e){if(contextActionTT){contextActionTT.close();}},getSelectionFragment:function(_788){var _789=document.createDocumentFragment();if(dojo.isIE){var html=_788.range.htmlText;var _78a=document.createElement("div");_78a.innerHTML=html;ambra.domUtil.copyChildren(_78a,_789);}else{if(dojo.isSafari){_789=_788.range.cloneContents();}else{_789=_788.range.cloneContents();}}return _789;},getRangeOfSelection:function(){var _78b=new Object();if(dojo.isIE){_78b=this.findIeRange();}else{if(window.getSelection||document.getSelection){_78b=this.findGeckoRange();}else{return null;}}return _78b;},findIeRange:function(){if(document.selection.type=="Text"){var _78c=document.selection.createRange();if(_78c.text.length==0){return null;}var _78d=_78c.duplicate();var _78e=_78d.duplicate();_78d.collapse(true);_78e.collapse(false);var _78f={range:_78c,startParent:_78d.parentElement(),endParent:_78e.parentElement(),selection:document.selection};return _78f;}else{return null;}},findGeckoRange:function(){var _790=window.getSelection?window.getSelection():document.getSelection?document.getSelection():0;console.log("Inside findMozillaRange");if(_790!=""&&_790!=null){console.log("Inside findMozillaRange");var _791;if(typeof _790.getRangeAt!="undefined"){_791=_790.getRangeAt(0);}else{if(typeof _790.baseNode!="undefined"){_791=window.createRange?window.createRange():document.createRange?document.createRange():0;_791.setStart(_790.baseNode,_790.baseOffset);_791.setEnd(_790.extentNode,_790.extentOffset);if(_791.collapsed){_791.setStart(_790.extentNode,_790.extentOffset);_791.setEnd(_790.baseNode,_790.baseOffset);}}}if(!this.validateLists(_791)){return null;}var _792={range:_791,startParent:_791.startContainer,endParent:_791.endContainer,selection:_790};return _792;}},validateLists:function(_793){if(document.selection&&document.selection.createRange){if(!_793.findText(_793.text,0,0)){this.selectionError=annotationContextConstants.badSelection;return false;}}else{if(window.getSelection){var nt=_793.startContainer.nodeType;console.log("validateLists.Nodetype:"+nt);if(nt==1){if(_793.endContainer.nodeType!=1||_793.startContainer!=_793.endContainer){this.selectionError=annotationContextConstants.badElementSelection;return false;}if(Math.abs(_793.startOffset-_793.endOffset)!=1){this.selectionError=annotationContextConstants.badElementSelection;return false;}var ftn=ambra.domUtil.findTextNode(_793.startContainer.childNodes[_793.startOffset],true);var ltn=ambra.domUtil.findTextNode(_793.startContainer.childNodes[_793.endOffset-1],false);_793.setStart(ftn,0);_793.setEnd(ltn,ltn.length);return true;}else{if(nt==3){return true;}else{return false;}}}else{return false;}}},validateSelection:function(_794){var _795=this.recurseParentForXpath(_794.startParent);if(_795==false&&this.selectionError==annotationContextConstants.badDocumentArea){return false;}var _796=this.recurseParentForXpath(_794.endParent);if(_796==false&&this.selectionError==annotationContextConstants.badDocumentArea){return false;}if(_795==false||_796==false){return false;}if(_794.startParent==_794.endParent){return true;}else{var _797=this.getSelectionFragment(_794);if(!this.recurseChildrenForBadXpath(_797)){this.selectionError=annotationContextConstants.badRangeSelection;return false;}else{return true;}}},recurseChildrenForBadXpath:function(_798){console.log("recurseChildrenForBadXpath:"+_798);if(_798.hasAttribute&&_798.hasAttribute("xpathLocation")||_798.xpathLocation){if(_798.attributes["xpathLocation"].value==annotationContextConstants.excludeSelection){console.log("objNode.attributes[\"xpathLocation\"].value:"+_798.attributes["xpathLocation"].value);this.selectionError=annotationContextConstants.badSelection;return false;}if(_798.attributes["xpathLocation"].value==annotationContextConstants.ignoreSelection){console.log("objNode.attributes[\"xpathLocation\"].value:"+_798.attributes["xpathLocation"].value);console.log("recurseChildrenForBadXpath: return false");this.selectionError=annotationContextConstants.badDocumentArea;return false;}}console.log("objNode.childNodes.length:"+_798.childNodes.length);if(_798.childNodes.length>0){for(var a=0;a<_798.childNodes.length;a++){if(!this.recurseChildrenForBadXpath(_798.childNodes[a])){console.log("recurseChildrenForBadXpath: return false");return false;}}}console.log("recurseChildrenForBadXpath: return true");return true;},recurseParentForXpath:function(_799){console.log("id:"+_799.id);console.log("topNodeId:"+annotationContextConstants.topNodeId);if(_799.id==annotationContextConstants.topNodeId){return true;}else{if(_799.hasAttribute&&_799.hasAttribute("xpathLocation")||_799.xpathLocation){console.log("objNode.xpathLocation:"+_799.attributes["xpathLocation"].value);if(_799.attributes["xpathLocation"].value==annotationContextConstants.excludeSelection){this.selectionError=annotationContextConstants.badSelection;return false;}console.log("objNode.xpathLocation:"+_799.attributes["xpathLocation"].value);if(_799.attributes["xpathLocation"].value==annotationContextConstants.ignoreSelection){this.selectionError=annotationContextConstants.badDocumentArea;return false;}return true;}if(_799.parentNode==null){this.selectionError=annotationContextConstants.badDocumentArea;return false;}return this.recurseParentForXpath(_799.parentNode);}},startSelect:function(e){setTimeout(dojo.hitch(this,"displayDialog",e.pageX,e.pageY),100);},displayDialog:function(x,y){console.log("selectText:x,y:"+x+","+y);if(contextActionTT!=null){contextActionTT.close();}var _79a=this.getRangeOfSelection();if(_79a){if(this.validateSelection(_79a)){if(!loggedIn){contextActionTT=dijit.byId("ContextActionDialogNotLogged");}else{contextActionTT=dijit.byId("ContextActionDialog");}}else{if(this.selectionError==annotationContextConstants.badDocumentArea){console.log("no-op"+annotationContextConstants.ignoreSelection);return;}if(this.selectionError==annotationContextConstants.badSelection){contextActionTT=dijit.byId("ContextActionDialogBadSelection");}if(this.selectionError==annotationContextConstants.badElementSelection){contextActionTT=dijit.byId("ContextActionDialogBadSelection");}if(this.selectionError==annotationContextConstants.badRangeSelection){contextActionTT=dijit.byId("ContextActionDialogBadRangeSelection");}console.log("this.selectionError:"+this.selectionError);}console.log(contextActionTT.id);contextActionTT.connectId=this.target;contextActionTT.open(dojo.byId(this.target),x,y);}}};}if(!dojo._hasResource["ambra.responsePanel"]){dojo._hasResource["ambra.responsePanel"]=true;dojo.provide("ambra.responsePanel");ambra.responsePanel={togglePanel:{},upperContainer:"",newPanel:"",targetForm:"",previousNode:"",setPanel:function(_79b){this.newPanel=_79b;},setForm:function(_79c){this.targetForm=_79c;},show:function(_79d,_79e,_79f,_7a0,_7a1,_7a2,_7a3){this.hide();this.setPanel(_79e.widget);this.setForm(_79e.form);_79e.baseId=(_7a0)?_7a0:"";_79e.replyId=(_7a1)?_7a1:"";_79e.actionIndex=(_7a3)?_7a3:0;this.upperContainer=ambra.domUtil.getFirstAncestorByClass(_79d,_79f);this.upperContainer.style.display="none";this.togglePanel.newPanel=this.newPanel;this.togglePanel.upperContainer=this.upperContainer;ambra.domUtil.insertAfter(this.newPanel,this.upperContainer,false);if(this.previousUpperContainer){this.previousUpperContainer.style.display="block";}if(_79e.requestType=="flag"){this.resetFlaggingForm(_79e);}this.newPanel.style.display="block";if(_7a2){this.targetForm.responseTitle.value="RE: "+_7a2;this.targetForm.commentTitle.value="RE: "+_7a2;}if(this.targetForm.competingInterest){if(this.targetForm.competingInterest[0].checked==true){this.targetForm.ciStatementArea.disabled=true;}}this.previousUpperContainer=this.upperContainer;},hide:function(){if(this.togglePanel.newPanel){this.togglePanel.newPanel.style.display="none";}if(this.togglePanel.upperContainer){this.togglePanel.upperContainer.style.display="block";}if(this.previousUpperContainer){this.previousUpperContainer=null;}},submit:function(_7a4){if(!this.targetForm){this.targetForm=_7a4.form;}if(this.targetForm.responseArea.value==this.targetForm.responseArea.title){this.targetForm.comment.value="";}if(this.targetForm.competingInterest){if(this.targetForm.competingInterest[0].checked==true){this.targetForm.ciStatement.value="";}else{if(this.targetForm.ciStatementArea.value!=this.targetForm.ciStatementArea.title){this.targetForm.ciStatement.value=this.targetForm.ciStatementArea.value;}}}submitResponseInfo(_7a4);},resetFlaggingForm:function(_7a5){this.getFlagForm();this.targetForm.reasonCode[0].checked=true;this.targetForm.comment.value="";this.targetForm.responseArea.value=_7a5.responseCue;if(this.targetForm.competingInterest){this.targetForm.isCompetingInterest.value="false";this.targetForm.competingInterest[0].checked=false;this.targetForm.competingInterest[1].checked=true;this.targetForm.ciStatementArea.value="";this.targetForm.ciStatement.value="";}var _7a6=_7a5.error;ambra.domUtil.removeChildren(_7a6);},getFlagConfirm:function(){dojo.byId("flagForm").style.display="none";dojo.byId("flagConfirm").style.display="block";},getFlagForm:function(){dojo.byId("flagForm").style.display="block";dojo.byId("flagConfirm").style.display="none";}};function submitResponseInfo(_7a7){if(_7a7.error.style.display!="none"){var ani=dojo.fx.wipeOut({node:_7a7.error,duration:500});dojo.connect(ani,"onEnd",function(){sendResponseInfo(_7a7);});ani.play();}else{sendResponseInfo(_7a7);}};function sendResponseInfo(_7a8){var _7a9=_7a8.error;var _7aa=_7a8.form;ambra.domUtil.removeChildren(_7a9);var _7ab="";if(_7a8.requestType=="flag"){_7ab=_7a8.formAction[_7a8.actionIndex]+"?target="+_7a8.baseId;}else{if(_7a8.requestType=="new"){_7ab=_7a8.formAction;ambra.formUtil.disableFormFields(_7aa);}else{_7ab=_7a8.formAction+"?root="+_7a8.baseId+"&inReplyTo="+_7a8.replyId;ambra.formUtil.disableFormFields(_7aa);}}_ldc.show();dojo.xhrPost({url:(_namespace+_7ab),form:_7aa,handleAs:"json-comment-filtered",error:function(_7ac,_7ad){handleXhrError(_7ac,_7ad);ambra.formUtil.enableFormFields(_7aa);},load:function(_7ae,_7af){var _7b0=_7ae;if(_7b0.actionErrors.length>0){var _7b1="";for(var i=0;i<_7b0.actionErrors.length;i++){_7b1=_7b1+_7b0.actionErrors[i]+"\n";}var err=document.createTextNode(_7b1);_7a9.appendChild(err);dojo.fx.wipeIn({node:_7a9,duration:500}).play();ambra.formUtil.enableFormFields(_7aa);_ldc.hide();}else{if(_7b0.numFieldErrors>0){var _7b2=document.createDocumentFragment();for(var item in _7b0.fieldErrors){var _7b3="";var err=_7b0.fieldErrors[item];if(err){_7b3+=err;var _7b4=document.createTextNode(_7b3.trim());var _7b5=document.createElement("br");_7b2.appendChild(_7b4);_7b2.appendChild(_7b5);}}_7a9.appendChild(_7b2);dojo.fx.wipeIn({node:_7a9,duration:500}).play();ambra.formUtil.enableFormFields(_7aa);if(_7aa.competingInterest){if(_7aa.competingInterest[0].checked==true){_7aa.ciStatementArea.disabled=true;}}_ldc.hide();}else{if(_7a8.requestType=="flag"){_ldc.hide();ambra.responsePanel.getFlagConfirm();}else{if(_7a8.requestType=="new"){var _7b6=_7b0.annotationId;window.location.href=_namespace+"/annotation/listThread.action?inReplyTo="+_7b6+"&root="+_7b6;}else{if(dojo.isIE){ambra.domUtil.insertAfter(ambra.responsePanel.togglePanel.newPanel,document.lastChild,false);}getDiscussion(_7a8);ambra.responsePanel.hide();ambra.formUtil.textCues.reset(_7aa.responseArea,_7a8.responseCue);ambra.formUtil.enableFormFields(_7aa);}}}}}});};function getDiscussion(_7b7){var _7b8=dojo.byId(responseConfig.discussionContainer);_ldc.show();dojo.xhrGet({url:_namespace+"/annotation/listThreadRefresh.action?root="+_7b7.baseId+"&inReplyTo="+_7b7.baseId,error:function(_7b9,_7ba){handleXhrError(_7b9,_7ba);},load:function(_7bb,_7bc){_7b8.innerHTML=_7bb;_ldc.hide();}});};}if(!dojo._hasResource["ambra.rating"]){dojo._hasResource["ambra.rating"]=true;dojo.provide("ambra.rating");ambra.rating={rateScale:5,init:function(){},show:function(_7bd){if(_7bd&&_7bd=="edit"){getRatingsForUser();}else{this.resetDialog();_ratingDlg.show();}return false;},hide:function(){_ratingDlg.hide();},buildCurrentRating:function(_7be,_7bf){var _7c0=(parseInt(_7bf)/this.rateScale)*100;_7be.className+=" pct"+_7c0;dojox.data.dom.textContent(_7be,"Currently "+_7bf+"/"+this.rateScale+" Stars");},buildDialog:function(_7c1){var _7c2=document.getElementsByTagAndClassName("ul","star-rating");for(var i=0;i<_7c2.length;i++){var _7c3=_7c2[i];if(_7c3.className.match("edit")!=null){var _7c4=_7c3.childNodes;var _7c5=_7c3.id.substr(4);_7c5=_7c5.charAt(0).toLowerCase()+_7c5.substring(1);var _7c6=_7c1[_7c5];var _7c7=0;for(var n=0;n<_7c4.length;n++){var _7c8=_7c4[n];if(_7c8.nodeName=="#text"&&(_7c8.nodeValue.match(new RegExp("\n"))||_7c8.nodeValue.match(new RegExp("\r")))){continue;}if(_7c8.className.match("average")!=null||_7c2[i].className.match("overall-rating")!=null){continue;}if(_7c8.className.match("current-rating")){this.buildCurrentRating(_7c8,_7c6);firstSet=true;continue;}if(_7c7<_7c6){_7c8.onmouseover=function(){ambra.rating.hover.on(this);};_7c8.onmouseout=function(){ambra.rating.hover.off(this);};_7c7++;}}_ratingsForm[_7c5].value=_7c1[_7c5];}}if(_7c1.commentTitle){_ratingsForm.commentTitle.value=_7c1.commentTitle;_ratingsForm.cTitle.value=_7c1.commentTitle;}if(_7c1.comment){_ratingsForm.comment.value=_7c1.comment;_ratingsForm.cArea.value=_7c1.comment;}if(_7c1.cisStartDateMillis<_7c1.rateDateMillis){if(_7c1.ciStatement){_ratingsForm.ciStatement.value=_7c1.ciStatement;_ratingsForm.ciStatementArea.value=_7c1.ciStatement;_ratingsForm.isCompetingInterest.value="true";_ratingsForm.competingInterest[0].checked=false;_ratingsForm.competingInterest[1].checked=true;_ratingsForm.ciStatementArea.disabled=false;}else{_ratingsForm.ciStatement.value="";_ratingsForm.ciStatementArea.value=_ratingsForm.ciStatementArea.title;_ratingsForm.isCompetingInterest.value="false";_ratingsForm.competingInterest[0].checked=true;_ratingsForm.competingInterest[1].checked=false;_ratingsForm.ciStatementArea.disabled=true;}}else{_ratingsForm.isCompetingInterest.value="";_ratingsForm.ciStatementArea.disabled=true;}_submitMsg.style.display="none";},resetDialog:function(){ambra.domUtil.removeChildren(dojo.byId("submitRatingMsg"));var _7c9=document.getElementsByTagAndClassName("li","current-rating");for(var i=0;i<_7c9.length;i++){if(_7c9[i].className.match("average")!=null||_7c9[i].className.match("overall-rating")!=null){continue;}_7c9[i].className=_7c9[i].className.replaceStringArray(" ","pct","pct0");}_ratingsForm.isCompetingInterest.value="false";_ratingsForm.competingInterest[0].checked=true;_submitMsg.style.display="none";ambra.formUtil.textCues.reset(_ratingTitle,_ratingTitleCue);ambra.formUtil.textCues.reset(_ratingComments,_ratingCommentCue);ambra.formUtil.textCues.reset(_ratingCIStatement,_ratingStatementCue);},hover:{on:function(node){var _7ca=ambra.domUtil.firstSibling(node);_7ca.style.display="none";},off:function(node){var _7cb=ambra.domUtil.firstSibling(node);_7cb.style.display="block";}},setRatingCategory:function(node,_7cc,_7cd){_ratingsForm[_7cc].value=_7cd;var _7ce=ambra.domUtil.firstSibling(node.parentNode);var _7cf="pct"+(parseInt(_7cd)*20);_7ce.className=_7ce.className.replaceStringArray(" ","pct",_7cf);this.buildCurrentRating(_7ce,_7cd);}};function getRatingsForUser(){var _7d0=_ratingsForm.articleURI.value;dojo.xhrGet({url:_namespace+"/rate/secure/getRatingsForUser.action?articleURI="+_7d0,handleAs:"json-comment-filtered",error:function(_7d1,_7d2){handleXhrError(_7d1,_7d2);},load:function(_7d3,_7d4){var _7d5=_7d3;if(_7d5.actionErrors.length>0){var _7d6="";for(var i=0;i<_7d5.actionErrors.length;i++){_7d6=_7d6+_7d5.actionErrors[i]+"\n";}alert("ERROR: "+_7d6);}else{_ratingDlg.show();ambra.rating.buildDialog(_7d5);}}});};function updateRating(_7d7){ambra.formUtil.disableFormFields(_ratingsForm);var _7d8=dojo.byId("submitRatingMsg");if(_7d8.style.display!="none"){var ani=dojo.fx.wipeOut({node:_7d8,duration:500});dojo.connect(ani,"onEnd",function(){sendupdateRating();});ani.play();}else{sendupdateRating();}};function sendupdateRating(){ambra.formUtil.disableFormFields(_ratingsForm);ambra.domUtil.removeChildren(_submitMsg);var _7d9=_ratingsForm.articleURI.value;dojo.xhrPost({url:_namespace+"/rate/secure/rateArticle.action",handleAs:"json-comment-filtered",form:_ratingsForm,sync:true,error:function(_7da,_7db){handleXhrError(_7da,_7db);},load:function(_7dc,_7dd){var _7de=_7dc;if(_7de.actionErrors.length>0){var _7df="";for(var i=0;i<_7de.actionErrors.length;i++){_7df+=_7de.actionErrors[i]+"\n";}var err=document.createTextNode(_7df);_submitMsg.appendChild(err);dojo.fx.wipeIn({node:_submitMsg,duration:500}).play();ambra.formUtil.enableFormFields(_ratingsForm);}else{if(_7de.numFieldErrors>0){var _7e0=document.createDocumentFragment();for(var item in _7de.fieldErrors){var _7e1="";for(var _7e2 in _7de.fieldErrors[item]){var err=_7de.fieldErrors[item][_7e2];if(err&&typeof (err)=="string"){_7e1+=err;var _7e3=document.createTextNode(_7e1.trim());var _7e4=document.createElement("br");_7e0.appendChild(_7e3);_7e0.appendChild(_7e4);}}}_submitMsg.appendChild(_7e0);dojo.fx.wipeIn({node:_submitMsg,duration:500}).play();ambra.formUtil.enableFormFields(_ratingsForm);}else{_ratingDlg.hide();ambra.formUtil.enableFormFields(_ratingsForm);refreshRating(_7d9);}}}});};function refreshRating(uri){dojo.xhrGet({url:_namespace+"/rate/getUpdatedRatings.action?articleURI="+uri,handleAs:"text",error:function(_7e5,_7e6){handleXhrError(_7e5,_7e6);},load:function(_7e7,_7e8){dojo.byId("ratingRhc1").innerHTML=_7e7;}});if(dojo.byId("ratingOnArticleMetricsTab")){dojo.xhrGet({url:_namespace+"/rate/getUpdatedRatingsOnArticleMetricsTab.action?articleURI="+uri,handleAs:"text",error:function(_7e9,_7ea){handleXhrError(_7e9,_7ea);},load:function(_7eb,_7ec){dojo.byId("ratingOnArticleMetricsTab").innerHTML=_7eb;}});}};}if(!dojo._hasResource["ambra.slideshow"]){dojo._hasResource["ambra.slideshow"]=true;dojo.provide("ambra.slideshow");ambra.slideshow={slides:[],imgS:"PNG_S",imgM:"PNG_M",imgL:"PNG_L",imgTif:"TIF",linkView:"",linkTiff:"",linkPpt:"",figImg:"",figImgWidth:"",figTitle:"",figCaption:"",targetDiv:"",activeItemIndex:"",itemCount:"",setLinkView:function(aObj){this.linkView=aObj;},setLinkTiff:function(aObj){this.linkTiff=aObj;},setLinkPpt:function(aObj){this.linkPpt=aObj;},setFigImg:function(dObj){this.figImg=dObj;},setFigTitle:function(dObj){this.figTitle=dObj;},setFigCaption:function(dObj){this.figCaption=dObj;},setInitialThumbnailIndex:function(){var tn=document.getElementsByTagAndClassName("div","figure-window-nav-item");this.itemCount=tn.length;for(var i=0;i<this.itemCount;i++){if(tn[i].className.match("current")){this.activeItemIndex=i;}}},show:function(obj,_7ed){if(this.linkView){this.linkView.href=this.slides[_7ed].imageLargeUri+"&representation="+this.imgL;}if(this.linkTiff){this.linkTiff.href=this.slides[_7ed].imageAttachUri+"&representation="+this.imgTif;}if(this.linkPpt){this.linkPpt.href=this.slides[_7ed].imageAttachUri+"&representation="+this.imgM;}if(this.figImg){this.figImg.src=this.slides[_7ed].imageUri+"&representation="+this.imgM;this.figImg.title=this.slides[_7ed].titlePlain;}if(this.figTitle){this.figTitle.innerHTML=this.slides[_7ed].title;}if(this.figCaption){this.figCaption.innerHTML=this.slides[_7ed].description;}var _7ee=document.getElementsByTagAndClassName("div","current");for(var i=0;i<_7ee.length;i++){dojo.removeClass(_7ee[i],"current");}var _7ef=obj.parentNode.parentNode;dojo.addClass(_7ef,"current");if(_7ed==0){dojo.addClass(dojo.byId("previous"),"hidden");}else{dojo.removeClass(dojo.byId("previous"),"hidden");}if(_7ed==this.itemCount-1){dojo.addClass(dojo.byId("next"),"hidden");}else{dojo.removeClass(dojo.byId("next"),"hidden");}this.activeItemIndex=_7ed;window.setTimeout("ambra.slideshow.adjustViewerHeight()",100);},showSingle:function(obj,_7f0){if(this.linkView){this.linkView.href=this.slides[_7f0].imageLargeUri+"&representation="+this.imgL;}if(this.linkTiff){this.linkTiff.href=this.slides[_7f0].imageAttachUri+"&representation="+this.imgTif;}if(this.linkPpt){this.linkPpt.href=this.slides[_7f0].imageAttachUri+"&representation="+this.imgM;}if(this.figImg){this.figImg.src=this.slides[_7f0].imageUri+"&representation="+this.imgM;this.figImg.title=this.slides[_7f0].titlePlain;}if(this.figTitle){this.figTitle.innerHTML=this.slides[_7f0].title;}if(this.figCaption){this.figCaption.innerHTML=this.slides[_7f0].description;}var _7f1=document.getElementsByTagAndClassName("div","figure-window-nav-item-current");for(var i=0;i<_7f1.length;i++){_7f1[i].className=_7f1[i].className.replace(/\-current/,"");}var _7f2=obj.parentNode.parentNode;_7f2.className=_7f2.className.concat("-current");},getFigureInfo:function(_7f3){if(_7f3.hasChildNodes){var _7f4=document.createDocumentFragment();for(var i=0;i<_7f3.childNodes.length;i++){var _7f5=_7f3.childNodes[i];if(_7f5.nodeName=="A"){for(var n=0;n<_7f5.childNodes.length;n++){var _7f6=_7f5.childNodes[n];if(_7f6.nodeName=="IMG"){this.figImg=_7f6;}}}else{if(_7f6.nodeName=="H5"){ambra.domUtil.copyChildren(_7f6,this.figTitle);}else{var _7f7=_7f6;_7f7.getAttributeNode("xpathlocation")="noSelect";_7f4.appendChild(_7f7);}}}ambra.domUtil.copyChildren(_7f4,this.figCaption);return;}else{return false;}},adjustContainerHeight:function(obj){var _7f8=dijit.getViewport();var _7f9=ambra.domUtil.getCurrentOffset(obj);var _7fa=_7f8.h-(10*_7f9.top);obj.style.height=_7fa+"px";obj.style.overflow="auto";},adjustViewerHeight:function(){var _7fb=dojo.byId("figure-window-nav");var _7fc=dojo.byId("figure-window-container");var _7fd=dojo._getMarginBox(_7fb).h;var _7fe=dojo._getMarginBox(_7fc).h;if(_7fd>_7fe){_7fc.parentNode.style.height=_7fd+"px";_7fb.style.borderRight="2px solid #ccc";_7fc.style.borderLeft="none";}else{_7fc.parentNode.style.height="auto";_7fb.style.borderRight="none";_7fc.style.borderLeft="2px solid #ccc";}},adjustViewerWidth:function(_7ff,_800){ambra.domUtil.setContainerWidth(_7ff,dojo._getMarginBox(ambra.slideshow.figureImg).w,_800,1);},showPrevious:function(obj){if(this.activeItemIndex<=0){return false;}else{var _801=this.activeItemIndex-1;var _802=dojo.byId("tn"+_801);this.show(_802,_801);if(_801==0){dojo.addClass(obj,"hidden");}if(this.activeItemIndex==this.itemCount-1){dojo.removeClass(dojo.byId("next"),"hidden");}this.activeItemIndex=_801;}},showNext:function(obj){if(this.activeItemIndex==this.itemCount-1){return false;}else{var _803=this.activeItemIndex+1;var _804=dojo.byId("tn"+_803);this.show(_804,_803);if(_803==this.itemCount-1){dojo.addClass(obj,"hidden");}if(this.activeItemIndex==0){dojo.removeClass(dojo.byId("previous"),"hidden");}this.activeItemIndex=_803;}},openViewer:function(url){var _805=window.open(url,"plosSlideshow","directories=no,location=no,menubar=no,resizable=yes,status=no,scrollbars=yes,toolbar=no,height=600,width=800");return false;},closeReturn:function(url){if(window.name=="plosSlideshow"||window.opener!=null){self.close();window.opener.focus();}else{document.location=url;}}};}dojo.provide("dojo.nls.ambra_xx");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.xx");dijit.nls.loading.xx={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.xx");dijit.nls.common.xx={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.nls.ambra_ROOT");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.ROOT");dijit.nls.loading.ROOT={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.ROOT");dijit.nls.common.ROOT={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.nls.ambra_en");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en");dijit.nls.loading.en={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en");dijit.nls.common.en={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dojo.nls.ambra_en-us");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.i18n._preloadLocalizations("dojo.nls.ambra",["ROOT","en","en-us","xx"]);
