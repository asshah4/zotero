function AppendSubscriptionParameterToUrl(t){var e="true"==$("#hfEnableSubscriptionFilter").val().toLowerCase(),i=t;return e&&(i=t+"&subonly=true"),i}function isValidDate(t){var e=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(t);if(null==e)return!1;var i=e[2],n=e[1]-1,a=e[3],s=new Date(a,n,i);return s.getDate()==i&&s.getMonth()==n&&s.getFullYear()==a}function isYearOnly(t){var e=/^(\d{4})$/.exec(t);return e&&e[1]>-1}function updateYearOnlyToFullDate(t,e){var i=t.val(),n=e?"01":"12",a=e?"01":"31";return t.val(n+"/"+a+"/"+i),t.val()}!function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){(n(t,e)?s:a)(t,e)}var n,a,s;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},a=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},a=function(t,e){n(t,e)||(t.className=t.className+" "+e)},s=function(t,i){t.className=t.className.replace(e(i)," ")});var r={hasClass:n,addClass:a,removeClass:s,toggleClass:i,has:n,add:a,remove:s,toggle:i};"function"==typeof define&&define.amd?define(r):t.classie=r}(window);var SCM=SCM||{};SCM.JSUtility=function($,$win,$body,undefined){function equalHeights(t,e){function i(){if(viewport=updateViewportDimensions(),n.attr("style",""),n.length&&viewport.width>e){var t=0;n.attr("style",""),n.each(function(){var e=$(this).outerHeight();t<e&&(t=e)}),n.css("height",t)}}var n=$(t),a=debounce(function(){i()},100,!1);i(),$win.resize(function(){a()})}function triggerClickOnAnotherElement(){$("[data-trigger-click]").click(function(t){t.preventDefault();var e=$($(this).attr("data-trigger-click"))[0];e&&e.click()})}function smoothScrollLinks(){$(".smooth-scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash),e=t.offset().top-100;if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html,body").animate({scrollTop:e},500),!1}})}function scrollToLocation(t,e){var i=$(t);if(e=e||500,i.length){var n=i.offset().top-92;$("html,body").animate({scrollTop:n},e)}}function addStateToggle(t,e,i,n,a){function s(){$(e).removeClass(o),r.removeClass(l),n&&c.removeClass(u)}var r=$(t),o="active-state",l="target-active",c=$("html, body"),u=e.replace(/.|#/,"")+"-active",d="click."+u,p=i||".close",h=$(e).find(p);n=n||!1,a=a||!1,r.click(function(t){t.preventDefault(),$(e).toggleClass(o),r.toggleClass(l),n&&c.toggleClass(u)}),c.off(d),c.on(d,function(t){$(t.target).closest(r.add($(e))).length||s()}),$(document).ajaxComplete(function(){a&&s()}),h.click(function(){s()})}function toggleVisibility(){$("[data-tog-target]").click(function(){var t=$(this),e=$(t.attr("data-tog-target"));t.toggleClass("target-active"),e.slideToggle({duration:300,done:function(){e.css("overflow","inherit")}}).toggleClass("active")})}function openDeepLinkedTab(){var t;if(location.hash&&(t=window.location.hash.substr(1)),t){var e='[data-toggle="#'+t+'"]',i=$(e);i.length&&(i.hasClass("target-active")||i.click(),setTimeout(function(){var t=i.offset().top-92;$("html, body").animate({scrollTop:t},"200")},210))}}function accordion(){var t=$(".accordion");if(t.length){var e={duration:200,done:function(){$(this).css("overflow","inherit")}};t.each(function(){var t=$(this),i=t.find("[data-toggle]"),n=t.find("[data-tab]");i.click(function(){var t=$(this),a=t.attr("data-toggle"),s=$(a);t.hasClass("target-active")?(t.removeClass("target-active"),s.removeClass("active"),s.slideUp(e)):(window.location.hash=a,window.scroll(0,s[0]),i.removeClass("target-active"),n.removeClass("active"),n.slideUp(e),t.addClass("target-active"),s.addClass("active"),s.slideDown(e))})}),openDeepLinkedTab()}}function toggleVisibilityMobile(t,e){var i=$(t),n=function(){var e=$(this),i=$(e.attr("data-mobile-tog-target"));".toolbar-search-trigger"===t&&$(".header-wrap").addClass("z2010"),e.toggleClass("target-active"),i.slideToggle({duration:300,done:function(){i.css("overflow","inherit"),$(".toolbar-search-trigger").hasClass("target-active")||$(".header-wrap").removeClass("z2010")}}).toggleClass("active")},a=debounce(function(){viewport=updateViewportDimensions(),viewport.width>e?(i.off("click.tog-vis"),i.removeClass("target-active"),i.each(function(){$($(this).attr("data-mobile-tog-target")).removeAttr("style").removeClass("active")})):(i.off("click.tog-vis"),i.on("click.tog-vis",n))},150,!1);a(),$win.resize(function(){a()})}function toggleTabs(t,e,i,n,a){var s=$(t);if(s.length){var r=s.find(e),o=$(i);a=a||!1;!function(){var t=n?$(n):r.first(),e=t.attr("href")||t.attr("data-href");r.removeClass("target-tab-active").filter(t).addClass("target-tab-active"),o.removeClass("tab-active").filter(e).addClass("tab-active")}(),r.click(function(t){var e=$(this),i=$(e.attr("href")||e.attr("data-href"));e.is("a")&&t.preventDefault();var n=function(){o.removeClass("tab-active"),i.addClass("tab-active"),r.removeClass("target-tab-active"),e.addClass("target-tab-active")};a&&e.hasClass("target-tab-active")?(r.removeClass("target-tab-active"),o.removeClass("tab-active")):n()})}}function removeEmptyTabs(t,e,i){e=e||[],$(t).each(function(){var t=$(this),n=t.attr("href"),a=$(n);if(e.indexOf(n)>-1)return!0;var s=i?a.find("*").not(i):a.find("*");if(s.length<10){var r=s.text();0===(r!==undefined?$.trim(r):1).length&&(t.attr("style","display: none!important").addClass("tab-no-content"),a.attr("style","display: none!important"))}})}function toggleHoverState(t,e,i){var n,a=$(t);e=e||150,i=i||"target-active",a.hover(function(){var t=$(this);n=setTimeout(function(){t.addClass(i)},e)},function(){clearTimeout(n);var t=$(this);setTimeout(function(){t.removeClass(i)},e)})}function logErrors(jqXHR,textStatus,errorThrown){if(window.console){var err=eval("("+jqXHR.responseText+")");console.log("error: "+err.Messages),console.log("status: "+textStatus)}}function printPortionOfPage(t,e){var i=$(e),n=$(t);i.click(function(){$body.addClass("print--hide-all"),n.addClass("print--section"),setTimeout(function(){window.print()},100)})}function debounce(t,e,i){var n;return function(){var a=this,s=arguments,r=function(){n=null,i||t.apply(a,s)},o=i&&!n;clearTimeout(n),n=setTimeout(r,e),o&&t.apply(a,s)}}var publicApi={equalHeights:equalHeights,debounce:debounce,smoothScrollLinks:smoothScrollLinks,addStateToggle:addStateToggle,toggleVisibility:toggleVisibility,toggleVisibilityMobile:toggleVisibilityMobile,toggleTabs:toggleTabs,removeEmptyTabs:removeEmptyTabs,toggleHoverState:toggleHoverState,logErrors:logErrors,accordion:accordion,printPortionOfPage:printPortionOfPage,triggerClickOnAnotherElement:triggerClickOnAnotherElement,scrollToLocation:scrollToLocation,openDeepLinkedTab:openDeepLinkedTab};return publicApi}(jQuery,jQuery(window),jQuery("body")),function(t){"use strict";function e(t,e){if(!t)return!1;for(var i=t.target||t.srcElement||t||!1;i&&i!=e;)i=i.parentNode||!1;return!1!==i}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t,e){this.el=t,this.options=i({},this.options),i(this.options,e),this._init()}n.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(t){return!1}},n.prototype._init=function(){var t=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=t&&t.disabled,this.selectedOpt=t||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder"),this._initEvents()},n.prototype._createSelectEl=function(){var t="",e=function(t){var e="",i="",n="";return!t.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(i+="cs-selected ",this.foundSelected=!0),t.getAttribute("data-class")&&(i+=t.getAttribute("data-class")),t.getAttribute("data-link")&&(n="data-link="+t.getAttribute("data-link")),""!==i&&(e='class="'+i+'" '),"<li "+e+n+' data-option data-value="'+t.value+'"><span>'+t.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(i){if(!i.disabled){var n=i.tagName.toLowerCase();"option"===n?t+=e(i):"optgroup"===n&&(t+='<li class="cs-optgroup"><span>'+i.label+"</span><ul>",[].slice.call(i.children).forEach(function(i){t+=e(i)}),t+="</ul></li>")}});var i=SCM.SiteJS.getCookie("persistentSearchFilters"),n=i.match(/f_JournalDisplayName=([^&]*)/),a=this.selectedOpt.textContent,s="";if(n&&(a=decodeURI(n[1]),a=a.replace(/\+/g," ").replace(/\%26/g,"&")),App.isLearningContent||App.isLearningSelfServe){a="Learning",s=' data-value="L*"';$(".site-search-bar").find(".search-term").attr("placeholder","Search for CME by topic")}var r='<div class="cs-options"><ul>'+t+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="cs-placeholder is-a"'+s+">"+a+"</span>"+r,this.el.parentNode.insertBefore(this.selEl,this.el.parentNode.firstChild),this.selEl.appendChild(this.el)},n.prototype._initEvents=function(){var t=this;this.selPlaceholder.addEventListener("click",function(){t._toggleSelect()}),this.selOpts.forEach(function(e,i){e.addEventListener("click",function(){t.current=i,t._changeOption(),t._toggleSelect()})}),document.addEventListener("click",function(i){var n=i.target;t._isOpen()&&n!==t.selEl&&!e(n,t.selEl)&&t._toggleSelect()}),this.selEl.addEventListener("keydown",function(e){switch(e.keyCode||e.which){case 38:e.preventDefault(),t._navigateOpts("prev");break;case 40:e.preventDefault(),t._navigateOpts("next");break;case 32:e.preventDefault(),t._isOpen()&&void 0!==t.preSelCurrent&&-1!==t.preSelCurrent&&t._changeOption(),t._toggleSelect();break;case 13:e.preventDefault(),t._isOpen()&&void 0!==t.preSelCurrent&&-1!==t.preSelCurrent&&(t._changeOption(),t._toggleSelect());break;case 27:e.preventDefault(),t._isOpen()&&t._toggleSelect()}})},n.prototype._navigateOpts=function(t){this._isOpen()||this._toggleSelect();var e=void 0!==this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===t&&e>0||"next"===t&&e<this.selOptsCount-1)&&(this.preSelCurrent="next"===t?e+1:e-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],"cs-focus"))},n.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))},n.prototype._changeOption=function(){void 0!==this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent;var i=$(".site-search-bar").find(".search-term");"Learning"===this.selPlaceholder.textContent?i.attr("placeholder","Search for CME by topic"):i.attr("placeholder","Enter Search Term"),this.el.value=e.getAttribute("data-value");var n=this.selEl.querySelector("li.cs-selected");n&&classie.remove(n,"cs-selected"),classie.add(e,"cs-selected"),e.getAttribute("data-link")&&(this.options.newTab?t.open(e.getAttribute("data-link"),"_blank"):t.location=e.getAttribute("data-link")),this.options.onChange(this.el.value)},n.prototype._isOpen=function(t){return classie.has(this.selEl,"cs-active")},n.prototype._removeFocus=function(t){var e=this.selEl.querySelector("li.cs-focus");e&&classie.remove(e,"cs-focus")},t.SelectFx=n}(window);var SCM=SCM||{};!function(t,e,i){var n={},a=n.hasOwnProperty;t.subscribe=function(t,e){a.call(n,t)||(n[t]=[]);var i=n[t].push(e)-1;return{remove:function(){delete n[t][i]}}},t.publish=function(t,i){a.call(n,t)&&e.each(n[t],function(t,e){e(void 0!==i?i:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var App=App||{};App.notifyViewportChange=debounce(function(){App.cachedViewport!==App.activeViewport&&(App.cachedViewport=App.activeViewport,SCM.EventEmitter.publish("viewport-changed"))},50,!1),function(t,e,i){function n(){[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(t){new SelectFx(t)})}function a(){if(App.isMobile){e(".nav").on("touchmove",function(t){t.stopPropagation()})}}function s(t){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)}function r(){e(".title-image").width()+e("#BodyContent_Header_divAccessProvidedBy").width()+e(".auth--provided-by").width()+30>e(window).width()?e("#BodyContent_Header_divAccessProvidedBy").hide():e("#BodyContent_Header_divAccessProvidedBy").show()}function o(){e(".email-signup--submit").click(function(t){t.preventDefault();var i=e(this),n=i.closest(".email-signup"),a=n.find(".email-signup--input").val(),r=n.find(".email-signup--user-message"),o=e(".footer-social-links > a").first().data("emailid");s(a)?(console.log("Valid email address was entered"),e.ajax({url:"https://silverchair.emailcampaigns.net/CSB/Public/ProcessHostedForm.aspx",type:"POST",dataType:"html",data:{4711343:a,FormInfo:o},success:function(t){t.search(/Thank/)>=0?(console.log("Submission was a success!"),n.find(".email-signup--input-wrap").hide(),i.hide(),r.html("<p style='color: #449141'>Thank you! You will receive an email shortly to verify your email address.</p>")):(r.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>"),console.log("unexpected error"))},error:function(t){console.log(t),r.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>")}})):(console.log("ERROR: invalid email address was entered"),r.html("<p style='color: #d71635'>Invalid email address, please try again.</p>"))})}function l(){if(App.isMyAccount){e(".footer-service-link").click(function(t){this.href.indexOf("myaccount")>-1&&(t.preventDefault(),window.location.hash=this.hash,SCM.JSUtility.openDeepLinkedTab())})}}function c(){e(".auth--ind-sign-in, .auth--ind-create, .sign-in--personal-link, .sign-in--create-link, .btn--free-cme, .cme-info.no-access a, .quiz-no-access .sign-in").click(function(){if(window.history){var t=window.location.href+(window.location.href.indexOf("?")<0?"?":"&")+"appId=scweb";window.history.replaceState(null,null,t)}})}t.queryParameters=function(){var t={};if(window.location.search)for(var e=window.location.search.slice(1).split("&"),i=0;i<e.length;i++){var n=e[i].split("=");t[n[0]]=decodeURI(n[1])}return t},t.init=function(){SCM.JSUtility.addStateToggle(".nav-toggler",".nav",".close",!0),SCM.JSUtility.addStateToggle(".auth--trigger",".auth--dropdown",".close",!0),SCM.JSUtility.toggleVisibilityMobile(".toolbar-search-trigger",App.mobileUpperBreakpoint),r(),e(window).resize(function(){r()}),n(),a(),l(),c()},t.windowLoadInit=function(){SCM.JSUtility.toggleVisibilityMobile(".footer-heading",App.mobileUpperBreakpoint),o()}}(App.Global=App.Global||{},jQuery),function(t,e,i,n){"use strict";function a(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}!function(e){for(var i=e.length,n=t("head");i--;)0===n.has("."+e[i]).length&&n.append('<meta class="'+e[i]+'" />')}(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&void 0!==i.body&&FastClick.attach(i.body)});var s=function(e,n){if("string"==typeof e){if(n){var a;if(n.jquery){if(!(a=n[0]))return n}else a=n;return t(a.querySelectorAll(e))}return t(i.querySelectorAll(e))}return t(e,n)},r=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},o=function(t){for(var e=t.split("-"),i=e.length,n=[];i--;)0!==i?n.push(e[i]):this.namespace.length>0?n.push(this.namespace,e[i]):n.push(e[i]);return n.reverse().join("-")},l=function(e,i){var n=this,a=function(){var a=s(this),r=!a.data(n.attr_name(!0)+"-init");a.data(n.attr_name(!0)+"-init",t.extend({},n.settings,i||e,n.data_options(a))),r&&n.events(this)};if(s(this.scope).is("["+this.attr_name()+"]")?a.call(this.scope):s("["+this.attr_name()+"]",this.scope).each(a),"string"==typeof e)return this[e].call(this,i)},c=function(t,e){function i(){e(t[0])}function n(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}if(!t.attr("src"))return void i();t[0].complete||4===t[0].readyState?i():n.call(t)};e.matchMedia||(e.matchMedia=function(){var t=e.styleMedia||e.media;if(!t){var n=i.createElement("style"),a=i.getElementsByTagName("script")[0],s=null;n.type="text/css",n.id="matchmediajs-test",a.parentNode.insertBefore(n,a),s="getComputedStyle"in e&&e.getComputedStyle(n,null)||n.currentStyle,t={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=e:n.textContent=e,"1px"===s.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){function i(){n&&(r(i),l&&t.fx.tick())}for(var n,a=0,s=["webkit","moz"],r=e.requestAnimationFrame,o=e.cancelAnimationFrame,l=void 0!==t.fx;a<s.length&&!r;a++)r=e[s[a]+"RequestAnimationFrame"],o=o||e[s[a]+"CancelAnimationFrame"]||e[s[a]+"CancelRequestAnimationFrame"];r?(e.requestAnimationFrame=r,e.cancelAnimationFrame=o,l&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,i())},t.fx.stop=function(){n=!1})):(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),s=e.setTimeout(function(){t(i+n)},n);return a=i+n,s},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),e.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:s(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":s(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:s(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":s(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:s(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":s(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:s(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":s(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:s(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:n},init:function(t,i,n,a,r){var o=[t,n,a,r],l=[];if(this.rtl=/rtl/i.test(s("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),i&&"string"==typeof i&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&l.push(this.init_lib(i,o));else for(var c in this.libs)l.push(this.init_lib(c,i));return s(e).load(function(){s(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,i){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),i&&i.hasOwnProperty(e)?(void 0!==this.libs[e].settings?t.extend(!0,this.libs[e].settings,i[e]):void 0!==this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,i[e]),this.libs[e].init.apply(this.libs[e],[this.scope,i[e]])):(i=i instanceof Array?i:new Array(i),this.libs[e].init.apply(this.libs[e],i))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=r,t.add_namespace=o,t.bindings=l,t.S=this.utils.S},inherit:function(t,e){for(var i=e.split(" "),n=i.length;n--;)this.utils.hasOwnProperty(i[n])&&(t[i[n]]=this.utils[i[n]])},set_namespace:function(){var e=this.global.namespace===n?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===n||/false/i.test(e)?"":e},libs:{},utils:{S:s,throttle:function(t,e){var i=null;return function(){var n=this,a=arguments;null==i&&(i=setTimeout(function(){t.apply(n,a),i=null},e))}},debounce:function(t,e,i){var n,a;return function(){var s=this,r=arguments,o=function(){n=null,i||(a=t.apply(s,r))},l=i&&!n;return clearTimeout(n),n=setTimeout(o,e),l&&(a=t.apply(s,r)),a}},data_options:function(e,i){function n(e){return"string"==typeof e?t.trim(e):e}i=i||"options";var a,s,r,o={},l=function(t){var e=Foundation.global.namespace;return e.length>0?t.data(e+"-"+i):t.data(i)}(e);if("object"==typeof l)return l;for(r=(l||":").split(";"),a=r.length;a--;)s=r[a].split(":"),s=[s[0],s.slice(1).join(":")],/true/i.test(s[1])&&(s[1]=!0),/false/i.test(s[1])&&(s[1]=!1),function(t){return!isNaN(t-0)&&null!==t&&""!==t&&!1!==t&&!0!==t}(s[1])&&(-1===s[1].indexOf(".")?s[1]=parseInt(s[1],10):s[1]=parseFloat(s[1])),2===s.length&&s[0].length>0&&(o[n(s[0])]=n(s[1]));return o},register_media:function(e,i){Foundation.media_queries[e]===n&&(t("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[e]=a(t("."+i).css("font-family")))},add_custom_rule:function(t,e){if(e===n&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{Foundation.media_queries[e]!==n&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(t,e){var i=this,a=t.length;(0===a||function(t){for(var e=t.length,i=e-1;i>=0;i--)if(t.attr("height")===n)return!1;return!0}(t))&&e(t),t.each(function(){c(i.S(this),function(){0===(a-=1)&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),function(t,e,i,n){"use strict";function a(t){var e=/fade/i.test(t),i=/pop/i.test(t);return{animate:e||i,pop:i,fade:e}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:t.noop,bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,i,n){t.extend(!0,this.settings,i,n),this.bindings(i,n)},events:function(t){var e=this,n=e.S;return n(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(t){if(t.preventDefault(),!e.locked){var i=n(this),a=i.data(e.data_attr("reveal-ajax")),s=i.data(e.data_attr("reveal-replace-content"));if(e.locked=!0,void 0===a)e.open.call(e,i);else{var r=!0===a?i.attr("href"):a;e.open.call(e,i,{url:r},{replaceContentSel:s})}}}),n(i).on("click.fndtn.reveal",this.close_targets(),function(t){if(t.preventDefault(),!e.locked){var i=n("["+e.attr_name()+"].open").data(e.attr_name(!0)+"-init")||e.settings,a=n(t.target)[0]===n("."+i.bg_class)[0];if(a){if(!i.close_on_background_click)return;t.stopPropagation()}e.locked=!0,e.close.call(e,a?n("["+e.attr_name()+"].open:not(.toback)"):n(this).closest("["+e.attr_name()+"]"))}}),n("["+e.attr_name()+"]",this.scope).length>0?n(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):n(this.scope).on("open.fndtn.reveal","["+e.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+e.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.close_video),!0},key_up_on:function(t){var e=this;return e.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(t){var i=e.S("["+e.attr_name()+"].open"),n=i.data(e.attr_name(!0)+"-init")||e.settings;n&&27===t.which&&n.close_on_esc&&!e.locked&&e.close.call(e,i)}),!0},key_up_off:function(t){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(i,n){var a,s=this;i?void 0!==i.selector?a=s.S("#"+i.data(s.data_attr("reveal-id"))).first():(a=s.S(this.scope),n=i):a=s.S(this.scope);var r=a.data(s.attr_name(!0)+"-init");if(r=r||this.settings,a.hasClass("open")&&i.attr("data-reveal-id")==a.attr("id"))return s.close(a);if(!a.hasClass("open")){var o=s.S("["+s.attr_name()+"].open");if(void 0===a.data("css-top")&&a.data("css-top",parseInt(a.css("top"),10)).data("offset",this.cache_offset(a)),a.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(a),a.on("open.fndtn.reveal",function(t){t.namespace}),a.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),o.length<1&&this.toggle_bg(a,!0),"string"==typeof n&&(n={url:n}),void 0!==n&&n.url){var l=void 0!==n.success?n.success:null;t.extend(n,{success:function(e,i,n){if(t.isFunction(l)){var c=l(e,i,n);"string"==typeof c&&(e=c)}"undefined"!=typeof options&&void 0!==options.replaceContentSel?a.find(options.replaceContentSel).html(e):a.html(e),s.S(a).foundation("section","reflow"),s.S(a).children().foundation(),o.length>0&&(r.multiple_opened?s.to_back(o):s.hide(o,r.css.close)),s.show(a,r.css.open)}}),r.on_ajax_error!==t.noop&&t.extend(n,{error:r.on_ajax_error}),t.ajax(n)}else o.length>0&&(r.multiple_opened?s.to_back(o):s.hide(o,r.css.close)),this.show(a,r.css.open)}s.S(e).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),i=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings,a=this;i.length>0&&(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===i.length||!n.multiple_opened||e.length>1)&&(a.toggle_bg(e,!1),a.to_front(e)),n.multiple_opened?(a.hide(e,n.css.close,n),a.to_front(t(t.makeArray(i).reverse()[1]))):a.hide(i,n.css.close,n))},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,i){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var n=this.settings.bg.filter(":visible").length>0;i!=n&&((void 0==i?n:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,n){if(n){var s=i.data(this.attr_name(!0)+"-init")||this.settings,r=s.root_element,o=this;if(0===i.parent(r).length){var l=i.wrap('<div style="display: none;" />').parent();i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(l),i.unwrap().unbind("closed.fndtn.reveal.wrapped")}),i.detach().appendTo(r)}var c=a(s.animation);if(c.animate||(this.locked=!1),c.pop){n.top=t(e).scrollTop()-i.data("offset")+"px";var u={top:t(e).scrollTop()+i.data("css-top")+"px",opacity:1};return setTimeout(function(){return i.css(n).animate(u,s.animation_speed,"linear",function(){o.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}if(c.fade){n.top=t(e).scrollTop()+i.data("css-top")+"px";var u={opacity:1};return setTimeout(function(){return i.css(n).animate(u,s.animation_speed,"linear",function(){o.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}return i.css(n).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var s=this.settings;return a(s.animation).fade?i.fadeIn(s.animation_speed/2):(this.locked=!1,i.show())},to_back:function(t){t.addClass("toback")},to_front:function(t){t.removeClass("toback")},hide:function(i,n){if(n){var s=i.data(this.attr_name(!0)+"-init"),r=this;s=s||this.settings;var o=a(s.animation);if(o.animate||(this.locked=!1),o.pop){var l={top:-t(e).scrollTop()-i.data("offset")+"px",opacity:0};return setTimeout(function(){return i.animate(l,s.animation_speed,"linear",function(){r.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}if(o.fade){var l={opacity:0};return setTimeout(function(){return i.animate(l,s.animation_speed,"linear",function(){r.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}return i.hide().css(n).removeClass("open").trigger("closed.fndtn.reveal")}var s=this.settings;return a(s.animation).fade?i.fadeOut(s.animation_speed/2):i.hide()},close_video:function(e){var i=t(".flex-video",e.target),n=t("iframe",i);n.length>0&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),i.hide())},open_video:function(e){var i=t(".flex-video",e.target),n=i.find("iframe");if(n.length>0){if("string"==typeof n.attr("data-src"))n[0].src=n.attr("data-src");else{var a=n[0].src;n[0].src=void 0,n[0].src=a}i.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10)+t.scrollY;return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(t){function e(t,e){for(var i=window,n=(t||"").split(".");i&&n.length;)i=i[n.shift()];return"function"==typeof i?i:(e.push(t),Function.constructor.apply(null,e))}function i(t){return"GET"===t||"POST"===t}function n(t,e){i(e)||t.setRequestHeader("X-HTTP-Method-Override",e)}function a(e,i,n){var a;-1===n.indexOf("application/x-javascript")&&(a=(e.getAttribute("data-ajax-mode")||"").toUpperCase(),t(e.getAttribute("data-ajax-update")).each(function(e,n){var s;switch(a){case"BEFORE":s=n.firstChild,t("<div />").html(i).contents().each(function(){n.insertBefore(this,s)});break;case"AFTER":t("<div />").html(i).contents().each(function(){n.appendChild(this)});break;default:t(n).html(i)}}))}function s(s,r){var o,l,c,u;(o=s.getAttribute("data-ajax-confirm"))&&!window.confirm(o)||(l=t(s.getAttribute("data-ajax-loading")),u=s.getAttribute("data-ajax-loading-duration")||0,t.extend(r,{type:s.getAttribute("data-ajax-method")||void 0,url:s.getAttribute("data-ajax-url")||void 0,beforeSend:function(t){var i;return n(t,c),
i=e(s.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),!1!==i&&l.show(u),i},complete:function(){l.hide(u),e(s.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(t,i,n){a(s,t,n.getResponseHeader("Content-Type")||"text/html"),e(s.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:e(s.getAttribute("data-ajax-failure"),["xhr","status","error"])}),r.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),c=r.type.toUpperCase(),i(c)||(r.type="POST",r.data.push({name:"X-HTTP-Method-Override",value:c})),t.ajax(r))}function r(e){var i=t(e).data(l);return!i||!i.validate||i.validate()}var o="unobtrusiveAjaxClick",l="unobtrusiveValidation";t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),s(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var i=e.target.name,n=t(e.target),a=n.parents("form")[0],s=n.offset();t(a).data(o,[{name:i+".x",value:Math.round(e.pageX-s.left)},{name:i+".y",value:Math.round(e.pageY-s.top)}]),setTimeout(function(){t(a).removeData(o)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(e){var i=e.target.name,n=t(e.target).parents("form")[0];t(n).data(o,i?[{name:i,value:e.target.value}]:[]),setTimeout(function(){t(n).removeData(o)},0)}),t(document).on("submit","form[data-ajax=true]",function(e){var i=t(this).data(o)||[];e.preventDefault(),r(this)&&s(this,{url:this.action,type:this.method||"GET",data:i.concat(t(this).serializeArray())})})}(jQuery),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var i=t.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),!1)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e&=i.element(this)}),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n=this[0];if(e){var a=t.data(n.form,"validator").settings,s=a.rules,r=t.validator.staticRules(n);switch(e){case"add":t.extend(r,t.validator.normalizeRule(i)),s[n.name]=r,i.messages&&(a.messages[n.name]=t.extend(a.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],r;var o={};return t.each(i.split(/\s/),function(t,e){o[e]=r[e],delete r[e]}),o}}var l=t.validator.normalizeRules(t.extend({},t.validator.metadataRules(n),t.validator.classRules(n),t.validator.attributeRules(n),t.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=t.extend({required:c},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+e.value)},filled:function(e){return!!t.trim(""+e.value)},unchecked:function(t){return!t.checked}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),i)}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t,e){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t,e){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastActive)&&this.element(t)},onclick:function(t,e){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,n){t.each(n.split(/\s/),function(t,n){i[n]=e})});var n=this.settings.rules;t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=!1!==this.check(e);return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),n=t(e).val();return"radio"===i||"checkbox"===i?t('input[name="'+t(e).attr("name")+'"]:checked').val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n=t(e).rules(),a=!1,s=this.elementValue(e);for(var r in n){var o={method:r,parameters:n[r]};try{if("dependency-mismatch"===(i=t.validator.methods[r].call(this,s,e,o.parameters))){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(t){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+e.id+", check the '"+o.method+"' method",t),t}}if(!a)return this.objectLength(n)&&this.successList.push(e),!0},customMetaMessage:function(e,i){if(t.metadata){var n=this.settings.meta?t(e).metadata()[this.settings.meta]:t(e).metadata();return n&&n.messages&&n.messages[i]}},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),this.customMetaMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),a=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):a.test(n)&&(n=t.validator.format(n.replace(a,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.attr("generated")&&n.html(i)):(n=t("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t,e){return t},string:function(e,i){return!!t(e,i.form).length},function:function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},n=t(e);for(var a in t.validator.methods){var s;"required"===a?(s=n.get(0).getAttribute(a),""===s&&(s=!0),s=!!s):s=n.attr(a),s?i[a]=s:n[0].getAttribute("type")===a&&(i[a]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(e){if(!t.metadata)return{};var i=t.data(e.form,"validator").settings.meta;return i?t(e).metadata()[i]:t(e).metadata()},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,a){if(!1===a)return void delete e[n];if(a.param||a.depends){var s=!0;switch(typeof a.depends){case"string":s=!!t(a.depends,i.form).length;break;case"function":s=a.depends.call(i,i)}s?e[n]=void 0===a.param||a.param:delete e[n]}}),t.each(e,function(n,a){e[n]=t.isFunction(a)?a(i):a}),t.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var a=t(i).val();return a&&a.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var a=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,n="string"==typeof n&&{url:n}||n,this.pending[i.name])return"pending";if(a.old===e)return a.valid;a.old=e;var s=this;this.startRequest(i);var r={};return r[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){s.settings.messages[i.name].remote=a.originalMessage;var r=!0===n||"true"===n;if(r){var o=s.formSubmitted;s.prepareElement(i),s.formSubmitted=o,s.successList.push(i),delete s.invalid[i.name],s.showErrors()}else{var l={},c=n||s.defaultMessage(i,"remote");l[i.name]=a.message=t.isFunction(c)?c(e):c,s.invalid[i.name]=!0,s.showErrors(l)}a.valid=r,s.stopRequest(i,r)}},n)),"pending"},minlength:function(e,i,n){var a=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||a>=n},maxlength:function(e,i,n){var a=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||a<=n},rangelength:function(e,i,n){var a=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||a>=n[0]&&a<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,n=0,a=!1;t=t.replace(/\D/g,"");for(var s=t.length-1;s>=0;s--){var r=t.charAt(s);n=parseInt(r,10),a&&(n*=2)>9&&(n-=9),i+=n,a=!a}return i%10==0},equalTo:function(e,i,n){var a=t(n);return this.settings.onfocusout&&a.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===a.val()}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,n){var a=t.port;"abort"===t.mode&&(e[a]&&e[a].abort(),e[a]=n)});else{var i=t.ajax;t.ajax=function(n){var a=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===a?(e[s]&&e[s].abort(),e[s]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(t){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||t.each({focus:"focusin",blur:"focusout"},function(e,i){function n(e){return e=t.event.fix(e),e.type=i,t.event.handle.call(this,e)}t.event.special[i]={setup:function(){this.addEventListener(e,n,!0)},teardown:function(){this.removeEventListener(e,n,!0)},handler:function(e){var n=arguments;return n[0]=t.event.fix(e),n[0].type=i,t.event.handle.apply(this,n)}}}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var a=t(i.target);if(a.is(e))return n.apply(a,arguments)})}})}(jQuery),function(t){function e(t,e,i){t.rules[e]=i,t.message&&(t.messages[e]=t.message)}function i(t){return t.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function n(t){return t.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function a(t){return t.substr(0,t.lastIndexOf(".")+1)}function s(t,e){return 0===t.indexOf("*.")&&(t=t.replace("*.",e)),t}function r(e,i){var a=t(this).find("[data-valmsg-for='"+n(i[0].name)+"']"),s=a.attr("data-valmsg-replace"),r=s?!1!==t.parseJSON(s):null;a.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",a),r?(a.empty(),e.removeClass("input-validation-error").appendTo(a)):e.hide()}function o(e,i){var n=t(this).find("[data-valmsg-summary=true]"),a=n.find("ul");a&&a.length&&i.errorList.length&&(a.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),t.each(i.errorList,function(){t("<li />").html(this.message).appendTo(a)}))}function l(e){var i=e.data("unobtrusiveContainer"),n=i.attr("data-valmsg-replace"),a=n?t.parseJSON(n):null;i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),a&&i.empty())}function c(e){var i=t(this);i.data("validator").resetForm(),i.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),i.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function u(e){var i=t(e),n=i.data(h),a=t.proxy(c,e);return n||(n={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:t.proxy(r,e),invalidHandler:t.proxy(o,e),messages:{},rules:{},success:t.proxy(l,e)},attachValidation:function(){i.unbind("reset."+h,a).bind("reset."+h,a).validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(h,n)),n}var d,p=t.validator,h="unobtrusiveValidation";p.unobtrusive={adapters:[],parseElement:function(e,i){var n,a,s,r=t(e),o=r.parents("form")[0];o&&(n=u(o),n.options.rules[e.name]=a={},n.options.messages[e.name]=s={},t.each(this.adapters,function(){var i="data-val-"+this.name,n=r.attr(i),l={};void 0!==n&&(i+="-",t.each(this.params,function(){l[this]=r.attr(i+this)}),this.adapt({element:e,form:o,message:n,params:l,rules:a,messages:s}))}),t.extend(a,{__dummy__:!0}),i||n.attachValidation())},parse:function(e){var i=t(e).parents("form").andSelf().add(t(e).find("form")).filter("form");t(e).find(":input[data-val=true]").each(function(){p.unobtrusive.parseElement(this,!0)}),i.each(function(){var t=u(this);t&&t.attachValidation()})}},d=p.unobtrusive.adapters,d.add=function(t,e,i){return i||(i=e,e=[]),this.push({name:t,params:e,adapt:i}),this},d.addBool=function(t,i){return this.add(t,function(n){e(n,i||t,!0)})},d.addMinMax=function(t,i,n,a,s,r){return this.add(t,[s||"min",r||"max"],function(t){var s=t.params.min,r=t.params.max;s&&r?e(t,a,[s,r]):s?e(t,i,s):r&&e(t,n,r)})},d.addSingleVal=function(t,i,n){return this.add(t,[i||"val"],function(a){e(a,n||t,a.params[i])})},p.addMethod("__dummy__",function(t,e,i){return!0}),p.addMethod("regex",function(t,e,i){var n;return!!this.optional(e)||(n=new RegExp(i).exec(t))&&0===n.index&&n[0].length===t.length}),p.addMethod("nonalphamin",function(t,e,i){var n;return i&&(n=t.match(/\W/g),n=n&&n.length>=i),n}),d.addSingleVal("accept","exts").addSingleVal("regex","pattern"),d.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),d.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),d.add("equalto",["other"],function(i){var r=a(i.element.name),o=i.params.other,l=s(o,r);e(i,"equalTo",t(i.form).find(":input[name='"+n(l)+"']")[0])}),d.add("required",function(t){"INPUT"===t.element.tagName.toUpperCase()&&"CHECKBOX"===t.element.type.toUpperCase()||e(t,"required",!0)}),d.add("remote",["url","type","additionalfields"],function(r){var o={url:r.params.url,type:r.params.type||"GET",data:{}},l=a(r.element.name);t.each(i(r.params.additionalfields||r.element.name),function(e,i){var a=s(i,l);o.data[a]=function(){return t(r.form).find(":input[name='"+n(a)+"']").val()}}),e(r,"remote",o)}),d.add("password",["min","nonalphamin","regex"],function(t){t.params.min&&e(t,"minlength",t.params.min),t.params.nonalphamin&&e(t,"nonalphamin",t.params.nonalphamin),t.params.regex&&e(t,"regex",t.params.regex)}),t(function(){p.unobtrusive.parse(document)})}(jQuery),function(t,e,i,n){var a=t(e);t.fn.lazyload=function(i){function n(){var e=0;r.each(function(){var i=t(this);if(!o.skip_invisible||i.is(":visible"))if(t.abovethetop(this,o)||t.leftofbegin(this,o));else if(t.belowthefold(this,o)||t.rightoffold(this,o)){if(++e>o.failure_limit)return!1}else i.trigger("appear"),e=0})}var s,r=this,o={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return i&&(void 0!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),void 0!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),t.extend(o,i)),s=void 0===o.container||o.container===e?a:t(o.container),0===o.event.indexOf("scroll")&&s.bind(o.event,function(t){return n()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,i.one("appear",function(){if(!this.loaded){if(o.appear){var n=r.length;o.appear.call(e,n,o)}t("<img />").bind("load",function(){i.hide().attr("src",i.data(o.data_attribute))[o.effect](o.effect_speed),e.loaded=!0;var n=t.grep(r,function(t){return!t.loaded});if(r=t(n),o.load){var a=r.length;o.load.call(e,a,o)}}).attr("src",i.data(o.data_attribute))}}),0!==o.event.indexOf("scroll")&&i.bind(o.event,function(t){e.loaded||i.trigger("appear")})}),a.bind("resize",function(t){n()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&r.each(function(){t(this).trigger("appear")})}),SCM.EventEmitter.subscribe("AppearTriggerBound",function(){n()}),SCM.EventEmitter.subscribe("LearningSearchImageBound",function(){n()}),this},t.belowthefold=function(i,n){return(void 0===n.container||n.container===e?a.height()+a.scrollTop():t(n.container).offset().top+t(n.container).height())<=t(i).offset().top-n.threshold},t.rightoffold=function(i,n){return(void 0===n.container||n.container===e?a.width()+a.scrollLeft():t(n.container).offset().left+t(n.container).width())<=t(i).offset().left-n.threshold},t.abovethetop=function(i,n){return(void 0===n.container||n.container===e?a.scrollTop():t(n.container).offset().top)>=t(i).offset().top+n.threshold+t(i).height()},t.leftofbegin=function(i,n){return(void 0===n.container||n.container===e?a.scrollLeft():t(n.container).offset().left)>=t(i).offset().left+n.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(t,e){"$:nomunge";function i(t){return"string"==typeof t}function n(t){var e=v.call(arguments,1);return function(){return t.apply(this,e.concat(v.call(arguments)))}}function a(t){return t.replace(/^[^#]*#?(.*)$/,"$1")}function s(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function r(n,a,s,r,o){var l,u,p,h,f;return r!==c?(p=s.match(n?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),f=p[3]||"",2===o&&i(r)?u=r.replace(n?F:I,""):(h=d(p[2]),r=i(r)?d[n?C:w](r):r,u=2===o?r:1===o?t.extend({},r,h):t.extend({},h,r),u=b(u),n&&(u=u.replace(g,y))),l=p[1]+(n?"#":u||!p[1]?"?":"")+u+f):l=a(s!==c?s:e[x][k]),l}function o(t,e,n){return e===c||"boolean"==typeof e?(n=e,e=b[t?C:w]()):e=i(e)?e.replace(t?F:I,""):e,d(e,n)}function l(e,n,a,s){return i(a)||"object"==typeof a||(s=a,a=n,n=c),this.each(function(){var i=t(this),r=n||m()[(this.nodeName||"").toLowerCase()]||"",o=r&&i.attr(r)||"";i.attr(r,b[e](o,a,s))})}var c,u,d,p,h,f,m,g,v=Array.prototype.slice,y=decodeURIComponent,b=t.param,A=t.bbq=t.bbq||{},S=t.event.special,w="querystring",C="fragment",x="location",k="href",I=/^.*\?|#.*$/g,F=/^.*\#/,T={};b[w]=n(r,0,s),b[C]=u=n(r,1,a),u.noEscape=function(e){e=e||"";var i=t.map(e.split(""),encodeURIComponent);g=new RegExp(i.join("|"),"g")},u.noEscape(",/"),t.deparam=d=function(e,i){var n={},a={true:!0,false:!1,null:null};return t.each(e.replace(/\+/g," ").split("&"),function(e,s){var r,o=s.split("="),l=y(o[0]),u=n,d=0,p=l.split("]["),h=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[h])?(p[h]=p[h].replace(/\]$/,""),p=p.shift().split("[").concat(p),h=p.length-1):h=0,
2===o.length)if(r=y(o[1]),i&&(r=r&&!isNaN(r)?+r:"undefined"===r?c:a[r]!==c?a[r]:r),h)for(;d<=h;d++)l=""===p[d]?u.length:p[d],u=u[l]=d<h?u[l]||(p[d+1]&&isNaN(p[d+1])?{}:[]):r;else t.isArray(n[l])?n[l].push(r):n[l]!==c?n[l]=[n[l],r]:n[l]=r;else l&&(n[l]=i?c:"")}),n},d[w]=n(o,0),d[C]=p=n(o,1),t.elemUrlAttr||(t.elemUrlAttr=function(e){return t.extend(T,e)})({a:k,base:k,iframe:"src",img:"src",input:"src",form:"action",link:k,script:"src"}),m=t.elemUrlAttr,t.fn[w]=n(l,w),t.fn[C]=n(l,C),A.pushState=h=function(t,n){i(t)&&/^#/.test(t)&&n===c&&(n=2);var a=t!==c,s=u(e[x][k],a?t:{},a?n:2);e[x][k]=s+(/#/.test(s)?"":"#")},A.getState=f=function(t,e){return t===c||"boolean"==typeof t?p(t):p(e)[t]},A.removeState=function(e){var i={};e!==c&&(i=f(),t.each(t.isArray(e)?e:arguments,function(t,e){delete i[e]})),h(i,2)},S.hashchange=t.extend(S.hashchange,{add:function(e){function i(t){var e=t[C]=u();t.getState=function(t,i){return t===c||"boolean"==typeof t?d(e,t):d(e,i)[t]},n.apply(this,arguments)}var n;if(t.isFunction(e))return n=e,i;n=e.handler,e.handler=i}})}(jQuery,this),function(t,e,i){"$:nomunge";function n(t){return t=t||e[r][o],t.replace(/^[^#]*#?(.*)$/,"$1")}var a,s=t.event.special,r="location",o="href",l=t.browser,c=document.documentMode,u=l.msie&&(void 0===c||c<8),d="onhashchange"in e&&!u;t.hashchangeDelay=100,s.hashchange=t.extend(s.hashchange,{setup:function(){if(d)return!1;t(a.start)},teardown:function(){if(d)return!1;t(a.stop)}}),a=function(){function i(){l=c=function(t){return t},u&&(s=t('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,c=function(){return n(s.document[r][o])},(l=function(t,e){if(t!==e){var i=s.document;i.open().close(),i[r].hash="#"+t}})(n()))}var a,s,l,c,d={};return d.start=function(){if(!a){var s=n();l||i(),function i(){var u=n(),d=c(s);u!==s?(l(s=u,d),t(e).trigger("hashchange")):d!==s&&(e[r][o]=e[r][o].replace(/#.*/,"")+"#"+d),a=setTimeout(i,t.hashchangeDelay)}()}},d.stop=function(){s||(a&&clearTimeout(a),a=0)},d}()}(jQuery,this);var SCM=SCM||{};SCM.AdvancedSearch={};var definedLimit=$("#hfSolrMaxAllowSearchChar").val(),charactorLimit=definedLimit||255;Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$("#hfSolrJournalID").val();void 0===solrsearchScope?solrsearchScope="":null!=solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),$(document).ready(function(){function t(t){if(null==t||""==t)return void alert("Please enter a term to search");if(t.length>parseInt(charactorLimit))return void alert("Please enter a term between 1 to "+charactorLimit+" characters");var e,i='"'+t+'"',n="";solrsearchScope&&(n="&fl_JournalID="+micrositeJournalId+"&f_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),e="/searchresults?fd_ArticleTitle="+encodeURIComponent(i),e+=""!=n?n:"&allJournals=1",window.location.href=AppendSubscriptionParameterToUrl(e)}function e(){var t=$("#citationYear").val(),e=$("#citationVolume").val(),i=$("#citationPage").val(),n=$(".citationJournal").val(),a=$(".citationJournal option:selected").text(),s=!1,r={},o="";if(null!=n&&""!=n&&"- Select a Journal"!=n||(o="Please select a journal.\n"),null!=t&&""!=t&&"Yr"!=t)if(isNaN(t))o+="Year must be numeric.\n";else{var l="01/01/"+t+" TO 12/31/"+t;r.rg_ArticleDate=l}if(null!=e&&""!=e&&"Vol"!=e&&(isNaN(e)?o+="Volume must be numeric.":r.fd_Volume=e),""!=i&&"1st Pg"!=i&&(r.fd_StartPage=i),o.length>0)return alert(o),!1;var c=n.split(",");"C"==c[0]?(r.fl_JournalID=c[1],s=!0):r.fl_JournalHistID=c[2];var u=$.param.querystring("/searchresults",r),d="";d=s?"&f_JournalDisplayName="+encodeURIComponent($.trim(a)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(a)),u+=d,window.location.href=AppendSubscriptionParameterToUrl(u)}function i(){var t="1",e=null,i=null,n=null,a=[],s=[],r=[],o={},l=null,c=null,u=null,d=null,p=null,h=!1,f=!1;if(null==(n=$("#advancedSearch .search-field").val())||""==n)return void alert("Please enter a term to search");if(n.length>parseInt(charactorLimit))return void alert("Please enter a term between 1 to "+charactorLimit+" characters.");switch(o.q=n,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(t=$(this).attr("id"))}),c='"'+n+'"',t){case"1":o.hd="advancedAny",l=n;break;case"2":o.hd="advancedAll",l=n;break;case"3":l=c}o.q=encodeURIComponent($.trim(l));var m=$("#advancedSearch .authorSearch").val();if(null!=m&&""!=m&&(o.author=m),null!=(e=$("#startDateSemanticSearch").val())&&""!=e&&"mm/dd/yyyy"!=e){if(isYearOnly(e))e=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(e))return void alert("please enter valid start date");var g=$("#endDateSemanticSearch");if(""===g.val())i=(new Date).today();else if(i=g.val(),isYearOnly(i))i=updateYearOnlyToFullDate(g,!1);else if(!isValidDate(i)||new Date(i)<new Date(e))return void alert("please enter valid end date");o.rg_ArticleDate=e+" TO "+i}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(h="J*"==$(this).attr("value"))}),$("#advancedSearch .chk-journal:checked").each(function(){h=!0;var t=$(this);p=t.attr("data-display-name"),u=t.attr("text"),s.push(t.attr("value")),a.push(t.attr("jid"))}),$("#advancedSearch .chk-articletype:checked").each(function(){f=!0;var t=$(this);d=t.attr("text"),r.push(t.attr("value"))});var v=$.param.querystring("/searchresults",o);if(h){var y=s.join(" OR "),b=a.join(" OR ");if(v+="&restypeid=3",1==s.length){var A=encodeURIComponent($.trim(u));journalQuery=u==p?"&fl_JournalID="+b+"&f_JournalDisplayName="+A:"&fl_JournalID="+b+"&f_JournalDisplayName="+encodeURIComponent($.trim(p))+"&fd_LegacyJournalDisplayName="+A,v+=journalQuery}else if(s.length>1){var S="&fl_JournalHistID="+y;v+=S}else 0==s.length&&(v+="&allJournals=1")}if(f){var w="",C=r.join(" OR ");if(1==r.length){w="&fl_ArticleTypeDisplayName="+encodeURIComponent($.trim(d)),v+=w}else if(r.length>1){var x="&fl_ArticleTypeDisplayName="+encodeURIComponent($.trim(C));v+=x}}window.location.href=AppendSubscriptionParameterToUrl(v)}function n(){var t=null,e=null,i=null,n=[],a=[],s={},r=null,o=null,l=!1;if(null==(i=$(".advancedAuthorSearch .search-field").val())||""==i)return void alert("Please enter a term to search");if(i.length>parseInt(charactorLimit))return void alert("Please enter a term between 1 to "+charactorLimit+" characters.");if(s.author=encodeURIComponent($.trim(i)),s.q=encodeURIComponent($.trim(i)),null!=(t=$("#startDateAuthor").val())&&""!=t&&"mm/dd/yyyy"!=t){if(isYearOnly(t)&&(t=updateYearOnlyToFullDate($("#startDateAuthor"),!0)),!isValidDate(t))return void alert("please enter valid start date");var c=$("#endDateAuthor");if(""===c.val()?e=(new Date).today():(e=c.val(),isYearOnly(e)&&(e=updateYearOnlyToFullDate(c,!1))),!isValidDate(e)||new Date(e)<new Date(t))return void alert("please enter valid end date");s.rg_ArticleDate=t+" TO "+e}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(l="J*"==$(this).attr("value"))}),$(".advancedAuthorSearch .chk-journal:checked").each(function(){var t=$(this);l=!0,o=t.attr("data-display-name"),r=t.attr("text"),a.push(t.attr("value")),n.push(t.attr("jid"))});var u=$.param.querystring("/searchresults",s);if(l){var d=a.join(" OR "),p=n.join(" OR ");if(u+="&restypeid=3",1==a.length){var h=encodeURIComponent($.trim(r));journalQuery=r==o?"&fl_JournalID="+p+"&f_JournalDisplayName="+h:"&fl_JournalID="+p+"&f_JournalDisplayName="+encodeURIComponent($.trim(o))+"&fd_LegacyJournalDisplayName="+h,u+=journalQuery}else if(a.length>1){var f="&fl_JournalHistID="+d;u+=f}else 0==a.length&&(u+="&allJournals=1")}window.location.href=AppendSubscriptionParameterToUrl(u)}App.isAdvancedSearch&&(null!=solrsearchScope&&""!=solrsearchScope&&($(".advancedAuthorSearch input:checkbox").each(function(){var t=$(this),e=t.attr("currentjournaldisplayname"),i=t.attr("text"),n=t.attr("jid");if(null!=e&null!=i&&e==i&&n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=i,micrositeJournalId=n,!1}),$("#advancedSearch input:checkbox").each(function(){var t=$(this),e=t.attr("currentjournaldisplayname"),i=t.attr("text"),n=t.attr("jid");if(null!=e&null!=i&&e==i&&n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=i,micrositeJournalId=n,!1}),$(".citationJournal").each(function(){$("option",this).each(function(){var t=$(this).val().split(",");if(null!=t&&"C"==t[0]){t[1]==solrsearchScope&&$(this).attr("selected","selected")}})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){if(13==e.keyCode){t($("#articleTitle").val())}}),$("#btnAdvancedCitationSearch").click(function(){e()}),$("#btnAdvancedCitationSearch").keydown(function(t){13==t.keyCode&&e()}),$("#advancedSearchQueryTerm").keydown(function(t){13==t.keyCode&&i()}),$("#btnAdvancedSearch, #btnAdvancedSearchTop").on("click",function(){i()}),$("#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop").on("click",function(){n()}),$("#advancedAuthorSearchQueryTerm").keydown(function(t){13==t.keyCode&&n()}),$("#Doi").keydown(function(t){13==t.keyCode&&(GetDoiUrl(),$("#aDoiSearch").click())}))}),$(function(){try{$("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").bind("keydown",function(t){if(13==t.which){var e=$(this);if(isYearOnly(e.val()))return updateYearOnlyToFullDate(e,!0),t.preventDefault(),t.stopImmediatePropagation(),!1}})}catch(t){}});var SCM=SCM||{};!function(t,e){function i(t,e){var i=t;if(t.toLowerCase().indexOf("resourceid=")>=0){i=t.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+e)}return i}function n(t){window.location.href=t}function a(e,n){var a=i(e,n);t.$noAccessModal.find(".aIssuePurchaseLink").attr("href",a),t.$noAccessModal.foundation("reveal","open")}function s(){var t=e(".register-free-pdf"),i=t.find(".no-access--alerts-input"),n=t.find(".sign-in--create-link"),a=t.find(".sign-in--personal-link"),s=a.attr("href"),r=n.attr("href");i.is(":checked")&&s.indexOf("alert=1")<0&&(a.attr("href",s+"?alert=1"),n.attr("href",r+"?alert=1"))}var r=e(document);t.$noAccessModal=e("#no-access-reveal"),t.$registerFreePdfModal=e("#register-free-pdf-reveal"),t.$learningNoAccessModal=e("#no-access-reveal-learning"),t.openNoAccessModalArticle=function(i,n){var a;if(a=i.find(".free-access").length,App.isAnyArticle?a=App.isFreeArticle:App.isSearch?a=i.closest(".search-result").find(".free-access, .open-access, .icon-free").length:App.isIssue&&(a=i.closest(".article").find(".free-access, .open-access, .icon-free").length),a)t.$registerFreePdfModal.foundation("reveal","open"),s();else if(App.Quiz.quizId>0)t.$learningNoAccessModal.foundation("reveal","open");else{var r=t.$noAccessModal.find("#articleLinkToPurchase"),o=r.attr("data-storeurl")+"/productDetails.aspx?articleId="+n;r.attr("href",o);var l=t.$noAccessModal.find("#journalLinkToSubscribe"),c=o+"&isJournalSubscription=1";l.attr("href",c),e("#modal_rent_this_article").load("/RentArticle/"+n),t.$noAccessModal.foundation("reveal","open")}},t.checkArticlePDFAccess=function(i){var a=i.attr("data-article-id"),s=i.attr("data-article-url"),r=i.attr("data-ajax-url"),o=!1;App.isAnyArticle?o=App.isFreeArticle:App.isIssue&&(o=i.closest(".article").find(".free-access, .open-access, .icon-free").length),o&&App.isReferredFromGoogle?n(s):e.ajax({type:"POST",url:r,data:{aId:a},traditional:!0,success:function(e){e.Success?n(s):(t.openNoAccessModalArticle(i,a),SCM.ClientStatsMaster.trackPdfTurnAwayAction(a,s))},error:function(t,e,i){SCM.JSUtility.logErrors(t,e,i)}})},t.checkIssuePDFAccess=function(i){var s=i.attr("data-issue-id"),r=i.attr("data-issue-url"),o=i.attr("data-ajax-issue-url"),l=t.$noAccessModal.find(".aIssuePurchaseLink").attr("href");if(r.toLowerCase().indexOf("/toc.pdf")>-1)return void(window.location.href=r);e.ajax({type:"POST",url:o,data:{issueId:s},traditional:!0,success:function(t){t.Success?n(r):a(l,s)},error:function(t,e,i){SCM.JSUtility.logErrors(t,e,i)}})},t.bindUiEvents=function(){r.on("click",".pdfaccess",function(){var i=e(this);r.foundation(),t.$noAccessModal.foundation("reveal","close"),t.checkArticlePDFAccess(i)}),r.on("click",".close-reveal-modal",function(){e(this).parents(".reveal-modal").foundation("reveal","close")}),r.on("click",".al-link.issue-pdfLink",function(){t.$noAccessModal.foundation("reveal","close"),t.checkIssuePDFAccess(e(this))}),r.on("click",".article-pdf-only",function(){e("#pdf-link").click()}),r.on("click",".meta-journal-club",function(){e("h1.has-jc-ppt")||e("#pdf-link").click()})},t.init=function(){t.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{};SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"AMAv2_SearchResults",updateTargetSelector:encodeURIComponent("#divSearch"),onHashChange:function(t){}},$(function(){if(App.isSearch){var t=$("#fromDate"),e=$("#ToDate"),i=$(window),n=function(t,e){t.bind("keydown",function(i){if(13==i.which){if(isYearOnly(t.val()))return updateYearOnlyToFullDate(t,e),i.preventDefault(),i.stopImmediatePropagation(),!1}}).datepicker()},a=function(t){var e=$.extend(SCM.SearchResults.defaults,t);delete t.controller,delete t.action,delete t.instanceName,delete t.updateTargetSelector;var i=$(decodeURIComponent(e.updateTargetSelector)),a="/"+e.controller+"/"+e.action+"/"+e.instanceName;void 0!==e.baseSiteUrl&&""!=e.baseSiteUrl&&(a="//"+e.baseSiteUrl+a),$.ajax({url:a,data:t,success:function(e){i.html(e),setTimeout(function(){$("html,body").animate({scrollTop:0},"slow")},10),n($("#fromDate"),!0),n($("#ToDate"),!1),SCM.SearchResults.defaults.onHashChange(t)},error:function(t){SCM.JSUtility.logErrors(t)}})},s={"":$(".bbq-default")};i.bind("hashchange",function(t){var e=$.param.fragment();if(s[e])""==e&&window.location.reload(),s[e].show();else{var i=t.getState();a(i)}}),$.param.fragment()&&i.trigger("hashchange"),n(t,!0),n(e,!1)}});var SCM=SCM||{};!function(t,e,i){function n(t,e){window.location.href=a(t,e)}function a(t,n){v=encodeURIComponent(t.trim());var a=[["J67","JAMA"],["J68","JAMA Dermatology"],["J69","JAMA Facial Plastic Surgery"],["J70","JAMA Psychiatry"],["J71","JAMA Internal Medicine"],["J72","JAMA Neurology"],["J73","JAMA Ophthalmology"],["J74","JAMA Otolaryngology–Head & Neck Surgery"],["J75","JAMA Pediatrics"],["J76","JAMA Surgery"],["J91","Archives of Neurology & Psychiatry"],["J174","JAMA Oncology"],["J184","JAMA Cardiology"]],r='"'+v+'"',o="&exPrm_qqq={!payloadDisMaxQParser pf=Tags qf=Tags^0.0000001 payloadFields=Tags bf=}"+r,l="&exPrm_hl.q="+v,c="",u="searchresults?",d="",p="",h="",f="",g="",y="",b="",A=null===n||n===i||""===n||"J*"===n,S="L*"===n;if(y=S?"persistentLearningSearchFilters":"persistentSearchFilters",g=SCM.SiteJS.getCookie(y),g&&(d="&"+g,d=d.replace(/(([?|&]{1})?allJournals[^&]*)/,"")),S)u="/learning/"+u,d||(b="hd=learning&f_HasCME=true&");else if(A)-1===d.indexOf("allJournals")&&-1===d.indexOf("JournalDisplayName")&&(p="&allJournals=1"),u=m.val()!==i?m.val()+u:"/"+u,f="&SearchSourceType=1";else{if(d){d=d.replace(/(([?|&]{1})?f_JournalDisplayName[^&]*)/,"")}for(var w=a.length;w--;)if(a[w][0]===n){h=a[w][1];break}p+="&f_JournalDisplayName="+encodeURIComponent(e.trim(h)),f="&SearchSourceType=3",u="/"+u}return c="q="+v,s(y,b+c),u+=b+c+p+d+f+o+l}function s(t,e){var i=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(e);SCM.SiteJS.saveDomainCookie(t,i,document.domain)}function r(){var t=e(".cs-options").find(".cs-selected");return 0===t.length&&(t=e(".cs-placeholder")),t.length?t.attr("data-value"):"J*"}function o(){var t=e(".search-button"),i=e("#search-term");t.on("click",function(){var t=r();y(i.val(),t)}),i.keydown(function(t){b(t,i.val())})}function l(){e(".learning-search").on("click",".view-more",function(t){t.preventDefault();var i=e(this),n=i.attr("data-url"),a=e(".sk-folding-cube");e(".pagination-buttons").hide(),a.removeClass("hide"),u(t,n)})}function c(t){0===t.find(".pagination").length&&e(".learning--start-learning").css("width","100%").css("text-align","center")}function u(t,i){t.preventDefault();var n=e(".learning--pagination");p(e(".learning-search-results-contents").find(".search-results-list"),n,i)}function d(){e(".learning-results-buttons").on("click",".start-learning",function(t){t.preventDefault();var i=e(".learning-result-title").first().find(".content--title"),n=i.attr("href");window.location.href=n})}function p(t,i,n){var a=window.location.search;if(0===a.length)a="?";else{var s=window.location.toString();a=s.substring(0,s.indexOf("?")+1)}a+=n;var r=a;e.ajax({url:r,success:function(n){if(n){var a=e(n),s=a.find(".learning--search-results"),r=a.find(".learning--pagination");g.empty(),g.html(s);var o=g.find(".search-results-list");g.empty(),g.html(r);var l=g.find(".learning--pagination");c(l),i.html(l),t.append(o.children()),r.html(l.html()),d()}},error:function(t,e,i){console.log("xhr: "+t),console.log("status: "+e),console.log("status code: "+t.statusCode),console.log("error thrown: "+i)}})}var h=e("body"),f=e("#hfSolrJournalID"),m=e("#hfGlobalSearchSiteURL"),g=(f.val(),e(".ajax-container")),v="",y=function(t,i){return""===e.trim(t)||null===t?(alert("Please enter a term to search: "),!1):t?(n(t,i),!0):(alert("SCM.SolrSearch.testSearchInput() fail"),!1)},b=function(t,e){if(13===t.keyCode){t.preventDefault();var i=r();y(e,i)}};t.init=function(){App=App||{},App.LearningSearchResults=App.LearningSearchResults||{};var t="";o(),l(),c(e(".learning--pagination")),h.on("click",".sriTopiclink",function(i){v=e(this).text();var a=v.replace(",","");t=f.val(),""===t||null===t?n(a,null):n(a,t),i.preventDefault()}),d()}}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery),function(t){"use strict";function e(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):void 0}function i(t,e){var i,n;for(i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1}function n(t,e){var i;t.createTextRange?(i=t.createTextRange(),i.move("character",e),i.select()):t.selectionStart&&(t.focus(),t.setSelectionRange(e,e))}function a(t,e){try{return t.type=e,!0}catch(t){return!1}}t.Placeholders={Utils:{addEventListener:e,inArray:i,moveCaret:n,changeType:a}}}(this),function(t){"use strict";function e(){}function i(){try{return document.activeElement}catch(t){}}function n(t,e){var i,n,a=!!e&&t.value!==e,s=t.value===t.getAttribute(_);return!(!a&&!s||"true"!==t.getAttribute(P))&&(t.removeAttribute(P),t.value=t.value.replace(t.getAttribute(_),""),t.className=t.className.replace(D,""),n=t.getAttribute(R),parseInt(n,10)>=0&&(t.setAttribute("maxLength",n),t.removeAttribute(R)),i=t.getAttribute(E),i&&(t.type=i),!0)}function a(t){var e,i,n=t.getAttribute(_);return!(""!==t.value||!n)&&(t.setAttribute(P,"true"),t.value=n,t.className+=" "+$,i=t.getAttribute(R),i||(t.setAttribute(R,t.maxLength),t.removeAttribute("maxLength")),e=t.getAttribute(E),e?t.type="text":"password"===t.type&&J.changeType(t,"text")&&t.setAttribute(E,"password"),!0)}function s(t,e){var i,n,a,s,r,o,l;if(t&&t.getAttribute(_))e(t);else for(a=t?t.getElementsByTagName("input"):m,s=t?t.getElementsByTagName("textarea"):g,i=a?a.length:0,n=s?s.length:0,l=0,o=i+n;o>l;l++)r=i>l?a[l]:s[l-i],e(r)}function r(t){s(t,n)}function o(t){s(t,a)}function l(t){return function(){v&&t.value===t.getAttribute(_)&&"true"===t.getAttribute(P)?J.moveCaret(t,0):n(t)}}function c(t){return function(){a(t)}}function u(t){return function(e){return b=t.value,"true"===t.getAttribute(P)&&b===t.getAttribute(_)&&J.inArray(M,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}}function d(t){return function(){n(t,b),""===t.value&&(t.blur(),J.moveCaret(t,0))}}function p(t){return function(){t===i()&&t.value===t.getAttribute(_)&&"true"===t.getAttribute(P)&&J.moveCaret(t,0)}}function h(t){return function(){r(t)}}function f(t){t.form&&(x=t.form,"string"==typeof x&&(x=document.getElementById(x)),x.getAttribute(L)||(J.addEventListener(x,"submit",h(x)),x.setAttribute(L,"true"))),J.addEventListener(t,"focus",l(t)),J.addEventListener(t,"blur",c(t)),v&&(J.addEventListener(t,"keydown",u(t)),J.addEventListener(t,"keyup",d(t)),J.addEventListener(t,"click",p(t))),t.setAttribute(z,"true"),t.setAttribute(_,w),(v||t!==i())&&a(t)}var m,g,v,y,b,A,S,w,C,x,k,I,F,T=["text","search","url","tel","email","password","number","textarea"],M=[27,33,34,35,36,37,38,39,40,8,46],$="placeholdersjs",D=RegExp("(?:^|\\s)"+$+"(?!\\S)"),_="data-placeholder-value",P="data-placeholder-active",E="data-placeholder-type",L="data-placeholder-submit",z="data-placeholder-bound",R="data-placeholder-maxlength",O=document.createElement("input"),q=document.getElementsByTagName("head")[0],j=document.documentElement,U=t.Placeholders,J=U.Utils;if(U.nativeSupport=void 0!==O.placeholder,!U.nativeSupport){for(m=document.getElementsByTagName("input"),g=document.getElementsByTagName("textarea"),v="false"===j.getAttribute("data-placeholder-focus"),y="false"!==j.getAttribute("data-placeholder-live"),A=document.createElement("style"),A.type="text/css",S=document.createTextNode("."+$+" { color:#ccc; }"),A.styleSheet?A.styleSheet.cssText=S.nodeValue:A.appendChild(S),q.insertBefore(A,q.firstChild),F=0,I=m.length+g.length;I>F;F++)k=m.length>F?m[F]:g[F-m.length],(w=k.attributes.placeholder)&&(w=w.nodeValue)&&J.inArray(T,k.type)&&f(k);C=setInterval(function(){for(F=0,I=m.length+g.length;I>F;F++)k=m.length>F?m[F]:g[F-m.length],w=k.attributes.placeholder,w?(w=w.nodeValue)&&J.inArray(T,k.type)&&(k.getAttribute(z)||f(k),(w!==k.getAttribute(_)||"password"===k.type&&!k.getAttribute(E))&&("password"===k.type&&!k.getAttribute(E)&&J.changeType(k,"text")&&k.setAttribute(E,"password"),k.value===k.getAttribute(_)&&(k.value=w),k.setAttribute(_,w))):k.getAttribute(P)&&(n(k),k.removeAttribute(_));y||clearInterval(C)},100)}J.addEventListener(t,"beforeunload",function(){U.disable()}),U.disable=U.nativeSupport?e:r,U.enable=U.nativeSupport?e:o}(this);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";function t(t,e,i){var i=i||a;i.setItem(n+"."+t,JSON.stringify(e))}function e(t,e){var e=e||a,i=e.getItem(n+"."+t);return JSON.parse(i)}function i(t,e){var e=e||a;e.removeItem(n+"."+t)}var n="SCM",a=window.localStorage;return{getItem:e,setItem:t,removeItem:i}}();var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){function t(t,a){var s=$(t),r=e();r=r||{Items:[]};var o=r.Items;s.each(function(){var t=$(this).attr(a),e=JSON.parse(t);o.push(e)}),r.Items=i(o,200),SCM.Utilities.LocalStorage.setItem(n,r)}function e(){return SCM.Utilities.LocalStorage.getItem(n)}function i(t,e){var i=t.length-e;return i>0&&t.splice(0,i),t}var n="SharedWidgets.UserPersonalization";return{AddToLocalStorage:t,GetFromLocalStorage:e}}(),jQuery(document).ready(function(t){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserContentAccessWrite","data-values")});var SCM=SCM||{};SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(t){domObj.parent().replaceWith(t),SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(t){var e=JSON.parse(t),i=e.parameters,n=e.dynamicParameters;if(void 0!==n&&void 0!==n.localParams&&"[REPLACE_WITH_LOCAL]"===n.localParams){var a=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage();n.localParams=a,i.Items=JSON.stringify(a)}return i}return{LoadWidget:loadWidget}}(),jQuery(document).ready(function(t){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")});var SCM=SCM||{},App=App||{};!function(t,e,i,n){t.replaceOpenUrlPlaceHolders=function(t,i){null!==i&&""!==i&&t.each(function(){var t=e(this).attr("data-targetId"),n=i.replace("{openUrlTargetId}",t);e(this).after(n),e(this).parent().show(),e(this).remove()})},t.getAndReplaceOpenUrlPlaceHolders=function(n){e.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){if(null!==e&&"undefined"!==e){var a="";1==e.DisplayOpenUrlLink&&(a=null!==e.LinkImageSource&&""!==e.LinkImageSource?" <a target='_blank' href='"+e.TargetUrl+"'><img src='"+e.LinkImageSource+"'/></a> ":" <a target='_blank' href='"+e.TargetUrl+"'> "+e.LinkImageText+" </a> "),t.replaceOpenUrlPlaceHolders(n,a),null!==i&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&i.setItem("instOpenUrlKey_"+window.App.LoginUserInfo.currentSessionId,a,window.sessionStorage)}},error:function(t){}})},t.checkAndReplaceOpenUrlPlaceHolders=function(){if(void 0!==window.App.LoginUserInfo&&window.App.LoginUserInfo.isInstLoggedIn>0){var n=e('span[class="inst-open-url-holders"]');if(null!==n&&void 0!==n&&n.length>0)if(null!==i&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId){var a=i.getItem("instOpenUrlKey_"+window.App.LoginUserInfo.currentSessionId,window.sessionStorage);null!==a?t.replaceOpenUrlPlaceHolders(n,a):t.getAndReplaceOpenUrlPlaceHolders(n)}else t.getAndReplaceOpenUrlPlaceHolders(n)}else e('span[class="inst-open-url-holders"]').remove()},t.init=function(){t.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,i){var n={init:function(e,i){this.$elem=t(i),this.options=t.extend({},t.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){function e(t){var e,i="";if("function"==typeof n.options.jsonSuccess)n.options.jsonSuccess.apply(this,[t]);else{for(e in t.owl)t.owl.hasOwnProperty(e)&&(i+=t.owl[e].item);n.$elem.html(i)}n.logIn()}var i,n=this;"function"==typeof n.options.beforeInit&&n.options.beforeInit.apply(this,[n.$elem]),"string"==typeof n.options.jsonPath?(i=n.options.jsonPath,t.getJSON(i,e)):n.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),this.onStartup()},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var t=this;e.setTimeout(function(){t.updateVars()},0)},watchVisibility:function(){var t=this;if(!1!==t.$elem.is(":visible"))return!1;t.$elem.css({opacity:0}),e.clearInterval(t.autoPlayInterval),e.clearInterval(t.checkVisible),t.checkVisible=e.setInterval(function(){t.$elem.is(":visible")&&(t.reload(),t.$elem.animate({opacity:1},200),e.clearInterval(t.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var t=this.$elem.hasClass(this.options.baseClass),e=this.$elem.hasClass(this.options.theme);t||this.$elem.addClass(this.options.baseClass),e||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,i;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if(e=t(this.options.responsiveBaseWidth).width(),e>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(t,e){return t[0]-e[0]}),i=0;i<this.options.itemsCustom.length;i+=1)this.options.itemsCustom[i][0]<=e&&(this.options.items=this.options.itemsCustom[i][1]);else e<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),e<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),e<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),e<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),e<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var i,n,a=this;if(!0!==a.options.responsive)return!1;n=t(e).width(),a.resizer=function(){t(e).width()!==n&&(!1!==a.options.autoPlay&&e.clearInterval(a.autoPlayInterval),e.clearTimeout(i),i=e.setTimeout(function(){n=t(e).width(),a.updateVars()},a.options.responsiveRefreshRate))},t(e).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var e=this,i=0,n=e.itemsAmount-e.options.items;e.$owlItems.each(function(a){var s=t(this);s.css({width:e.itemWidth}).data("owl-item",Number(a)),0!=a%e.options.items&&a!==n||a>n||(i+=1),s.data("owl-roundPages",i)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var t=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth)
;return this.options.items>this.itemsAmount?this.maximumPixels=t=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=t),t},min:function(){return 0},loops:function(){var e,i,n=0,a=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)a+=this.itemWidth,this.positionsInArray.push(-a),!0===this.options.scrollPerPage&&(i=t(this.$owlItems[e]),(i=i.data("owl-roundPages"))!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=i))},buildControls:function(){!0!==this.options.navigation&&!0!==this.options.pagination||(this.owlControls=t('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var e=this,i=t('<div class="owl-buttons"/>');e.owlControls.append(i),e.buttonPrev=t("<div/>",{class:"owl-prev",html:e.options.navigationText[0]||""}),e.buttonNext=t("<div/>",{class:"owl-next",html:e.options.navigationText[1]||""}),i.append(e.buttonPrev).append(e.buttonNext),i.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(t){t.preventDefault()}),i.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(i){i.preventDefault(),t(this).hasClass("owl-next")?e.next():e.prev()})},buildPagination:function(){var e=this;e.paginationWrapper=t('<div class="owl-pagination"/>'),e.owlControls.append(e.paginationWrapper),e.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(i){i.preventDefault(),Number(t(this).data("owl-page"))!==e.currentItem&&e.goTo(Number(t(this).data("owl-page")),!0)})},updatePagination:function(){var e,i,n,a,s,r;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),e=0,i=this.itemsAmount-this.itemsAmount%this.options.items,a=0;a<this.itemsAmount;a+=1)0==a%this.options.items&&(e+=1,i===a&&(n=this.itemsAmount-this.options.items),s=t("<div/>",{class:"owl-page"}),r=t("<span></span>",{text:!0===this.options.paginationNumbers?e:"",class:!0===this.options.paginationNumbers?"owl-numbers":""}),s.append(r),s.data("owl-page",i===a?n:a),s.data("owl-roundPages",e),this.paginationWrapper.append(s));this.checkPagination()},checkPagination:function(){var e=this;if(!1===e.options.pagination)return!1;e.paginationWrapper.find(".owl-page").each(function(){t(this).data("owl-roundPages")===t(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),t(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(t){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,t="rewind"}this.goTo(this.currentItem,t)},prev:function(t){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),0>this.currentItem){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,t="rewind"}this.goTo(this.currentItem,t)},goTo:function(t,i,n){var a=this;return!a.isTransition&&("function"==typeof a.options.beforeMove&&a.options.beforeMove.apply(this,[a.$elem]),t>=a.maximumItem?t=a.maximumItem:0>=t&&(t=0),a.currentItem=a.owl.currentItem=t,!1!==a.options.transitionStyle&&"drag"!==n&&1===a.options.items&&!0===a.browser.support3d?(a.swapSpeed(0),!0===a.browser.support3d?a.transition3d(a.positionsInArray[t]):a.css2slide(a.positionsInArray[t],1),a.afterGo(),a.singleItemTransition(),!1):(t=a.positionsInArray[t],!0===a.browser.support3d?(a.isCss3Finish=!1,!0===i?(a.swapSpeed("paginationSpeed"),e.setTimeout(function(){a.isCss3Finish=!0},a.options.paginationSpeed)):"rewind"===i?(a.swapSpeed(a.options.rewindSpeed),e.setTimeout(function(){a.isCss3Finish=!0},a.options.rewindSpeed)):(a.swapSpeed("slideSpeed"),e.setTimeout(function(){a.isCss3Finish=!0},a.options.slideSpeed)),a.transition3d(t)):!0===i?a.css2slide(t,a.options.paginationSpeed):"rewind"===i?a.css2slide(t,a.options.rewindSpeed):a.css2slide(t,a.options.slideSpeed),void a.afterGo()))},jumpTo:function(t){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),t>=this.maximumItem||-1===t?t=this.maximumItem:0>=t&&(t=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[t]):this.css2slide(this.positionsInArray[t],1),this.currentItem=this.owl.currentItem=t,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",e.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var t=this;if(t.apStatus="play",!1===t.options.autoPlay)return!1;e.clearInterval(t.autoPlayInterval),t.autoPlayInterval=e.setInterval(function(){t.next(!0)},t.options.autoPlay)},swapSpeed:function(t){"slideSpeed"===t?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===t?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof t&&this.$owlWrapper.css(this.addCssSpeed(t))},addCssSpeed:function(t){return{"-webkit-transition":"all "+t+"ms ease","-moz-transition":"all "+t+"ms ease","-o-transition":"all "+t+"ms ease",transition:"all "+t+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(t){return{"-webkit-transform":"translate3d("+t+"px, 0px, 0px)","-moz-transform":"translate3d("+t+"px, 0px, 0px)","-o-transform":"translate3d("+t+"px, 0px, 0px)","-ms-transform":"translate3d("+t+"px, 0px, 0px)",transform:"translate3d("+t+"px, 0px,0px)"}},transition3d:function(t){this.$owlWrapper.css(this.doTranslate(t))},css2move:function(t){this.$owlWrapper.css({left:t})},css2slide:function(t,e){var i=this;i.isCssFinish=!1,i.$owlWrapper.stop(!0,!0).animate({left:t},{duration:e||i.options.slideSpeed,complete:function(){i.isCssFinish=!0}})},checkBrowser:function(){var t=i.createElement("div");t.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",t=t.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==t&&1===t.length,isTouch:"ontouchstart"in e||e.navigator.msMaxTouchPoints}},moveEvents:function(){!1===this.options.mouseDrag&&!1===this.options.touchDrag||(this.gestures(),this.disabledEvents())},eventTypes:function(){var t=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?t=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?t=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(t=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=t[0],this.ev_types.move=t[1],this.ev_types.end=t[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(t){t.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return t(e.target).is("input, textarea, select, option")})},gestures:function(){function n(t){if(void 0!==t.touches)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(void 0===t.touches){if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY};if(void 0===t.pageX)return{x:t.clientX,y:t.clientY}}}function a(e){"on"===e?(t(i).on(o.ev_types.move,s),t(i).on(o.ev_types.end,r)):"off"===e&&(t(i).off(o.ev_types.move),t(i).off(o.ev_types.end))}function s(a){a=a.originalEvent||a||e.event,o.newPosX=n(a).x-l.offsetX,o.newPosY=n(a).y-l.offsetY,o.newRelativeX=o.newPosX-l.relativePos,"function"==typeof o.options.startDragging&&!0!==l.dragging&&0!==o.newRelativeX&&(l.dragging=!0,o.options.startDragging.apply(o,[o.$elem])),(8<o.newRelativeX||-8>o.newRelativeX)&&!0===o.browser.isTouch&&(void 0!==a.preventDefault?a.preventDefault():a.returnValue=!1,l.sliding=!0),(10<o.newPosY||-10>o.newPosY)&&!1===l.sliding&&t(i).off("touchmove.owl"),o.newPosX=Math.max(Math.min(o.newPosX,o.newRelativeX/5),o.maximumPixels+o.newRelativeX/5),!0===o.browser.support3d?o.transition3d(o.newPosX):o.css2move(o.newPosX)}function r(i){i=i.originalEvent||i||e.event;var n;i.target=i.target||i.srcElement,l.dragging=!1,!0!==o.browser.isTouch&&o.$owlWrapper.removeClass("grabbing"),o.dragDirection=0>o.newRelativeX?o.owl.dragDirection="left":o.owl.dragDirection="right",0!==o.newRelativeX&&(n=o.getNewPosition(),o.goTo(n,!1,"drag"),l.targetElement===i.target&&!0!==o.browser.isTouch&&(t(i.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.disable")}),i=t._data(i.target,"events").click,n=i.pop(),i.splice(0,0,n))),a("off")}var o=this,l={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};o.isCssFinish=!0,o.$elem.on(o.ev_types.start,".owl-wrapper",function(i){i=i.originalEvent||i||e.event;var s;if(3===i.which)return!1;if(!(o.itemsAmount<=o.options.items)){if(!1===o.isCssFinish&&!o.options.dragBeforeAnimFinish||!1===o.isCss3Finish&&!o.options.dragBeforeAnimFinish)return!1;!1!==o.options.autoPlay&&e.clearInterval(o.autoPlayInterval),!0===o.browser.isTouch||o.$owlWrapper.hasClass("grabbing")||o.$owlWrapper.addClass("grabbing"),o.newPosX=0,o.newRelativeX=0,t(this).css(o.removeTransition()),s=t(this).position(),l.relativePos=s.left,l.offsetX=n(i).x-s.left,l.offsetY=n(i).y-s.top,a("on"),l.sliding=!1,l.targetElement=i.target||i.srcElement}})},getNewPosition:function(){var t=this.closestItem();return t>this.maximumItem?t=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=t=0),t},closestItem:function(){var e=this,i=!0===e.options.scrollPerPage?e.pagesInArray:e.positionsInArray,n=e.newPosX,a=null;return t.each(i,function(s,r){n-e.itemWidth/20>i[s+1]&&n-e.itemWidth/20<r&&"left"===e.moveDirection()?(a=r,e.currentItem=!0===e.options.scrollPerPage?t.inArray(a,e.positionsInArray):s):n+e.itemWidth/20<r&&n+e.itemWidth/20>(i[s+1]||i[s]-e.itemWidth)&&"right"===e.moveDirection()&&(!0===e.options.scrollPerPage?(a=i[s+1]||i[i.length-1],e.currentItem=t.inArray(a,e.positionsInArray)):(a=i[s+1],e.currentItem=s+1))}),e.currentItem},moveDirection:function(){var t;return 0>this.newRelativeX?(t="right",this.playDirection="next"):(t="left",this.playDirection="prev"),t},customEvents:function(){var t=this;t.$elem.on("owl.next",function(){t.next()}),t.$elem.on("owl.prev",function(){t.prev()}),t.$elem.on("owl.play",function(e,i){t.options.autoPlay=i,t.play(),t.hoverStatus="play"}),t.$elem.on("owl.stop",function(){t.stop(),t.hoverStatus="stop"}),t.$elem.on("owl.goTo",function(e,i){t.goTo(i)}),t.$elem.on("owl.jumpTo",function(e,i){t.jumpTo(i)})},stopOnHover:function(){var t=this;!0===t.options.stopOnHover&&!0!==t.browser.isTouch&&!1!==t.options.autoPlay&&(t.$elem.on("mouseover",function(){t.stop()}),t.$elem.on("mouseout",function(){"stop"!==t.hoverStatus&&t.play()}))},lazyLoad:function(){var e,i,n,a;if(!1===this.options.lazyLoad)return!1;for(e=0;e<this.itemsAmount;e+=1)i=t(this.$owlItems[e]),"loaded"!==i.data("owl-loaded")&&(n=i.data("owl-item"),a=i.find(".lazyOwl"),"string"!=typeof a.data("src")?i.data("owl-loaded","loaded"):(void 0===i.data("owl-loaded")&&(a.hide(),i.addClass("loading").data("owl-loaded","checked")),(!0!==this.options.lazyFollow||n>=this.currentItem)&&n<this.currentItem+this.options.items&&a.length&&this.lazyPreload(i,a)))},lazyPreload:function(t,i){function n(){t.data("owl-loaded","loaded").removeClass("loading"),i.removeAttr("data-src"),"fade"===r.options.lazyEffect?i.fadeIn(400):i.show(),"function"==typeof r.options.afterLazyLoad&&r.options.afterLazyLoad.apply(this,[r.$elem])}function a(){o+=1,r.completeImg(i.get(0))||!0===s?n():100>=o?e.setTimeout(a,100):n()}var s,r=this,o=0;"DIV"===i.prop("tagName")?(i.css("background-image","url("+i.data("src")+")"),s=!0):i[0].src=i.data("src"),a()},autoHeight:function(){function i(){var i=t(s.$owlItems[s.currentItem]).height();s.wrapperOuter.css("height",i+"px"),s.wrapperOuter.hasClass("autoHeight")||e.setTimeout(function(){s.wrapperOuter.addClass("autoHeight")},0)}function n(){a+=1,s.completeImg(r.get(0))?i():100>=a?e.setTimeout(n,100):s.wrapperOuter.css("height","")}var a,s=this,r=t(s.$owlItems[s.currentItem]).find("img");void 0!==r.get(0)?(a=0,n()):i()},completeImg:function(t){return!(!t.complete||void 0!==t.naturalWidth&&0===t.naturalWidth)},onVisibleItems:function(){var e;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],e=this.currentItem;e<this.currentItem+this.options.items;e+=1)this.visibleItems.push(e),!0===this.options.addClassActive&&t(this.$owlItems[e]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(t){this.outClass="owl-"+t+"-out",this.inClass="owl-"+t+"-in"},singleItemTransition:function(){var t=this,e=t.outClass,i=t.inClass,n=t.$owlItems.eq(t.currentItem),a=t.$owlItems.eq(t.prevItem),s=Math.abs(t.positionsInArray[t.currentItem])+t.positionsInArray[t.prevItem],r=Math.abs(t.positionsInArray[t.currentItem])+t.itemWidth/2;t.isTransition=!0,t.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":r+"px","-moz-perspective-origin":r+"px","perspective-origin":r+"px"}),a.css({position:"relative",left:s+"px"}).addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){t.endPrev=!0,a.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),t.clearTransStyle(a,e)}),n.addClass(i).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){t.endCurrent=!0,n.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),t.clearTransStyle(n,i)})},clearTransStyle:function(t,e){t.css({position:"",left:""}).removeClass(e),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),t(i).off(".owl owl"),t(e).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),e.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){e=t.extend({},this.userOptions,e),this.unWrap(),this.init(e,this.$elem)},addItem:function(t,e){var i;return!!t&&(0===this.$elem.children().length?(this.$elem.append(t),this.setVars(),!1):(this.unWrap(),i=void 0===e||-1===e?-1:e,i>=this.$userItems.length||-1===i?this.$userItems.eq(-1).after(t):this.$userItems.eq(i).before(t),void this.setVars()))},removeItem:function(t){if(0===this.$elem.children().length)return!1;t=void 0===t||-1===t?-1:t,this.unWrap(),this.$userItems.eq(t).remove(),this.setVars()}};t.fn.owlCarousel=function(e){return this.each(function(){if(!0===t(this).data("owl-init"))return!1;t(this).data("owl-init",!0);var i=Object.create(n);i.init(e,this),t.data(this,"owlCarousel",i)})},t.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:e,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),function(){var t,e;t=this.jQuery||window.jQuery,e=t(window),t.fn.stick_in_parent=function(i){var n,a,s,r,o,l,c,u,d,p,h,f;for(null==i&&(i={}),f=i.sticky_class,l=i.inner_scrolling,h=i.recalc_every,p=i.parent,d=i.offset_top,u=i.spacer,s=i.bottoming,null==d&&(d=0),null==p&&(p=void 0),null==l&&(l=!0),null==f&&(f="is_stuck"),n=t(document),null==s&&(s=!0),r=function(i,a,r,o,c,m,g,v){var y,b,A,S,w,C,x,k,I,F,T,M;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),w=n.height(),x=i.parent(),null!=p&&(x=x.closest(p)),!x.length)throw"failed to find stick parent";if(A=!1,y=!1,T=null!=u?u&&i.closest(u):t("<div />"),T&&T.css("position",i.css("position")),k=function(){var t,e,s;if(!v)return w=n.height(),t=parseInt(x.css("border-top-width"),10),e=parseInt(x.css("padding-top"),10),a=parseInt(x.css("padding-bottom"),10),r=x.offset().top+t+e,o=x.height(),A&&(A=!1,y=!1,null==u&&(i.insertAfter(T),T.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(f),s=!0),c=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-d,m=i.outerHeight(!0),g=i.css("float"),T&&T.css({width:i.outerWidth(!0),height:m,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:g}),s?M():void 0},k(),m!==o)return S=void 0,C=d,F=h,M=function(){var t,p,b,I,M,$;if(!v)return b=!1,null!=F&&(F-=1)<=0&&(F=h,k(),b=!0),b||n.height()===w||(k(),b=!0),I=e.scrollTop(),null!=S&&(p=I-S),S=I,A?(s&&(M=I+m+C>o+r,y&&!M&&(y=!1,i.css({position:"fixed",bottom:"",top:C}).trigger("sticky_kit:unbottom"))),I<c&&(A=!1,C=d,null==u&&("left"!==g&&"right"!==g||i.insertAfter(T),T.detach()),t={position:"",width:"",top:""},i.css(t).removeClass(f).trigger("sticky_kit:unstick")),l&&($=e.height(),m+d>$&&(y||(C-=p,C=Math.max($-m,C),C=Math.min(d,C),A&&i.css({top:C+"px"}))))):I>c&&(A=!0,t={position:"fixed",top:C},t.width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(t).addClass(f),null==u&&(i.after(T),"left"!==g&&"right"!==g||T.append(i)),i.trigger("sticky_kit:stick")),A&&s&&(null==M&&(M=I+m+C>o+r),!y&&M)?(y=!0,"static"===x.css("position")&&x.css({position:"relative"}),i.css({position:"absolute",bottom:a,top:"auto"}).trigger("sticky_kit:bottom")):void 0},I=function(){return k(),M()},b=function(){if(v=!0,e.off("touchmove",M),e.off("scroll",M),e.off("resize",I),t(document.body).off("sticky_kit:recalc",I),i.off("sticky_kit:detach",b),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),x.position("position",""),A)return null==u&&("left"!==g&&"right"!==g||i.insertAfter(T),T.remove()),i.removeClass(f)},e.on("touchmove",M),e.on("scroll",M),e.on("resize",I),t(document.body).on("sticky_kit:recalc",I),i.on("sticky_kit:detach",b),setTimeout(M,0)}},o=0,c=this.length;o<c;o++)a=this[o],r(t(a));return this}}.call(this);var SCM=SCM||{};SCM.ClientStatsMaster=function(t,e){function i(t,e){this.ActionFilterKey=t,this.ActionFilterValue=e}function n(t,e,i){this.SessionID=t,this.ClientID=e,this.SiteID=i}function a(e,a,s,r){this.UserSessionItem=new n("",0,t("#hdnSiteID").val()),this.ActionFilterType=new i(e,a),this.ActionDescription=s,this.ActionURL=r}function s(e,i,n,s){var r=new a(e,i,n,s).toJson();t.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:r,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(t,e){window.console&&(console.log("jqXhr.responseText: "+t.responseText),console.log("status: "+e))})}function r(t){var e=t.match(/\/data\/journals\/(\w+)\//i),i="";if(e){var n=e[1].toLowerCase();switch(n){case"jama":case"cardiology":case"oncology":i=n;break;case"derm":case"faci":case"neur":case"otol":case"surg":i="arch"+n;break;case"intemed":i="archinte";break;case"neurpsych":i="archneurpsyc";break;case"ophth":i="archopht";break;case"peds":i="archpedi";break;case"psych":i="archpsyc";break;default:i=n}}var a=window.location.hostname;return i&&(a=i+"."+a),a}return a.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=t(".tab-nav");e.on("click",".tab-nav-trigger",function(){var e=t(this).children(":first")[0],i=e.innerText.trim();i||(i=e.textContent.trim()),i+=" was clicked",s(3,"Tabs",i,window.location.href)}),e=t(".tabs--link-container"),e.on("click","a.tabs--link",function(){var e=t(this).children("span:first")[0],i=e.innerText.trim();i||(i=e.textContent.trim()),i+=" was clicked",s(3,"Tabs",i,window.location.href)})},trackJumpLinkEvents:function(){t(".section-jump-links, .meta-author").on("click",".section-jump-link",function(){var e=t(this)[0].innerText.trim();e||(e=t(this)[0].textContent.trim()),s(3,e,e+" was clicked",window.location.href)})},trackCrossReferenceLinkEvents:function(){t(".reference-content").on("click",".pubmed-link, .crossref-doi",function(){var e=t(this)[0].innerText.trim();e||(e=t(this)[0].textContent.trim()),e+=" was clicked",s(3,"CrossReferenceLink",e,window.location.href)})},trackToolBoxEvents:function(){var e=t(".toolbar, .abstract-toolbar, .magazine-toolbar, .article-content");e.on("click","a.toolbar-tool",function(){var e=t(this).text().trim();e+=" was clicked",s(3,"ToolBox",e,window.location.href)}),e.on("click","a.toolbar-share",function(){s(3,"Share",t(this).text().trim(),window.location.href)})},trackAudioPlayAction:function(){t("audio.mp--audio-player").on("play",function(){s(3,"mediaPlayer","audio play/pause was clicked",window.location.href)})},trackPdfTurnAwayAction:function(t,e){if(t){s(8,"DirectPdfAccess","PDF is clicked for ArticleID = "+t,"http://"+r(e)+"/pdfaccess.ashx?resouceid="+t+"&PDFSource=24")}},trackSingleAction:function(t,e,i){t.on("click",function(){s(3,e,i,window.location.href)})}}}(jQuery),$(window).load(function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackCrossReferenceLinkEvents(),SCM.ClientStatsMaster.trackJumpLinkEvents(),SCM.ClientStatsMaster.trackToolBoxEvents(),SCM.ClientStatsMaster.trackAudioPlayAction(),SCM.ClientStatsMaster.trackSingleAction($("a.view-large.figure-table-link"),"View Large","View Large was clicked"),SCM.ClientStatsMaster.trackSingleAction($("a.full-text-link"),"Fulltext Button","Fulltext button was clicked from abstract page")});var App=App||{};!function(t,e){function i(){var t=e(".meta-authors--etal");t.click(function(){var i=e(".meta-authors--remaining");t.hide(),i.addClass("accessible-show")})}function n(){var t=e(".meta-articleinfo-jumplink");!!e(t.attr("href")).length&&t.addClass("target-exists")}t.init=function(){App.isAnyArticle&&(i(),n())}}(App.ArticleTopInfo=App.ArticleTopInfo||{},jQuery);var SCM=SCM||{};!function(t,e,i){t.autoReveal=function(){if(t.referredFromGoogle&&t.fromRedirectSite){e("#divFirstPagePreview").foundation("reveal","open")}},t.init=function(){t.autoReveal()}}(SCM.FirstPagePreview=SCM.FirstPagePreview||{},jQuery);var ArtMetric={};ArtMetric.fullVersion=function($dest,routeUrl){$dest.find(".widget-ArticleLevelMetrics").length<1&&$.ajax({url:routeUrl,datatype:"HTML",success:function(t){$dest.prepend(t),setTimeout(function(){if(void 0!==window.ChartistData){var t={lineSmooth:!1,showArea:!0,low:0},e=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(t){return t.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(t){return t.replace(" ","<br />")}}}]];ArtMetric.createChart(".ct-chart",window.ChartistData.data,t,e)}},200)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})},ArtMetric.limitLabels=function(){var t=$(".ct-horizontal.ct-label"),e=t.length,i=Math.ceil(e/8),n=1;t.not(":eq(0)").each(function(){n%i!=0&&$(this).hide(),n++})},ArtMetric.createChart=function(t,e,i,n){var a=new Chartist.Line(t,e,i,n),s=0;a.on("created",function(){s=0,ArtMetric.limitLabels()}),a.on("draw",function(t){"line"!==t.type&&"point"!==t.type&&"area"!==t.type||s++,"line"===t.type?t.element.animate({opacity:{begin:25*s+150,dur:250,from:0,to:1}}):"point"===t.type?t.element.animate({x1:{begin:25*s,dur:250,from:t.x-10,to:t.x,easing:"easeOutQuart"},x2:{begin:25*s,dur:250,from:t.x-10,to:t.x,easing:"easeOutQuart"},opacity:{begin:25*s,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===t.type&&t.element.animate({opacity:{begin:25*s+250,dur:300,from:0,to:1}})})},ArtMetric.triggerModal=function(t,e){var i="/ThirdParty/ArticleLevelMetricsDetails?articleId="+e;ArtMetric.fullVersion(t,i);var n=$(".artmet-modal"),a=$("body");n.css({display:"block",opacity:1}),a.addClass("metrics-modal-open")},ArtMetric.closeModal=function(){var t=$(".artmet-modal"),e=$("body");t.attr("style",""),e.removeClass("metrics-modal-open")},ArtMetric.eventsToClose=function(){$(".artmet-close-modal").click(function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},$(document).ready(function(){$(".artmet-modal-trigger, .artmet-condensed-stats .artmet-views").click(function(){var t=$(".artmet-modal-trigger").attr("data-article-id");ArtMetric.triggerModal($(".artmet-modal-contents"),t)}),ArtMetric.eventsToClose()});var SCM=SCM||{};!function(t,e,i){function n(){e(".past-issues-trigger, .year-entry, .decade-entry, .nav-journals a:contains(Archives of), .site-link--sub-nav a:contains(Archives of)").on("click",function(){"undefined"!=typeof Storage&&(sessionStorage.dontScrollPastIssue="true")})}function a(){if(App.isPastIssues&&"undefined"!=typeof Storage){if("true"!==sessionStorage.dontScrollPastIssue){var t=e(".issue-pagination").offset().top-106;e("html, body").animate({scrollTop:t},"slow")}sessionStorage.dontScrollPastIssue="false"}}function s(t,e,i){for(var n=0;n<t.length;n++){var a=document.createElement("option");a.value=t[n][0],a.text=t[n][1],t[n][0]===i&&a.setAttribute("selected","selected"),e.appendChild(a)}return e}function r(t){for(var e=[],i=queryAll(t),n=0;n<i.length;n++){var a=[];a.push(i[n].getAttribute("data-option")),a.push(i[n].textContent),e.push(a)}return e}function o(){var t=e(".issue-browse");e(".decade-select, .year-select, .issue-select").change(function(){var i=e(this).find("option:selected").attr("value");t.find("[data-option="+i+"]")[0].click()})}function l(){var t=scmquery(".decade-select-wrap"),i=scmquery(".year-select-wrap"),n=scmquery(".issue-select-wrap"),a=e(".decade-entry.selected").attr("data-option"),o=e(".year-entry.selected").attr("data-option"),l=e(".issue-entry.selected").attr("data-option"),c=document.createElement("select"),u=document.createElement("select"),d=document.createElement("select");classie.add(c,"decade-select"),classie.add(u,"year-select"),classie.add(d,"issue-select"),t.appendChild(s(r(".decade-entry"),c,a)),i.appendChild(s(r(".year-entry"),u,o)),n.appendChild(s(r(".issue-entry"),d,l))}function c(){var t=e(".new-online--controls");e(".year-select, .day-select").change(function(){var i=e(this).find("option:selected").attr("value");t.find("[data-option="+i+"]")[0].click()})}function u(){if(App.isNewOnline){var t=scmquery(".year-select-wrap"),i=scmquery(".day-select-wrap"),n=e(".new-online--year.selected").attr("data-option"),a=e(".new-online--day.selected").attr("data-option"),o=document.createElement("select"),l=document.createElement("select");classie.add(o,"year-select"),classie.add(l,"day-select"),t.appendChild(s(r(".new-online--year"),o,n)),i.appendChild(s(r(".new-online--day"),l,a))}}function d(){if(App.isNewOnline){var i,n=(e(".issue-view-trigger"),!1),a=e(".new-online--days"),s={items:8,itemsDesktop:[1199,7],itemsDesktopSmall:[980,5],itemsTablet:[768,5],itemsTabletSmall:[600,3],itemsMobile:[479,3],pagination:!1,navigation:!0,navigationText:["",""],rewindNav:!1},r=function(){n?i.reinit(s):(a.owlCarousel(s),n=!0,i=a.data("owlCarousel"))};t.updateCarousel=debounce(function(){r()},50,!1),App.isMobile||r(),u()}}t.init=function(){n(),App.isPastIssues&&(l(),o()),App.isNewOnline&&(d(),c())},t.windowLoadInit=function(){a()}}(SCM.IssuePage=SCM.IssuePage||{},jQuery);var App=App||{};!function(ns,$){function checkCmeAcknowledgements(){var t=$(".chk-cme-acknowl"),e=$(".start-quiz");t.change(function(){var i=[];t.each(function(){$(this).is(":checked")?i.push(!0):i.push(!1)}),i.indexOf(!1)>-1?e.addClass("disabled"):e.removeClass("disabled")})}function checkSurveyComplete(){var t=$(".quiz--survey "),e=$(".btn--claim-cme");t.on("change",'input[type="radio"]',function(){2===$('input[type="radio"]:checked').length?e.removeClass("disabled"):e.addClass("disabled")})}function checkAllAnswersAnswered(){var t=$(".btn--submit-quiz");$quizContainer.on("change",".quiz--answer-input",function(){var e=$(".quiz--answer-input:checked").length,i=$(this);App.Quiz.userAnswers[i.attr("data-question-id")]=i.attr("value"),e===App.Quiz.questionCount?t.removeClass("disabled"):t.addClass("disabled")})}function submitAnswers(){$(".btn--submit-quiz").click(function(){var t=!1;if($.ajax({url:"/AMA/HasUserClaimedCme",type:"GET",async:!1,data:{quizId:App.Quiz.quizId},success:function(e){t=e.hasClaimedCme}}),t){var e={quizId:App.Quiz.quizId,creditsClaimed:0,userQuizFeedback:"",hasClaimedCme:!0};$.ajax({url:"/AMA/ClaimedCmeCertificate",data:e,success:function(t){!1!==t&&$takeQuizTab.html(t)}})}else{var i=JSON.stringify(App.Quiz.userAnswers);App.Quiz.endDate=new Date;var n={PassingScore:App.Quiz.passingScore,UserAnswersJson:i,QuizId:App.Quiz.quizId,Credits:App.Quiz.credits,EducationalObjective:App.Quiz.educationalObjective,QuizStartDate:App.Quiz.startDate.toISOString(),QuizEndDate:App.Quiz.endDate.toISOString(),QuizExpireDate:App.Quiz.expireDate.toISOString()};$.ajax({url:"/AMA/ActivityQuizResults",type:"POST",data:n,success:function(t){!1!==t&&$takeQuizTab.html(t)},error:function(t){$takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time.")}})}})}function returnToQuiz(){$(".btn--return-to-quiz").click(function(){startQuiz()})}function claimCmeCertificate(){$(".btn--claim-cme").on("click",function(){$(this).off("click");var t=$("input[name=ed-objective-score]:checked").val(),e=$("input[name=commercial-bias]:checked").val(),i={quizId:App.Quiz.quizId,creditsClaimed:App.Quiz.credits,
userQuizFeedback:t+","+e,controlId:"AMA_ClaimedCmeCertificate"};$.ajax({url:"/AMA/ClaimedCmeCertificate",data:i,success:function(t){!1!==t&&$takeQuizTab.html(t)},error:function(t){$takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time.")}})})}function scrollToQuizTop(){$(".btn--take-quiz").click(function(){SCM.JSUtility.scrollToLocation("#top")})}function asyncLoadFullArticle(){$("#read-full-article").on("click",function(t){t.preventDefault(),$(".abstract-view, .btn--read-article").hide(),SCM.EventEmitter.subscribe(".AMA-Learning-Activity-Read-Full-Article_LOADED",function(){addthis.toolbox(".figure-table-links")}),App.Quiz.hasFreeCmeAccess&&App.Quiz.expireDate>currentDate&&redeemFreeCmeCredit(),SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".AMA-Learning-Activity-Read-Full-Article","data-url","data-params")})}function startQuiz(){App.Quiz.startDate=new Date;var t={quizId:App.Quiz.quizId,credits:App.Quiz.credits,controlId:"AMA_ArticleQuiz_TakeQuiz"};$.ajax({url:"/AMA/TakeActivityQuiz",data:t,success:function(t){!1!==t&&($takeQuizTab.html(t),initQuiz())},error:function(t){$takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time.")}})}function redeemFreeCmeCredit(){if(App.Quiz.userAccountId){var myObj={resourceId:App.Quiz.quizId,userAccountId:App.Quiz.userAccountId};$.ajax({url:"/AMA/RedeemFreeCmeCredit",data:myObj,success:function(t){t===FreeCmeRedemptionEnum.REDEEMED.toString()&&(window.console&&console.log("Account "+App.Quiz.userAccountId+" has redeemed one free CME credit for quiz "+App.Quiz.quizId),addFreeCmeRedemptionSubscription())},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}}function addFreeCmeRedemptionSubscription(){var myObj={resourceId:App.Quiz.quizId,userAccountId:App.Quiz.userAccountId};$.ajax({url:"/AMA/AddFreeCmeRedemptionSubscription",data:myObj,success:function(t){window.console&&console.log("Free CME redemption subscription added for quiz "+App.Quiz.quizId+" to account "+App.Quiz.userAccountId)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function checkBypassTest(){if(2==App.Quiz.UserQuizStage){var t={PassingScore:App.Quiz.passingScore,QuizId:App.Quiz.quizId,Credits:App.Quiz.credits,EducationalObjective:App.Quiz.educationalObjective,QuizExpireDate:App.Quiz.expireDate.toISOString()};$.ajax({url:"/AMA/ActivityQuizResults",type:"POST",data:t,success:function(t){!1!==t&&$takeQuizTab.html(t)},error:function(t){$takeQuizTab.html("There is an error with this action.  Please try again at a later time.")}})}}function initQuiz(){$(".quiz").owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0,pagination:!1,navigationText:["",""],rewindNav:!1,autoHeight:!0})}function bindTabEvents(){$(".take-quiz-trigger").click(function(){App.Quiz.hasFreeCmeAccess&&App.Quiz.expireDate>currentDate&&redeemFreeCmeCredit()})}var FreeCmeRedemptionEnum={NOT_REDEEMED:0,REDEEMED:1,ALREADY_REDEEMED:2},$quizContainer=$(".activity-quiz-view-tabs"),$takeQuizTab=$("#take-quiz-tab"),currentDate=new Date;ns.articleQuiz=function(){$(".start-quiz").click(function(){startQuiz()})},ns.init=function(){(App.isQuiz||App.isPlayer)&&(SCM.JSUtility.toggleTabs(".tabs--link-container",".tabs--link",".tabs--tab"),SCM.JSUtility.smoothScrollLinks(),SCM.JSUtility.triggerClickOnAnotherElement(),checkCmeAcknowledgements(),checkBypassTest(),scrollToQuizTop(),ns.articleQuiz(),asyncLoadFullArticle(),bindTabEvents(),App.Quiz.userAnswers={},$(document).ajaxComplete(function(t,e,i){i.url.indexOf("ArticleFullText")>-1&&(SCM.JSUtility.scrollToLocation("#top",700),$(".read-article--user-actions").appendTo(".view-content-tab"),SCM.SiteJS.initLazyLoad(".view-content-tab .lazy")),i.url.indexOf("TakeActivityQuiz")>-1&&(checkAllAnswersAnswered(),submitAnswers()),i.url.indexOf("ActivityQuizResults")>-1&&(returnToQuiz(),claimCmeCertificate(),checkSurveyComplete())}))}}(App.Quiz=App.Quiz||{},jQuery);var App=App||{};if(function(t,e,i){function n(){e.on("change",a,function(){var t=i(this),e=t.find("option:selected").attr("data-index");i(s).find('[data-index="'+e+'"]').find("a")[0].click()})}var a=".cme--microsites-dropdown",s=".cme--microsites";t.addIndexToSiteList=function(){var t=0;i(s).find("li").each(function(){i(this).attr("data-index",t),t++})},t.addCorrectSelectedOption=function(){var t=i(s).find(".activeTab").attr("data-index");i(a).find('[data-index="'+t+'"]').attr("selected","selected")},t.quizzesByCourse=function(){i("#divViewByTopic").show(),i(".topicsContainer").show(),i(".topicDetailContainer").hide(),i("#divBreadCrumbs").hide(),i(".browseByYear").hide(),i(".topicTree").hide()},t.init=function(){App.isLearning&&(t.addIndexToSiteList(),t.addCorrectSelectedOption(),n())}}(App.LegacyLearning=App.LegacyLearning||{},jQuery(document),jQuery),App.isJournalArticleCme){var prm=Sys.WebForms.PageRequestManager.getInstance();prm.add_endRequest(function(){App.LegacyLearning.addIndexToSiteList(),App.LegacyLearning.addCorrectSelectedOption(),$("html, body").animate({scrollTop:0},"250")})}var ArtMetric=ArtMetric||{};ArtMetric.fullVersion=function($dest,routeUrl){$.ajax({url:routeUrl,datatype:"HTML",success:function(t){$dest.html(t),setTimeout(function(){if(void 0!==window.ChartistData){var t={lineSmooth:!1,showArea:!0,low:0},e=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(t){return t.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(t){return t.replace(" ","<br />")}}}]];ArtMetric.createChart(".ct-chart",window.ChartistData.data,t,e)}},200),window._altmetric_embed_init()},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})},ArtMetric.eventsToClose=function(){$(".artmet-modal").on("click",".artmet-close-modal",function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})};var App=App||{};!function(t,e,i){function n(){function t(){var t=App.isMobile?94:100;c.length&&c.stick_in_parent({parent:".master-main",offset_top:t,recalc_every:10})}App.isSplitScreen&&(t(),SCM.EventEmitter.subscribe("viewport-changed",function(e){c.trigger("sticky_kit:detach"),t()}))}function a(){App.isSplitScreen&&c.on("click",".tab-nav-trigger",function(){var t=this,n=(t.className,t.getAttribute("href")),a=App.isTabletDown?e("html, body"):d,s=function(t){setTimeout(function(){a.animate({scrollTop:t},150)},1)};App.sectionJumpLinkClicked||s(App.lastPositions!==i&&App.lastPositions[n]!==i?App.lastPositions[n]:0),App.sectionJumpLinkClicked=!1})}function s(){c.on("click",".tab-nav-trigger",function(){App.isDesktop?d.trigger("scroll"):e(window).trigger("scroll")})}function r(){e(".lazy").each(function(){var t=e(this);t.attr("src",t.attr("data-original")),this.loaded=!0})}function o(t,e){t.length&&(App.isDesktop?".tab-nav-full-text"!==e&&t.click():t.click())}function l(t,i){switch(t){case".tab-nav-figure-table":return e(i).closest(".figure-table-wrapper");case".tab-nav-references":return App.isSplitScreen?e(".references-wrap").find(i):e(i);case".tab-nav-multimedia":return e(i).closest(".multimedia-item");default:return e(i)}}var c=e(".tab-nav"),u=e(".content-panel"),d=e(".resources-panel");e("body");App.sectionJumpLinkClicked=!1,t.scrollOverflowElement=function(t,n){var a,s=App.isMag||App.isQuiz||App.isTabletDown?e("html, body"):".tab-nav-full-text"===t?u:d,r=[".tab-nav-full-text",".tab-nav-figure-table",".tab-nav-multimedia",".tab-nav-references"],o=App.isSplitScreen?15:92,c=App.isSplitScreen?l(t,n):e(n);r.indexOf(t)>-1&&(c.length?(a=c.position().top-o,s.animate({scrollTop:a},500),App.scrollQueue=i):App.scrollQueue={tab:t,hash:n})},t.manageAnchorLinks=function(){e(".master-main").on("click",".section-jump-link",function(i){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){r(),i.preventDefault();var n=e(this),a=this.hash,s=n.attr("data-tab-toggle"),l=e(s);App.isSplitScreen&&(App.sectionJumpLinkClicked=!0,o(l,s)),(App.isMag||App.isQuiz)&&".tab-nav-supplemental"==s&&e("#data-supplements-magazine-reveal").foundation("reveal","open"),App.isSplitScreen&&App.isTabletDown?setTimeout(function(){t.scrollOverflowElement(s,a)},10):(t.scrollOverflowElement(s,a),setTimeout(function(){t.scrollOverflowElement(s,a)},250))}})},t.initTabNavigation=function(){if(App.isSplitScreen){var t=".tab-nav-full-text",i=e(".tab-nav-trigger");if(App.lastPositions=App.lastPositions||{},App.isDesktop)for(var r=[".tab-nav-contents",".tab-nav-figure-table",".tab-nav-supplemental",".tab-nav-related"],o=0;o<r.length;o++){var l=scmquery(r[o]);if(l&&!classie.has(l,"tab-no-content")){t=r[o];break}}e(".tab-nav-trigger").click(function(){var t=(e(this),i.filter(".target-tab-active").attr("href")),n=App.isTabletDown?e("body"):d;App.lastPositions[t]=n.scrollTop()}),SCM.JSUtility.toggleTabs(".tab-nav",".tab-nav-trigger",".resource-tab",t),n(),a(),s()}},t.init=function(){App.isSplitScreen&&t.initTabNavigation(),(App.isAnyArticle||App.isQuiz)&&t.manageAnchorLinks()}}(App.SplitScreen=App.SplitScreen||{},jQuery);var App=App||{};!function(t,e,i){function n(){var t=r.find(".no-access--alerts-input"),e=r.find(".sign-in--create-link"),i=r.find(".sign-in--personal-link");t.click(function(){var n=i.attr("href"),a=e.attr("href");t.is(":checked")?n.indexOf("alert=1")<0&&(i.attr("href",n+"?alert=1"),e.attr("href",a+"?alert=1")):(i.attr("href",n.replace("?alert=1","")),e.attr("href",a.replace("?alert=1","")))})}function a(){var t=e("#no-access-reveal");0===t.find(".modal--options").length&&t.removeClass("medium").addClass("small")}function s(){if(App.isAbstract){var t=e(".full-text-link, .toolbar-full-text");t.click(function(){var e=t.attr("data-url");e&&e.length>0?window.location.href=e:SCM.PDFAccess.openNoAccessModalArticle(t,t.attr("data-article-id"))})}}var r=e(".register-free-pdf");t.init=function(){n(),s(),a()}}(App.Access=App.Access||{},jQuery);var App=App||{};!function(t,e,i){function n(){var t=e(".toolbar-trigger");t.find(".toolbar-tool").not(".toolbar-share").add(t.find(".toolbar-share-more .toolbar-share")).click(function(){var t=e(e(this).attr("data-trigger"))[0];t&&t.click()})}function a(){e(".toolbar-share").click(function(){var t=e(this).attr("data-utm-source"),i=e("meta[property='og:url']").attr("content"),n=e("meta[property='og:type']").attr("content");if("quiz"===n.toLowerCase())addthis.update("share","url",i);else{var a=new Date,r=("0"+(a.getMonth()+1)).slice(-2),o=("0"+a.getDate()).slice(-2),l=a.getYear()%100,c=r.concat(o,l),u=s(n),d=i+"?utm_source="+t+"&utm_campaign=content-shareicons&utm_content="+u+"&utm_medium=social&utm_term="+c;addthis.update("share","url",d)}})}function s(t){return t.toLowerCase()+"_engagement"}function r(){if("undefined"!=typeof addthis){addthis.update("share","url_transforms",{shorten:{twitter:"bitly"}}),addthis.update("share","shorteners",{bitly:{}});var t=e(".social-share, .toolbar-tool").attr("data-share-title");t&&t.length>0&&addthis.update("share","title",t)}}e("#toolbar");t.init=function(){App.isSplitScreen&&SCM.JSUtility.removeEmptyTabs(".tab-nav-trigger",["#full-text-tab","#related-tab"],".advertisement, script, .widget-JobsAd, .widget-JobsAd *"),(App.isAbstract||App.isMag)&&n(),r(),a()}}(App.Toolbar=App.Toolbar||{},jQuery);var App=App||{};!function(t,e){function i(){e("#renewSubs").on("click",function(){var t=e(".chk-renewal:checked").map(function(){return this.value}).get(),i=t.join("|");if(i.length>0){var n=App.storeUrl+"/cartView.aspx?AddToCart="+i;window.location.href=n}else window.location.href=App.storeUrl})}t.init=function(){App.isMyAccount&&i()}}(App.MySubscriptions=App.MySubscriptions||{},jQuery);var SCM=SCM||{};!function(t,e){function i(){if(App.isAbstract){e(".article-content > .full-text-link").stick_in_parent(T)}if(App.isMag){e(".social-share").stick_in_parent(T)}}function n(){if(App.isSplitScreen){var t=e(".footer"),i=e(".content-panel");t.appendTo(i)}}function a(){App.isAnyArticle&&0===e(".widget-ToolboxPermissions").length&&(e(".toolbar-citation").addClass("permissions-hidden"),e(".toolbar-permissions-wrap").hide())}function s(){if(App.isMag&&!scmquery(".article-pdf-only")){e(".article-full-text > p").first().html(function(t,e){return e.replace(/^[^a-zA-Z0-9'"<]*([a-zA-Z0-9])/g,'<span class="drop-cap">$1</span>')})}}function r(){App.isAnyArticle&&scmquery(".article-pdf-only")&&I.addClass("is-backfile")}function o(){App.isAnyArticle&&e(".errata-links.retracted").length&&e(".content-panel, .article-content").addClass("is-retracted-article")}function l(){if(App.isPlayer){var t=e(".vjs-control-bar");t.hide(),e(".vjs-big-play-button").on("click",function(){t.slideDown()})}}function c(){App.isMyAccount&&SCM.JSUtility.printPortionOfPage(".my-acct--cme",".cme--create-pdf-year")}function u(t){if(t=t||!1,!App.isMobile||!App.isFreeArticle||t){var i=function(t,i){t.lazyload({skip_invisible:!1,container:i,failure_limit:10,load:function(){e(this).addClass("loaded")}}),t.on("appear",function(){var t=this;if(!t.loaded){t.loaded=!0;var i=e(t);i.removeClass("lazy-ad"),googletag.cmd.push(function(){googletag.pubads().refresh([App.Ads.slots[i.attr("data-slot")]],{changeCorrelator:!1})})}}),SCM.EventEmitter.publish("AppearTriggerBound")};if(App.isSplitScreen&&App.isDesktop){var n=e(".resources-panel");i(n.find(".lazy-ad"),n)}else i(e(".lazy-ad"),window);App.isSplitScreen&&!App.isFreeArticle&&e("#ad-dual-box-mobile").remove()}}function d(t){jQuery(document).ready(function(e){t?u(t):(SCM.AsyncAds.LoadHeaderAd(".SCM-SharedWidgets-AsyncHeaderAdLoader","data-url","data-params","POST"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){SCM.AsyncAds.LoadAds(".SCM-SharedWidgets-AsyncAdLoader","data-url","data-params","POST")}),SCM.EventEmitter.subscribe("AdFired",function(){u()}))})}function p(){App.isNetworkHome&&SCM.JSUtility.toggleHoverState(".site-link.has-sub-nav")}function h(){if(App.isAnyArticle){SCM.JSUtility.toggleTabs(".linked-content-controls",".linked-content-trigger",".linked-content-tab",".doesnt-exist-tab",!0),SCM.JSUtility.removeEmptyTabs(".linked-content-trigger");var t=e(".linked-content-controls"),i=e(".linked-content-toolbar");t.children().not(".tab-no-content").length&&i.addClass("activated"),k.click(function(t){e(t.target).closest(".linked-content-toolbar").length||(e(".linked-content-trigger").removeClass("target-tab-active"),e(".linked-content-tab").removeClass("tab-active"))})}}function f(t,i,n){$container=e(t),$trigger=e(i),$target=e(n),$trigger.next($target).attr("aria-hidden",!0),$trigger.click(function(t){t.preventDefault();var i=e(this),n="true"!==i.attr("aria-selected");i.next($target).toggleClass("collapsible-list-target-is-active"),i.attr("aria-selected",n),$target.next().attr("aria-hidden",!n)})}function m(){e(".js-showAll").click(function(t){t.preventDefault(),e(".open-close-all").find(".collapsible-list-header").each(function(){e(this).next().hasClass("collapsible-list-target-is-active")||e(this).trigger("click")})}),e(".js-hideAll").click(function(t){t.preventDefault(),e(".open-close-all").find(".collapsible-list-header").each(function(){e(this).next().hasClass("collapsible-list-target-is-active")&&e(this).trigger("click")})})}function g(){SCM.EventEmitter.subscribe("viewport-changed",function(){googletag.pubads().refresh(App.Ads.slots,{changeCorrelator:!1})})}function v(){if(App.isSplitScreen){var t=e(".ad-riser--dismiss"),i=t.closest(".ad-riser-wrap");t.click(function(){i.addClass("closed")})}}function y(){if(App.isJournal||App.isNetworkHome){var t=e(".editors-choice").find(".widget-SelfServeContent");if(t.find("*").length<10){var i=t.text();0===(void 0!==i?e.trim(i):1).length&&e(".movable-ad-target").prepend(e(".movable-ad"))}}(App.isIssue||App.isMag||App.isSplitScreen&&App.isFreeArticle)&&e(".movable-ad-target").last().prepend(e(".movable-ad"))}function b(){App.isLearning&&e(".clone-target").append(e(".clone-source").clone())}function A(){e(".collapsible .collapsible-header").each(function(){var t=e(this),i="collapsible-"+t.index();t.nextUntil(".collapsible-header").wrapAll('<div id="'+i+'" class="collapsible-content" aria-hidden="true">');var n=t.next();t.wrapInner('<button aria-expanded="false" aria-controls="'+i+'">'),t.children("button").on("click",function(t){t.preventDefault();var i=e(this),a="false"===i.attr("aria-expanded");i.attr("aria-expanded",a),n.attr("aria-hidden",!a)})})}function S(){if(App.isQuiz){var t=App.Global.queryParameters().quiz;null!=t&&(window.location.hash="#q"+t),questionHash=window.location.hash,questionHashNumber=questionHash.indexOf("#"),questionHashFinal=questionHash.substring(questionHashNumber+1);var i=e('a[name="'+questionHashFinal+'"]');e(i).next().addClass("highlighted"),e("html, body").animate({scrollTop:e(i).offset().top-106},500)}}function w(){if(App.isMag){var t=e("#magazine-bta");if(App.isMobile&&!App.isFreeArticle)return void t.remove();var i={siteName:App.MagazineView.siteName,adDisplay:App.MagazineView.adDisplay,adSection:App.MagazineView.adSection,adPosition:App.MagazineView.adPosition,fromGoogle:App.MagazineView.fromGoogle,controlId:App.MagazineView.controlId};e.ajax({type:"POST",url:"/AMA/AdTag",data:i,success:function(e){t.empty(),t.html(e),d(!0)},error:function(t,e,i){SCM.JSUtility.logErrors(t,e,i)}})}}function C(){if(!(!App.isSplitScreen||App.isSplitScreen&&App.isMobile)){var t=e("#split-screen-contab");if(""===t.html()){var i={siteName:App.ArticleSplitScreen.siteName,adDisplay:App.ArticleSplitScreen.adDisplay,adSection:App.ArticleSplitScreen.adSection,adPosition:App.ArticleSplitScreen.adPosition,fromGoogle:App.ArticleSplitScreen.fromGoogle,controlId:App.ArticleSplitScreen.controlId,slotLocationOverride:App.ArticleSplitScreen.slotLocationOverride};e.ajax({type:"POST",url:"/AMA/AdTag",data:i,success:function(e){t.empty(),t.html(e),d(!0)},error:function(t,e,i){SCM.JSUtility.logErrors(t,e,i)}})}}}function x(){var t=["?",".",":",";",","];e(".issue-view-tab .article--title a .subtitle").each(function(i,n){var a=n.previousSibling.textContent.slice(-1);t.indexOf(a)>-1&&e(n).addClass("subtitle-no-colon")})}var k=e(window),I=e("body"),F=e(document),T={offset_top:106,recalc_every:10};if(t.resizeIframe=function(t){var e,i;document.getElementById&&(e=document.getElementById(t).contentWindow.document.body.scrollHeight,i=document.getElementById(t).contentWindow.document.body.scrollWidth),document.getElementById(t).height=e+"px",document.getElementById(t).width=i+"px"},t.stickSearchFacets=function(){if(App.isSearch){e(".facets-inner").stick_in_parent({offset_top:106,recalc_every:10,parent:".search-wrap"})}},t.searchFacetsMoreLess=function(){if(App.isSearch||App.isLearningSearchResults){var t=e(".sf-facet-list"),i='<span class="symbol">[+]</span> More';!!scmquery(".facet-more-less")||t.each(function(){var t=e(this),n=t.find(".sf-facet");if(n.length>6){var a=n.slice(6);a.addClass("hide"),t.append('<a href="" class="facet-more-less">'+i+"</a>");var s=t.find(".facet-more-less");s.click(function(t){t.preventDefault(),s.toggleClass("active"),s.hasClass("active")?(s.html('<span class="symbol">[-]</span> Less'),a.removeClass("hide")):(s.html(i),a.addClass("hide"))})}})}},t.equalizeJustPublished=function(){if(App.isJournal){var t=e(".widget-JustPublished"),i=t.find(".article"),n=0,a=function(){i.removeAttr("style")},s=function(t){n=0,t.each(function(){var t=e(this),i=t.outerHeight();i>n&&(n=i)}),t.each(function(){e(this).innerHeight(n)})};!function(){if(App.isMobileAlt)a();else{a();for(var i=e(".widget-instance-AMA_ArticleListNewAndPopular_Journal_Research .featured-list--contents li").length,n=1;n<=i;n++){var r=t.find(".article-"+n);s(r)}}}()}},t.updateEqualizeJustPublished=debounce(function(){t.equalizeJustPublished()},50,!1),t.updateMyCmeByYear=function(t){e(".my-cme-by-year-ajax-wrap").load("/AMA/MyCme?selectedYear="+t,function(){c()})},t.formatSearchQueryToSaveToLocalStorage=function(t){return t.replace(/(([?|&]{1})?q=[^&]*)/,"").replace(/(([?|&]{1})?page=[^&]*)/,"").replace(/(([?|&]{1})?exPrm_qqq[^&]*)/,"").replace(/(([?|&]{1})?exPrm_hl.q[^&]*)/,"").replace(/(([?|&]{1})?SearchSourceType[^&]*)/,"").replace(/(([?|&]{1})?author[^&]*)/,"").replace(/(([?|&]{1})fl_[^&]*)/g,"").replace(/(([?|&]{1})restypeid=[^&]*)/,"").replace(/(^[?|&])/,"").replace(/(([?|&]{1})appId=[^&]*)/,"")},t.saveDomainCookie=function(t,e,i){document.cookie=t+"="+e+";path=/;domain="+i},t.getCookie=function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return""},t.initLazyLoad=function(t){t=t||".lazy";var i=function(t,i){t.lazyload({skip_invisible:!1,container:i,failure_limit:10,load:function(){e(this).addClass("loaded")}})};if(App.isSplitScreen&&App.isDesktop){var n=e(".content-panel"),a=e(".resources-panel"),s=n.find(t),r=a.find(t);i(s,n),i(r,a)}else i(e(t),void 0)},t.initFoundation=function(){F.foundation()},t.launchGetCitationModal=function(){e('[data-reveal-id="getCitation"]').click(function(){e("#getCitation").foundation("reveal","open")})},t.initDatePicker=function(){App.isAdvancedSearch&&e("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").datepicker()},t.shareFiguresAndTables=function(){if(App.isSplitScreen){(function(){e.ajaxSetup({cache:!0}),e.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"{your-app-id}",version:"v2.5"}),e("#loginbutton,#feedbutton").removeAttr("disabled")})})();e("a.figure-table-social").click(function(){})}},"object"==typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(t){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}t.init=function(){if(m(),t.initFoundation(),y(),t.initLazyLoad(),d(),a(),s(),i(),t.stickSearchFacets(),p(),t.searchFacetsMoreLess(),g(),o(),n(),v(),c(),l(),x(),SCM.JSUtility.toggleVisibility(),SCM.JSUtility.accordion(),App.isSplitScreen&&(SCM.JSUtility.addStateToggle(".toolbar-share-more-link",".toolbar-share-more"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){C()}),SCM.EventEmitter.subscribe("viewport-changed",function(){C()})),(App.isAbstract||App.isMag)&&SCM.JSUtility.addStateToggle(".toolbar-trigger .toolbar-share-more-link",".toolbar-trigger .toolbar-share-more"),App.isAbstract&&SCM.FirstPagePreview.init(),(App.isJournal||App.isIssue)&&SCM.JSUtility.toggleTabs(".most--links",".most--trigger",".most--tab",".most-viewed-trigger"),App.isSearch||App.isLearningSearchResults){SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",void 0,!0,!0);var S=App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters";if(document.referrer.indexOf("/advanced-search")<0){var w=t.formatSearchQueryToSaveToLocalStorage(window.location.search);t.saveDomainCookie(S,w,document.domain)}}t.equalizeJustPublished(),h(),r(),f(".collapsible-list",".collapsible-list-header",".collapsible-list-target"),A(),b(),e(document).ajaxComplete(function(){(App.isAbstract||App.isSplitScreen)&&App.isFreeArticle&&u(!0)})},t.windowLoadInit=function(){t.initDatePicker(),t.launchGetCitationModal(),t.shareFiguresAndTables(),S(),w()}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),function(t,e,i,n){i.ready(function(){App.Toolbar.init(),App.SplitScreen.init(),SCM.SiteJS.init(),App.Global.init(),SCM.PDFAccess.init(),App.ArticleTopInfo.init(),App.Access.init(),SCM.SolrSearch.init(),SCM.IssuePage.init(),App.Quiz.init(),App.LegacyLearning.init(),App.MySubscriptions.init(),App.Collection.init(),App.Learning.init(),App.SearchAutoComplete.init(),SCM.InstitutionOpenUrl.init()}),e.load(function(){SCM.SiteJS.windowLoadInit(),App.Global.windowLoadInit(),SCM.IssuePage.windowLoadInit()}),e.on("resize",function(){App.updateAppVariables(),App.notifyViewportChange(),SCM.SiteJS.updateEqualizeJustPublished()}),i.ajaxComplete(function(e,i,n){SCM.SiteJS.initFoundation(),(App.isSearch||App.isLearningSearchResults)&&(SCM.SiteJS.searchFacetsMoreLess(),SCM.SiteJS.stickSearchFacets(),n.url.indexOf("SearchResults")>-1&&SCM.SiteJS.initLazyLoad(".search-results .lazy"),App.isLearningSearchResults&&(SCM.SiteJS.initLazyLoad(".learning--search-results .lazy"),SCM.EventEmitter.publish("LearningSearchImageBound"))),n.url.indexOf("PersonalizedContent")>-1&&(setTimeout(function(){t(".widget-PersonalizedContent").addClass("loaded")},500),!App.supportsFlexbox&&App.isJournal&&SCM.JSUtility.equalHeights(".journal-contents .ymal--item",640),App.supportsFlexbox||!App.isAnyArticle&&!App.isIssue||SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640))})}(jQuery,jQuery(window),jQuery(document)),window.dataLayer=window.dataLayer||[],SCM=SCM||{},SCM.AMA=SCM.AMA||{};var getValue=function(t,e){if("array"===e){var i=t.split(","),n=[];return i.forEach(function(t){var e=removeExtraTags(decodeURIComponent(t.trim()));""!==e&&n.push(e)}),0===n.length?"":n}return removeExtraTags(decodeURIComponent(t))},removeExtraTags=function(t){var e=t.replace(/<(.*)>.*<\/(.*)>/gi,"");return e=e.replace(/&#?(([0-9a-z]){1,4});/gi,""),e=e.replace(/  /g," ")};SCM.AMA.DataLayer=function(t){function e(){var e={};t(".tagmanagervalue").each(function(){var i=t(this),n=i.data("value"),a=i.data("type"),s=getValue(n,a);""!==s&&(e[i.data("attribute")]=s)});var n=i(".figure-table-wrapper",".figure-label",".figure-title");t.trim(n).length>0&&(e.arrArticleFigures=n.map(function(t){return removeExtraTags(t.trim())}));var a=i(".figure-table-wrapper",".table-label",".table-title");return t.trim(a).length>0&&(e.arrArticleTables=a.map(function(t){return removeExtraTags(t.trim())})),e.event="page view",e}function i(e,i,n){var a=[];return jQuery(e).each(function(){var e=t(this).find(i).html(),s=t(this).find(n).html();void 0===e&&void 0===s||(void 0===e?a.push(s):void 0===s?a.push(e):a.push(e+" "+s))}),a}return{ExecuteDataLayer:e}}(jQuery),function(t,e){t.push=function(t,e,i){var n={},a=getValue(e,i);a&&(n[t]=a,dataLayer.push(n))}}(SCM.AMA.DataLayerAsync=SCM.AMA.DataLayerAsync||{},jQuery),$("document").ready(function(){var t=SCM.AMA.DataLayer.ExecuteDataLayer();dataLayer.push(t)});var App=App||{};!function(t,e){function i(){e(".chkSelect").change(function(t){var i=e(this),n=i.attr("data-redirect-url");o(t,i.attr("id"),n)})}function n(){e("#tbAbsrSolrSearch").keydown(function(t){if(13===t.keyCode){var i=e("#tbAbsrSolrSearch").val();null===i||""===i?alert("Please enter a term to perform search"):(i=encodeURIComponent(i),l(t,i))}})}function a(){u.on("click",".view-more",function(t){var i=e(this),n=i.attr("data-url"),a=e(".sk-folding-cube");i.hide(),a.removeClass("hide"),r(t,n)})}function s(t){var i=t.find(".ad-single-box"),n=t.find(".movable-ad-target"),a=0;n.each(function(){var t=e(this),n=i.eq(a);t.prepend(n),a++})}function r(t,i){t.preventDefault();var n=window.location.search,a=e(".article-browse--pagination");if(0===n.length)n="?";else{var r=window.location.toString();n=r.substring(0,r.indexOf("?")+1)}n+=i;var o=n;e.ajax({url:o,success:function(t){if(!1!==t){var i=e(t),n=i.find("#collection--topic-search");d.empty(),d.html(n),i.filter("script.single-box-script").each(function(){e.globalEval(this.text||this.textContent||this.innerHTML||"")}),SCM.AsyncAds.LoadCollectionAds(".SCM-SharedWidgets-AsyncAdLoader","data-url","data-params","POST"),SCM.EventEmitter.subscribe("CollectionAdsFired",function(){App.Ads=App.Ads||{},App.Ads.NewSlots=[],d.find(".ad-single-box").each(function(){App.Ads.NewSlots.push(e(this).attr("data-slot"))}),s(d);var t=d.find(".article-browse--results"),i=d.find(".article-browse--pagination");c.append(t.children()),a.html(i.html()),googletag.pubads().refresh([App.Ads.slots[App.Ads.NewSlots[0]]]),googletag.pubads().refresh([App.Ads.slots[App.Ads.NewSlots[1]]],{changeCorrelator:!1})})}},error:function(t){}})}function o(t,e,i){t.preventDefault();var n=window.location.search;if(i.length>0)n.length>0&&"chkAllJournals"===e?n+="&"+i:n="?"+i;else{var a=window.location.toString();n=a.substring(0,a.indexOf("?"))}window.location=n}function l(t,i){t.preventDefault();var n=window.location.search,a=n.indexOf("q=");if(a>-1){var s=n.indexOf("&",a);n=-1===s?n.substring(0,a):n.substring(0,a)+n.substring(s+1),n=n.replace(/[\?&]$/,"")}if(0==n.length){var r=e("h1:first").find(".collection--name").text();n="?f_ContentType=Article&fl_Categories="+encodeURIComponent(r)}n+="&q="+i,window.location=n}var c=e(".article-browse--results"),u=e(".article-browse"),d=e(".ajax-container");t.init=function(){App.isCollection&&(SCM.EventEmitter.subscribe("AdFired",function(){s(e("#collection--topic-search"))}),i(),n(),a(),SCM.JSUtility.addStateToggle("#narrow-filter",".collection-facets--wrap",void 0,!0,!0))}}(App.Collection=App.Collection||{},jQuery);var SCM=SCM||{};SCM.AsyncAds=SCM.AsyncAds||{},SCM.AsyncAds=function(){function loadAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(t){domObj.parent().replaceWith(t),++firedAds===totalAds&&SCM.EventEmitter.publish("AdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadHeaderAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(t){domObj.parent().replaceWith(t),SCM.EventEmitter.publish("HeaderAdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadCollectionAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(t){domObj.parent().replaceWith(t),++firedAds===totalAds&&SCM.EventEmitter.publish("CollectionAdsFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(t){var e=JSON.parse(t),i=e.parameters,n=e.dynamicParameters;if(void 0!==n&&void 0!==n.localParams&&"[REPLACE_WITH_LOCAL]"===n.localParams){var a=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage();n.localParams=a,i.Items=JSON.stringify(a)}return i}return{LoadHeaderAd:loadHeaderAd,LoadAds:loadAds,LoadCollectionAds:loadCollectionAds}}();var App=App||{};!function(t,e,n){function a(){var t="/learning/searchresults?hd=learning";n(".learn-by-credit").on("click",".more--btn",function(e){e.preventDefault(),window.location.href=t+"&f_HasCME=true"}),n(".learn-by-audio").on("click",".more--btn",function(e){e.preventDefault(),
window.location.href=t+"&f_ContentType=Audio"}),n(".learn-by-video").on("click",".more--btn",function(e){e.preventDefault(),window.location.href=t+"&f_ContentType=Video"}),n(".learn-by-topic").on("click",".topic-suggestion",function(e){e.preventDefault(),window.location.href=t+"&f_Categories="+encodeURI(this.text)}),n(".learning-next-activity-viewer").on("click",".learning-next-activity-nav",function(t){t.preventDefault();var e=n(this);s(parseInt(e.attr("data-activityindex")),parseInt(e.attr("data-displaysize")),parseInt(e.attr("data-total")))})}function s(t,e,a){if($previousLink=n(".learning-next-activity-nav.previous"),$previousLink.removeClass("disabled"),0==t)$previousLink.addClass("disabled");else{var s=t<e?0:t-e;$previousLink.attr("data-activityindex",s)}$nextLink=n(".learning-next-activity-nav.next"),$nextLink.removeClass("disabled"),t+e>=a?$nextLink.addClass("disabled"):$nextLink.attr("data-activityindex",t+e);for($allResults=n(".learning.next-activity"),$allResults.addClass("hide"),i=1;i<=e;i++){var r="rowItem-"+i;$allResults.removeClass(r)}var o=t+e>a?a:t+e;for(t=o-e<0?0:o-e,$allResults.slice(t,o).removeClass("hide"),i=t;i<o;i++){var r="rowItem-"+(i-t+1);$allResults.eq(i).addClass(r)}}t.init=function(){App.isLearningContent&&a()}}(App.Learning=App.Learning||{},jQuery(document),jQuery);var App=App||{};!function(t,e,i){function n(t,e){return function(){e.apply(t,arguments)}}function a(t,a,s,r,o){this.searchInputControlId=document.getElementById(t),this.searchInputHintControlId=document.getElementById(a),this.autoCompleteResultsControlId=document.getElementById(s),this.isMicrosite=r,null!==o?(this.siteFilterDropDownSelectID=document.getElementById(o),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",n(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",n(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",e.debounce(n(this,this.evaluateTerms),250),!1),i(this.searchInputControlId).on("blur",n(this,this.hideResultsList)),i(this.searchInputControlId).on("focus",n(this,this.showResultsList)))}var s=window.location.protocol+"//"+window.location.host,r=i("#hfSolrAutoSuggestMinimumCharactersLength").val();a.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:s,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,isSearching:!1,noResultsFound:!1},a.prototype.filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=r&&this.getSuggestions()},a.prototype.evaluateTerms=function(){if(this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length)return this.noResultsFound=!1,this.isSearching=!1,void this.resetAutoComplete();this.inputTerms.length>=r&&(0===this.results.length||-1===this.results[0].value.indexOf(this.inputTerms))&&!this.isSearching&&this.getSuggestions(),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint()},a.prototype.getJournalURL=function(t,e,i){return"f_JournalDisplayName="+encodeURIComponent(t.trim())+e+(i?"&"+i:"")},a.prototype.getLearningURL=function(t,e){return e?e+t:"hd=learning"+t+"&f_HasCME=true"},a.prototype.getSearchParams=function(){var t="",e="",n="",a="";if(this.siteFilterDropDownSelectID){var s=i("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),r=i(".cs-placeholder").text(),o="Journals"===s&&"Learning"!==r||s!==r&&"Learning"!==r||s===r&&"Learning"!==s,l="Learning"===s||s!==r&&"Learning"===r;return t=o?"persistentSearchFilters":"persistentLearningSearchFilters",e=SCM.SiteJS.getCookie(t),e&&(n=e.replace(/(([?|&]{1})?f_JournalDisplayName[^&]*([&]{1})?)/,"").replace(/(([?|&]{1})?allJournals[^&]*([&]{1})?)/,"")),l?a=this.getLearningURL("&SearchSourceType=24",n):o&&s!==r?a=this.getJournalURL(r,"&SearchSourceType=24",n):o&&"Journals"!==s?a=this.getJournalURL(s,"&SearchSourceType=24",n):(n&&(n="&"+n),a="allJournals=1&SearchSourceType=24"+n),a}return"allJournals=1&SearchSourceType=24"},a.prototype.getJournalID=function(){var t=this.contentID;return t&&"j"===t.toLowerCase().substring(0,1)&&(t=t.substring(1)),t},a.prototype.getJournalJID=function(){var t=!1;if(this.siteFilterDropDownSelectID){var e=i(this.siteFilterDropDownSelectID,"option:selected").attr("value");-1===e.indexOf("*")&&(t=e)}return t},a.prototype.getSuggestions=function(){var t=this;t.contentID=t.getJournalJID(),t.isSearching=!0,i.ajax({url:t.solrUrl,data:t.contentID?{searchTerm:t.inputTerms,JournalID:t.getJournalID()}:{searchTerm:t.inputTerms},success:function(e){var i=e.SemanticFilterTopics;t.isSearching=!1,i.length>0?t.formatSuggestions(i):(t.noResultsFound=!0,t.resetAutoComplete())},cache:!0})},a.prototype.formatSuggestions=function(t){var e=t;this.results=[];var n=i("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),a=i(".cs-placeholder").text(),s="";if(e.length>0)if(this.inputTerms&&-1!==e[0].Key.indexOf(this.inputTerms)){for(var r=0;r<e.length;r+=1){var o=this.baseURL;s="Learning"===n||n!==a&&"Learning"===a?"/learning/searchresults?q=":"/searchresults?q=";var l={value:e[r].Key,url:o+s+encodeURIComponent(e[r].Key)+"&"+this.getSearchParams(),position:"sr"+this.autoCompleteResultsControlId.id+(r+1)};this.results.push(l)}this.setHint(e[0].Key),this.appendResults()}else this.noResultsFound||this.inputTerms||this.getSuggestions();else this.resetAutoComplete()},a.prototype.setHint=function(t){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=t)},a.prototype.clearHint=function(){this.searchInputHintControlId.value=""},a.prototype.appendResults=function(){var t="";"term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list");for(var e=0;e<this.results.length;e++){var i=this.results[e];t+='<li><a href="'+i.url+'" id="'+i.position+'">'+this.results[e].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=t},a.prototype.hideResultsList=function(t){var e=this;setTimeout(function(){e.autoCompleteResultsControlId.className="term-list term-list--hidden"},200)},a.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list"},a.prototype.resetResultsList=function(t){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},a.prototype.resetSelection=function(){var t=-1!==this.selectedResult&&this.results[this.selectedResult].position;t&&i("#"+t).removeClass("active"),this.selectedResult=-1},a.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},a.prototype.completeTerms=function(){var t=this.searchInputControlId.selectionStart,e=this.searchInputControlId.selectionEnd;t===e&&e===this.inputTerms.length&&this.results&&this.results.length>0&&(this.searchInputControlId.value=this.results[0].value,this.evaluateTerms())},a.prototype.navigateResults=function(t){var e=this.selectedResult+t;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position;var n;e<this.results.length&&e>-1?(n=this.results[e].position,!!oldResultId&&i("#"+oldResultId).removeClass("active"),i("#"+n).addClass("active"),this.selectedResult+=t):!oldResultId&&this.results.length>0?(n=this.results[this.results.length-1].position,i("#"+n).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},a.prototype.keyFunctions=function(t,e){if(9===e&&(t.preventDefault(),this.completeTerms()),38===e&&(t.preventDefault(),this.navigateResults(-1)),40===e&&(t.preventDefault(),this.navigateResults(1)),13===e&&this.selectedResult>-1){t.preventDefault();var n=i("#"+this.autoCompleteResultsControlId.id+" .active").attr("href");this.searchInputControlId.value=i("#"+this.autoCompleteResultsControlId.id+" .active").text(),this.searchInputHintControlId.value=i("#"+this.autoCompleteResultsControlId.id+" .active").text(),window.location=n}},a.prototype.interceptKeys=function(t){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(t,t.keyCode)},t.init=function(){i.browser.msie&&"8.0"===i.browser.version?(i("#umbrellaSiteSearchInputHint").hide(),i("#umbrellaSiteAutoCompleteResults").hide()):new a("search-term","umbrellaSiteSearchInputHint","umbrellaSiteAutoCompleteResults",!1,"BodyContent_Header_ddlForSearch")}}(App.SearchAutoComplete=App.SearchAutoComplete||{},SCM.JSUtility,jQuery);